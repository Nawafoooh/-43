<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>متوسطة المنذر بن عمرو الأنصاري</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        *{font-family:'Segoe UI',Tahoma,sans-serif}
        @keyframes fadeIn{from{opacity:0}to{opacity:1}}
        @keyframes slideUp{from{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}
        @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}
        .animate-fade{animation:fadeIn 0.3s ease}
        .animate-slide{animation:slideUp 0.4s ease}
        .animate-pulse{animation:pulse 2s infinite}
    </style>
</head>
<body class="bg-gray-50">
<div id="root"></div>

<script>
// ========================================
// قاعدة البيانات الكاملة - 536 طالب
// ========================================
const DB={'T-001':{n:'عبدالله بن مطر بن مصلح العمري',v:'5334',r:'teacher'},'T-002':{n:'محمد بن عماري راضي الزهراني',v:'3006',r:'teacher'},'T-003':{n:'موفق مرزوق سويرح السحيمي',v:'6255',r:'teacher'},'T-004':{n:'فواز زايد لافي المهيمزي الرشيدي',v:'5367',r:'teacher'},'T-005':{n:'فيصل عطالله حويمد الصاعدي',v:'6374',r:'teacher'},'T-006':{n:'ابراهيم عياد عيد العلوي',v:'9561',r:'teacher'},'T-007':{n:'عبدالله حمود حامد الحربي',v:'1293',r:'teacher'},'T-008':{n:'ساير فيصل سعد الله العضيله المطيري',v:'9918',r:'teacher'},'T-009':{n:'طارق سعود حاجر الحربي',v:'8510',r:'teacher'},'T-010':{n:'نافع شعوي نافع المطيري',v:'9150',r:'teacher'},'T-011':{n:'اسامه منور مشعل العوفي',v:'3179',r:'teacher'},'T-012':{n:'محمد عياد عليثه العوفي',v:'4473',r:'teacher'},'T-013':{n:'أحمد حامد هلال الحربي',v:'1262',r:'teacher'},'T-014':{n:'نميان علي نميان الحربي',v:'9390',r:'teacher'},'T-015':{n:'عبدالله صلاح صالح الرحيلى',v:'8910',r:'teacher'},'T-016':{n:'مشعل بن هليل بن غالب العمري الحربي',v:'5186',r:'teacher'},'T-017':{n:'علي متعب ناصر العلوي الحربي',v:'1452',r:'teacher'},'T-018':{n:'سيف عبدالمنعم حمدان العارضي',v:'0336',r:'teacher'},'T-019':{n:'محمد بن ذعار بن صالح العوفي',v:'2900',r:'teacher'},'T-020':{n:'فؤاد بن محمد بن حماد العتيبي',v:'3214',r:'teacher'},'T-021':{n:'حمزة صدقة حمزة اسلام',v:'9602',r:'teacher'},'T-022':{n:'سلمان صالح أحمد الحارثي',v:'2242',r:'teacher'},'T-023':{n:'عبيد بن دخيل بن دويهيس العياضي الحربي',v:'5575',r:'teacher'},'T-024':{n:'عبدالعزيز مفلح نويعم الرويثي',v:'0462',r:'teacher'},'T-025':{n:'فيصل عواد محمد أبو سلمي',v:'2204',r:'teacher'},'T-026':{n:'عبدالله بن محمد بن سعيد ال بحران القرني',v:'4324',r:'teacher'},'T-027':{n:'كاتب مفلح سليمان الرشيدى',v:'1113',r:'teacher'},'T-028':{n:'حبيب علي نعيس العمري الحربي',v:'9973',r:'teacher'},'T-029':{n:'ابراهيم عايض عوض الجابري',v:'6414',r:'teacher'},'T-030':{n:'سلطان عويض معيض السحيمي',v:'2741',r:'teacher'},'T-031':{n:'عبدالهادي معيض معلا الشاماني',v:'9652',r:'teacher'},'T-032':{n:'عبدالعزيز عبدالرحمن غلاب المخلفي',v:'2417',r:'teacher'},'T-033':{n:'سعد طالع حمود الحربي',v:'1045',r:'teacher'},'T-034':{n:'ناهر مشعل عويد المطيري',v:'8665',r:'teacher'},'T-035':{n:'موسى غازي سفر الحربي',v:'1816',r:'teacher'},'T-036':{n:'موسى مسعود عايض الحيسوني',v:'4089',r:'teacher'},'T-037':{n:'نواف منصور عواد الصبحي',v:'4953',r:'teacher'},'T-038':{n:'بدر عبدالعزيز شائد السحيمي',v:'5195',r:'teacher'},'T-039':{n:'فهد عويض عوض الشاماني الحربي',v:'3268',r:'teacher'},'T-040':{n:'عبدالمجيد عايد خضران الرشيدي',v:'4403',r:'teacher'},'T-041':{n:'أحمد مطر سليمان الرشيدي',v:'9620',r:'teacher'},'S1-101':{n:'أحمد فواز بن سعدون الحربي',v:'3971',g:'first',s:'1'},'S1-102':{n:'أسامه سعود حاجر الحربي',v:'1762',g:'first',s:'1'},'S1-103':{n:'اسامه ماجد ضيف الله الزويكي',v:'9542',g:'first',s:'1'},'S1-104':{n:'باسم سيف بن عبيد الرويثي',v:'0975',g:'first',s:'1'},'S1-105':{n:'ثامر تركي النشمي الحربي',v:'5794',g:'first',s:'1'},'S1-106':{n:'ثامر رائد مرزوق المطيري',v:'0380',g:'first',s:'1'},'S1-107':{n:'حمد عبدالرحمن بن حمد الحربي',v:'7320',g:'first',s:'1'},'S1-108':{n:'ساير ثامر بن سائر العتيبي',v:'0325',g:'first',s:'1'},'S1-109':{n:'سعود عماد سعود الحازمي',v:'1959',g:'first',s:'1'},'S1-110':{n:'سلطان ساطي سمران الحربي',v:'2430',g:'first',s:'1'},'S1-111':{n:'سلطان فهد بن حاسن العمري',v:'0955',g:'first',s:'1'},'S1-112':{n:'عبدالاله عوض نويفع الزويكي',v:'9918',g:'first',s:'1'},'S1-113':{n:'عبدالرحمن خلوي بن نافع الحربي',v:'6210',g:'first',s:'1'},'S1-114':{n:'عبدالعزيز فهد عامر الغنام',v:'0130',g:'first',s:'1'},'S1-115':{n:'عبدالمجيد ربيع مرزوق العمري',v:'2391',g:'first',s:'1'},'S1-116':{n:'عساف بدر بشير الحربي',v:'5270',g:'first',s:'1'},'S1-117':{n:'عمر اسامه بن منور العوفي',v:'1216',g:'first',s:'1'},'S1-118':{n:'عمر منصور بن سعود الحربي',v:'0129',g:'first',s:'1'},'S1-119':{n:'فيصل فواز محمد الحربي',v:'6495',g:'first',s:'1'},'S1-120':{n:'محمد عبدالمجيد بشير الحربي',v:'1823',g:'first',s:'1'},'S1-121':{n:'مشاري عبدالله علي المطيري',v:'4831',g:'first',s:'1'},'S1-122':{n:'مصعب عبدالهادي بن مرزوق العمري',v:'9736',g:'first',s:'1'},'S1-123':{n:'نادر سعود بن حميد العمري',v:'0491',g:'first',s:'1'},'S1-124':{n:'نايف عيد حميد العمري',v:'6166',g:'first',s:'1'},'S1-125':{n:'هايل صالح عائض المطيري',v:'2154',g:'first',s:'1'},'S1-126':{n:'وسام جابر عيد الحربي',v:'4039',g:'first',s:'1'},'S1-127':{n:'وسام عبدالله حامد الحربي',v:'6866',g:'first',s:'1'},'S1-128':{n:'ياسر خالد معجل المطيري',v:'8808',g:'first',s:'1'},'S1-129':{n:'يزيد فواز خليوي المطيري',v:'2339',g:'first',s:'1'},'S1-130':{n:'يعقوب محمد عايد المطيري',v:'4662',g:'first',s:'1'},'S1-201':{n:'أسامه عبدالرحمن بن سعيد العوفي',v:'9589',g:'first',s:'2'},'S1-202':{n:'احمد حسين علوي حسين الحارثي',v:'9045',g:'first',s:'2'},'S1-203':{n:'البراء محمد عزيز العوفي',v:'7902',g:'first',s:'2'},'S1-204':{n:'بتال موسى عمار المطيري',v:'1812',g:'first',s:'2'},'S1-205':{n:'تركي محمد بن سالم الجهني',v:'2796',g:'first',s:'2'},'S1-206':{n:'حازم عبدالهادي بن سعد الحربي',v:'7983',g:'first',s:'2'},'S1-207':{n:'خالد عبدالرب عبد ربه الكحيلي',v:'1206',g:'first',s:'2'},'S1-208':{n:'خالد منصور بن مناور السحيمي',v:'0492',g:'first',s:'2'},'S1-209':{n:'ريان ماجد عيد الرشيدي',v:'0792',g:'first',s:'2'},'S1-210':{n:'زياد فؤاد محمد العتيبي',v:'8831',g:'first',s:'2'},'S1-211':{n:'سعد فهد مسعد العوفي',v:'0385',g:'first',s:'2'},'S1-212':{n:'سعود فيصل محمد الخريف',v:'4294',g:'first',s:'2'},'S1-213':{n:'سلطان ماجد بن معتاد المولد',v:'8941',g:'first',s:'2'},'S1-214':{n:'شامخ نادر سمار الحربي',v:'0471',g:'first',s:'2'},'S1-215':{n:'عادل محمد غازي الحربي',v:'2367',g:'first',s:'2'},'S1-216':{n:'عبدالرحمن عبدالعزيز بن النشمي الحربي',v:'8834',g:'first',s:'2'},'S1-217':{n:'عصام عبدالستار سالم العوفي',v:'3705',g:'first',s:'2'},'S1-218':{n:'عقاب محمد عايد المطيري',v:'4720',g:'first',s:'2'},'S1-219':{n:'عمر عبدالعزيز بن حباب الحربي',v:'6654',g:'first',s:'2'},'S1-220':{n:'عمر محمد مسلم الرائقي',v:'0667',g:'first',s:'2'},'S1-221':{n:'فهد صالح ربيع المطيري',v:'5653',g:'first',s:'2'},'S1-222':{n:'قصي ناصر عايض الحربي',v:'1364',g:'first',s:'2'},'S1-223':{n:'محمد علي محمد لبدان',v:'4464',g:'first',s:'2'},'S1-224':{n:'ناصر محمد قطيم البدراني',v:'9707',g:'first',s:'2'},'S1-225':{n:'نايف تركي مهل الحربي',v:'3949',g:'first',s:'2'},'S1-226':{n:'نواف مصلح فالح المطيري',v:'3346',g:'first',s:'2'},'S1-227':{n:'هذال فرحان هديبان الرشيدي',v:'1824',g:'first',s:'2'},'S1-228':{n:'وسام عبدالكريم عزيز العوفي',v:'9647',g:'first',s:'2'},'S1-229':{n:'يوسف ابراهيم بن محمد هوساوي',v:'0663',g:'first',s:'2'},'S1-230':{n:'يوسف بن بندر بن فهد بن زبن الرحيمي المطيري',v:'2720',g:'first',s:'2'},'S1-301':{n:'اسامه معيض ابن محمد المطيري',v:'8708',g:'first',s:'3'},'S1-302':{n:'اصيل رائد حمود الحربي',v:'6991',g:'first',s:'3'},'S1-303':{n:'ايمن بندر بن عايض الحربي',v:'6935',g:'first',s:'3'},'S1-304':{n:'بلال يحي محمد علي',v:'1079',g:'first',s:'3'},'S1-305':{n:'حازم سيف عايض الحربي',v:'0931',g:'first',s:'3'},'S1-306':{n:'خالد يوسف عوض المطيري',v:'1831',g:'first',s:'3'},'S1-307':{n:'رياض بن عبدالله بن صنت الحربي',v:'3261',g:'first',s:'3'},'S1-308':{n:'زياد فهد زياد المطيري',v:'6830',g:'first',s:'3'},'S1-309':{n:'سعود عبدالرحمن قبل المطيري',v:'3297',g:'first',s:'3'},'S1-310':{n:'سليمان عيد حامد السحيمي',v:'3023',g:'first',s:'3'},'S1-311':{n:'عادل سنيد بن عائض الجابري',v:'1341',g:'first',s:'3'},'S1-312':{n:'عبدالاله هيازع حجر البارقي',v:'9941',g:'first',s:'3'},'S1-313':{n:'عبدالرحمن صالح بن فرح المطيري',v:'6316',g:'first',s:'3'},'S1-314':{n:'عبدالرحمن محمد بن عيد العوفي',v:'1370',g:'first',s:'3'},'S1-315':{n:'عبدالعزيز مخلد عشق الحربي',v:'2628',g:'first',s:'3'},'S1-316':{n:'عبدالله زاعم مقبل العمري',v:'0675',g:'first',s:'3'},'S1-317':{n:'عبدالملك ابراهيم شلوه الشاماني',v:'2215',g:'first',s:'3'},'S1-318':{n:'عزام عيد عويد المطيري',v:'9229',g:'first',s:'3'},'S1-319':{n:'عزام عيسى بن نغيمش الحربي',v:'4732',g:'first',s:'3'},'S1-320':{n:'عصام عبدالمجيد بن اغويزي الحربي',v:'8164',g:'first',s:'3'},'S1-321':{n:'عمار احمد بن حمود الحربي',v:'0394',g:'first',s:'3'},'S1-322':{n:'عمر مالك دخيل الله المطيري',v:'9236',g:'first',s:'3'},'S1-323':{n:'عمر يحيى نشمي الحربي',v:'9895',g:'first',s:'3'},'S1-324':{n:'ماجد حزام غائث المطيري',v:'6811',g:'first',s:'3'},'S1-325':{n:'محمد غلام سخي عبدالحفيظ',v:'9427',g:'first',s:'3'},'S1-326':{n:'نواف مشعل متعب الحربي',v:'0667',g:'first',s:'3'},'S1-327':{n:'نواف نايف بن حمود الحربي',v:'7961',g:'first',s:'3'},'S1-328':{n:'وسام نواف بن عايض الرشيدى',v:'3075',g:'first',s:'3'},'S1-329':{n:'يوسف راشد بن عبدالله الصاعدي',v:'7066',g:'first',s:'3'},'S1-330':{n:'يوسف مدني عابد رحيم بخش',v:'8590',g:'first',s:'3'},'S1-401':{n:'أنس مالك عويض المطيري',v:'9255',g:'first',s:'4'},'S1-402':{n:'اصيل خالد فرح المطيري',v:'7312',g:'first',s:'4'},'S1-403':{n:'باسل عامر سفر المطيري',v:'4037',g:'first',s:'4'},'S1-404':{n:'جميل قاسم مجلي النمري',v:'0823',g:'first',s:'4'},'S1-405':{n:'خالد عيسى بن سالم الحربي',v:'9813',g:'first',s:'4'},'S1-406':{n:'راشد محمد خضران المطيري',v:'7470',g:'first',s:'4'},'S1-407':{n:'راشد نادر سعد المطيري',v:'6628',g:'first',s:'4'},'S1-408':{n:'رضا سعد عايد الرشيدي',v:'8779',g:'first',s:'4'},'S1-409':{n:'زياد محمد خلف الحربي',v:'2997',g:'first',s:'4'},'S1-410':{n:'سلطان عبدالله سالم السحيمي',v:'3367',g:'first',s:'4'},'S1-411':{n:'عاصم محمد بن سعود العوفي',v:'8802',g:'first',s:'4'},'S1-412':{n:'عالي ناصر بن معلا المطيري',v:'0775',g:'first',s:'4'},'S1-413':{n:'عبدالرحمن رشيد بن مرشود المطيري',v:'2628',g:'first',s:'4'},'S1-414':{n:'عبدالرحمن ماجد بن حضيض المطيري',v:'5631',g:'first',s:'4'},'S1-415':{n:'عبدالرحمن منصور ناصر الوسيدي',v:'1906',g:'first',s:'4'},'S1-416':{n:'عبدالرحمن نواف دحيم الرشيدي',v:'2184',g:'first',s:'4'},'S1-417':{n:'عبدالعزيز ثامر معلا المطيري',v:'1946',g:'first',s:'4'},'S1-418':{n:'عبدالله جهز سالم المطيري',v:'1626',g:'first',s:'4'},'S1-419':{n:'عبدالله حاتم بن عبيد السحيمي',v:'2031',g:'first',s:'4'},'S1-420':{n:'عبدالله خالد غالي الصاعدي',v:'7634',g:'first',s:'4'},'S1-421':{n:'عبدالملك فلاح عمر الذويبي',v:'7426',g:'first',s:'4'},'S1-422':{n:'علي سالم حمود الحايطي',v:'3174',g:'first',s:'4'},'S1-423':{n:'عوض محمد عوض المطيري',v:'6683',g:'first',s:'4'},'S1-424':{n:'فارس محمد بن حميد بن دخيل المحمادي',v:'1010',g:'first',s:'4'},'S1-425':{n:'قصي مجدي سلمان الحبيشي',v:'5910',g:'first',s:'4'},'S1-426':{n:'مالك ماجد مجدي السويسى',v:'6814',g:'first',s:'4'},'S1-427':{n:'محمد فهمي بن محسن المهري',v:'0606',g:'first',s:'4'},'S1-428':{n:'مساعد موسى بن مساعد السحيمي',v:'5780',g:'first',s:'4'},'S1-429':{n:'منذر عابد بن عايض الحربي',v:'2963',g:'first',s:'4'},'S1-430':{n:'وسام سعود بن نور السحيمي',v:'8669',g:'first',s:'4'},'S1-501':{n:'الياس يوسف عزيز العوفي',v:'9290',g:'first',s:'5'},'S1-502':{n:'باسل نايف عبلان المطيري',v:'0866',g:'first',s:'5'},'S1-503':{n:'ثامر مطير عائش الشاماني',v:'0620',g:'first',s:'5'},'S1-504':{n:'حاتم عبدالحكيم منصور سلام',v:'6533',g:'first',s:'5'},'S1-505':{n:'حاتم ماجد مريشيد المطيري',v:'1299',g:'first',s:'5'},'S1-506':{n:'حازم ماجد على مهدى',v:'4022',g:'first',s:'5'},'S1-507':{n:'حمزه صفوان عبدالعظيم قباني',v:'1788',g:'first',s:'5'},'S1-508':{n:'خالد عادل بن عزيز المولد',v:'3343',g:'first',s:'5'},'S1-509':{n:'خالد مخلد نور السحيمي',v:'7314',g:'first',s:'5'},'S1-510':{n:'طلال مخلد بن عوض العمري',v:'5246',g:'first',s:'5'},'S1-511':{n:'عبدألاله عمر ضيف الله العلوي',v:'8443',g:'first',s:'5'},'S1-512':{n:'عبدالعزيز محمد عبدالعزيز العتيبي',v:'0527',g:'first',s:'5'},'S1-513':{n:'عبدالله ابراهيم عقيل المحمدي',v:'6057',g:'first',s:'5'},'S1-514':{n:'عمر صديق محمد ابوالقاسم',v:'1839',g:'first',s:'5'},'S1-515':{n:'عمر عبدالرحمن بن هادي المطيري',v:'9049',g:'first',s:'5'},'S1-516':{n:'عمر فيصل علي العواجي',v:'0405',g:'first',s:'5'},'S1-517':{n:'فراس علي بن سالم الحيدري',v:'6798',g:'first',s:'5'},'S1-518':{n:'فهد موسى بن ثابت المهيمزي رشيدي',v:'8004',g:'first',s:'5'},'S1-519':{n:'مؤيد ابراهيم بن عيد الذيابي الرشيدي',v:'8463',g:'first',s:'5'},'S1-520':{n:'مازن خالد عوض العوفي',v:'2874',g:'first',s:'5'},'S1-521':{n:'محمد احمد ضيف الله الصاعدي',v:'8902',g:'first',s:'5'},'S1-522':{n:'محمد رابح بن حطيحط الحربي',v:'1235',g:'first',s:'5'},'S1-523':{n:'محمد علي بن رزقان الشاماني',v:'9288',g:'first',s:'5'},'S1-524':{n:'نواف سند مغيث المطيري',v:'7641',g:'first',s:'5'},'S1-525':{n:'نواف فيصل غلاب المطيري',v:'1734',g:'first',s:'5'},'S1-526':{n:'وسام عبدالله سعد الحربي',v:'2461',g:'first',s:'5'},'S1-527':{n:'وليد مدني محمد امين عبدالودود',v:'4545',g:'first',s:'5'},'S1-528':{n:'يامن عبدالرحمن محمد الحربي',v:'7902',g:'first',s:'5'},'S1-529':{n:'يزيد عبدالمجيد بعيجان الحربي',v:'3772',g:'first',s:'5'},'S1-530':{n:'يوسف سليمان سمير الحربي',v:'2355',g:'first',s:'5'},'S1-601':{n:'أحمد عبدالعزيز حمود المطيري',v:'5280',g:'first',s:'6'},'S1-602':{n:'أوس سليمان ابراهيم العوفي',v:'6192',g:'first',s:'6'},'S1-603':{n:'اصيل بندر ماطر الحربي',v:'6626',g:'first',s:'6'},'S1-604':{n:'الوليد فواز عواد الرشيدي',v:'3159',g:'first',s:'6'},'S1-605':{n:'اياد عبداللطيف عويض الحربي',v:'7100',g:'first',s:'6'},'S1-606':{n:'تركي فالح بن مرزوق المطيري',v:'8082',g:'first',s:'6'},'S1-607':{n:'جهاد صالح بن عتقان المطيري',v:'3033',g:'first',s:'6'},'S1-608':{n:'حسن شجاع مطلع المطيري',v:'1942',g:'first',s:'6'},'S1-609':{n:'حسن مروان بن حسن القرني',v:'8178',g:'first',s:'6'},'S1-610':{n:'حفظ الله مهيوب حفظ الله المشرقي',v:'2622',g:'first',s:'6'},'S1-611':{n:'سعدي عمر بن سعدي السحيمي',v:'5721',g:'first',s:'6'},'S1-612':{n:'سعود فهد نائف الحربي',v:'1476',g:'first',s:'6'},'S1-613':{n:'طارق بشير رزيق السهلي',v:'7139',g:'first',s:'6'},'S1-614':{n:'عالي عبدالعزيز عالي المطيري',v:'8829',g:'first',s:'6'},'S1-615':{n:'عبدالعزيز احمد محمد المطيري',v:'2091',g:'first',s:'6'},'S1-616':{n:'عبدالعزيز فهد عوض العوفي',v:'1792',g:'first',s:'6'},'S1-617':{n:'عبدالعزيز ماجد عبدالله العمري',v:'4828',g:'first',s:'6'},'S1-618':{n:'عبدالملك عبدالله صالح الحربي',v:'0272',g:'first',s:'6'},'S1-619':{n:'عزام متعب ماطر الحربي',v:'1323',g:'first',s:'6'},'S1-620':{n:'عماد عمر ضيف الله العلوي',v:'1030',g:'first',s:'6'},'S1-621':{n:'عمار علي عبدالله صالح',v:'8833',g:'first',s:'6'},'S1-622':{n:'فارس فيصل بن عبدالرحمن الحيسوني',v:'8662',g:'first',s:'6'},'S1-623':{n:'فايز بن محمد بن فرح بن نحيان',v:'0844',g:'first',s:'6'},'S1-624':{n:'ماجد رباح مرزوق المطيري',v:'3627',g:'first',s:'6'},'S1-625':{n:'محسن فهد بن محسن السراني',v:'2807',g:'first',s:'6'},'S1-626':{n:'محمد عبدالله غنام المطيري',v:'0358',g:'first',s:'6'},'S1-627':{n:'نواف ياسر سعود المطيري',v:'8557',g:'first',s:'6'},'S1-628':{n:'وسام عادل عزيز الحربي',v:'3432',g:'first',s:'6'},'S1-629':{n:'وسام يوسف نور الحربي',v:'8284',g:'first',s:'6'},'S1-630':{n:'يوسف عذال عبدالمحي الصاعدي',v:'7140',g:'first',s:'6'},'S2-101':{n:'أحمد دعيج عويض المطيري',v:'1976',g:'second',s:'1'},'S2-102':{n:'باسل حامد بن حضيرم الجابري',v:'7345',g:'second',s:'1'},'S2-103':{n:'بدر الحميدي بن حليوان الحربي',v:'9432',g:'second',s:'1'},'S2-104':{n:'تركي نشمي دخيل الحربي',v:'2054',g:'second',s:'1'},'S2-105':{n:'ثامر صقر عزيز العوفي',v:'0767',g:'second',s:'1'},'S2-106':{n:'زياد سعد بن مزيد الحنيني',v:'0759',g:'second',s:'1'},'S2-107':{n:'سرور فهد بن سرور العوفي',v:'9450',g:'second',s:'1'},'S2-108':{n:'سعد عبدالرحمن بن سعد الحربي',v:'2680',g:'second',s:'1'},'S2-109':{n:'سلطان نادر بدير المطيري',v:'5293',g:'second',s:'1'},'S2-110':{n:'طلال نواف نشمي الحربي',v:'7736',g:'second',s:'1'},'S2-111':{n:'عادل محمد ذعار العوفي',v:'9614',g:'second',s:'1'},'S2-112':{n:'عبد الكريم محمد عبد القوي علي',v:'9301',g:'second',s:'1'},'S2-113':{n:'عبدالرحمن عبدالله بن عسكر الجابري',v:'2594',g:'second',s:'1'},'S2-114':{n:'عبدالعزيز فهد صالح السراني',v:'6780',g:'second',s:'1'},'S2-115':{n:'عبدالله فواز منديل المطيري',v:'5752',g:'second',s:'1'},'S2-116':{n:'عدي سطام سهل العتيبي',v:'0824',g:'second',s:'1'},'S2-117':{n:'عزام مسلم خليفه الرشيدي',v:'5201',g:'second',s:'1'},'S2-118':{n:'عمر عبدالهادي ابراهيم المحضار',v:'6268',g:'second',s:'1'},'S2-119':{n:'فيصل عبدالعزيز بن مفلح الرويثي',v:'7356',g:'second',s:'1'},'S2-120':{n:'ماجد نشمي بن شويهين الحربي',v:'5407',g:'second',s:'1'},'S2-121':{n:'محمد وجدي بن محمدحبيب عبدالله',v:'5875',g:'second',s:'1'},'S2-122':{n:'مشعل بن فهد بن مسعد العوفي',v:'9874',g:'second',s:'1'},'S2-123':{n:'معاذ طلال مسفر العوفي',v:'8605',g:'second',s:'1'},'S2-124':{n:'مويد وليد زهيميل المطيري',v:'7892',g:'second',s:'1'},'S2-125':{n:'نايف شلوه عيد العمري',v:'3442',g:'second',s:'1'},'S2-126':{n:'نايف عبدالرحمن بن ضيف الله الجابري',v:'3975',g:'second',s:'1'},'S2-127':{n:'نواف سمران طماح الرشيدي',v:'4169',g:'second',s:'1'},'S2-128':{n:'هتان محمد سماح الحربي',v:'8905',g:'second',s:'1'},'S2-129':{n:'وسام محمد عائض المطيري',v:'4905',g:'second',s:'1'},'S2-130':{n:'يوسف ثامر منزل الرويلي',v:'6098',g:'second',s:'1'},'S2-201':{n:'أنس محمد مثري الرشيدي',v:'2518',g:'second',s:'2'},'S2-202':{n:'احمد صلاح عبدالعزيز اباالخيل',v:'2773',g:'second',s:'2'},'S2-203':{n:'اسامه عبدالرحمن بن سعد الحربي',v:'3761',g:'second',s:'2'},'S2-204':{n:'بدر محمد ظافر الشهري',v:'6471',g:'second',s:'2'},'S2-205':{n:'جاسر خالد رشيدان الحربي',v:'7751',g:'second',s:'2'},'S2-206':{n:'جاسم تركي بن شريد المطيري',v:'8774',g:'second',s:'2'},'S2-207':{n:'حامد احمد حامد الحربي',v:'9057',g:'second',s:'2'},'S2-208':{n:'حسام عبدالرحمن شلوه الشاماني',v:'6605',g:'second',s:'2'},'S2-209':{n:'زياد ناصر مطلق الحربي',v:'3214',g:'second',s:'2'},'S2-210':{n:'سلطان عبدالرحمن سمير الحربي',v:'5555',g:'second',s:'2'},'S2-211':{n:'سلطان مناور بن سمار الحربي',v:'8128',g:'second',s:'2'},'S2-212':{n:'سيف فهد سعود العجمي',v:'7789',g:'second',s:'2'},'S2-213':{n:'عبدالرحمن حمود بن سريحان المطيري',v:'4731',g:'second',s:'2'},'S2-214':{n:'عبدالعزيز عامر عويض المطيري',v:'4106',g:'second',s:'2'},'S2-215':{n:'عبدالله سيف عايد الرشيدي',v:'5384',g:'second',s:'2'},'S2-216':{n:'عبدالله متعب بجاد العمري',v:'6166',g:'second',s:'2'},'S2-217':{n:'عمر حاتم ابراهيم حامد',v:'1854',g:'second',s:'2'},'S2-218':{n:'فهد صالح سعد الرشيدي',v:'2731',g:'second',s:'2'},'S2-219':{n:'محمد سلطان بن سمير الحربي',v:'0627',g:'second',s:'2'},'S2-220':{n:'محمد عبدالرحمن مصري الحربي',v:'2724',g:'second',s:'2'},'S2-221':{n:'محمد فايز بن صالح المطيري',v:'0133',g:'second',s:'2'},'S2-222':{n:'مروان محمد شريد المطيري',v:'2543',g:'second',s:'2'},'S2-223':{n:'مشاري حمد عايض العمري',v:'8286',g:'second',s:'2'},'S2-224':{n:'مشعل ابن عيد بن نغيمش المهيمزي الرشيدي',v:'4893',g:'second',s:'2'},'S2-225':{n:'معاذ ماجد جازي الحربي',v:'4446',g:'second',s:'2'},'S2-226':{n:'معوض ايمن بن معوض المحياوي',v:'9729',g:'second',s:'2'},'S2-227':{n:'نايف تركي عاقل المطيري',v:'0996',g:'second',s:'2'},'S2-228':{n:'نواف شري ثويبت المطيري',v:'5679',g:'second',s:'2'},'S2-229':{n:'وليد سعد دحيم الرشيدي',v:'7210',g:'second',s:'2'},'S2-230':{n:'يزيد مطلق بن شباب الحربي',v:'3556',g:'second',s:'2'},'S2-301':{n:'ابراهيم عادل بن محمد شيحه',v:'5586',g:'second',s:'3'},'S2-302':{n:'باسم محمد بن موسى مروعي',v:'1197',g:'second',s:'3'},'S2-303':{n:'جاسر شاهر عاتق المطيري',v:'5827',g:'second',s:'3'},'S2-304':{n:'حاتم مقرن سلطان الحربي',v:'4568',g:'second',s:'3'},'S2-305':{n:'خالد بندر بشير الحربي',v:'0527',g:'second',s:'3'},'S2-306':{n:'داوود سليمان - حسين',v:'8453',g:'second',s:'3'},'S2-307':{n:'راشد حجاج حجيج المطيري',v:'5295',g:'second',s:'3'},'S2-308':{n:'راكان سند عتيق المطيري',v:'4073',g:'second',s:'3'},'S2-309':{n:'ريان شقير سليمان المطيري',v:'6782',g:'second',s:'3'},'S2-310':{n:'زيد خالد محمد الحبيشي',v:'2436',g:'second',s:'3'},'S2-311':{n:'سيف عبدالرحيم عياد الجهني',v:'0744',g:'second',s:'3'},'S2-312':{n:'طلال محمد عتقان المطيري',v:'1181',g:'second',s:'3'},'S2-313':{n:'عامر ناصر علوش الحربي',v:'2821',g:'second',s:'3'},'S2-314':{n:'عساف عايض بن عوض العمري',v:'6706',g:'second',s:'3'},'S2-315':{n:'عمر عبدالله حمد المطيري',v:'6608',g:'second',s:'3'},'S2-316':{n:'عيسى مرزوق سويرح السحيمي',v:'9696',g:'second',s:'3'},'S2-317':{n:'غياث احمد عبدالقادر العلوان',v:'1870',g:'second',s:'3'},'S2-318':{n:'فيصل مشعان مقحم العمري',v:'4299',g:'second',s:'3'},'S2-319':{n:'متعب بن سلطان بن متعب العوفي',v:'7034',g:'second',s:'3'},'S2-320':{n:'محمد سعود بن نور السحيمي',v:'9710',g:'second',s:'3'},'S2-321':{n:'محمد عهد بن محمد الحربي',v:'4522',g:'second',s:'3'},'S2-322':{n:'مروان رشدان علي الحربي',v:'8353',g:'second',s:'3'},'S2-323':{n:'مشاري منصور عائض المطيري',v:'3109',g:'second',s:'3'},'S2-324':{n:'منير مشاري منير الحربي',v:'2101',g:'second',s:'3'},'S2-325':{n:'نادر بن شافي بن سعود السهلي',v:'8966',g:'second',s:'3'},'S2-326':{n:'نايف حمود عويض المطيري',v:'6511',g:'second',s:'3'},'S2-327':{n:'نواف فيصل بن ناير الحربي',v:'4436',g:'second',s:'3'},'S2-328':{n:'وسيم محمد سامي شاكر',v:'9655',g:'second',s:'3'},'S2-329':{n:'يامن فواز حمود الحربي',v:'7778',g:'second',s:'3'},'S2-330':{n:'يوسف قاسم بن مصلح السحيمي',v:'9353',g:'second',s:'3'},'S2-401':{n:'الوليد لافي حامد السهلي',v:'1514',g:'second',s:'4'},'S2-402':{n:'انس نايف بن محمد العوفي',v:'8437',g:'second',s:'4'},'S2-403':{n:'بسام ماجد عبدالله الرشيدي',v:'2838',g:'second',s:'4'},'S2-404':{n:'حاتم منصور بن مناور السحيمي',v:'9706',g:'second',s:'4'},'S2-405':{n:'حسام بن عبدالله بن غويزي الجعفري المطيري',v:'0150',g:'second',s:'4'},'S2-406':{n:'ريان يوسف مصلح العوفي',v:'9936',g:'second',s:'4'},'S2-407':{n:'سعود محمد بن عيد العوفي',v:'0705',g:'second',s:'4'},'S2-408':{n:'سلطان موسى مسعود الحربي',v:'0593',g:'second',s:'4'},'S2-409':{n:'صالح يحي محمد حطاب',v:'7808',g:'second',s:'4'},'S2-410':{n:'طلال ماجد عيد الرشيدي',v:'0719',g:'second',s:'4'},'S2-411':{n:'عبدالرحمن بن سعد بن صنت المطيري',v:'9282',g:'second',s:'4'},'S2-412':{n:'عبدالرحمن سلطان بن عواده المطيري',v:'5903',g:'second',s:'4'},'S2-413':{n:'عبدالله ابراهيم عيد الرشيدي',v:'3307',g:'second',s:'4'},'S2-414':{n:'عبدالله ساطي فيحان الحربي',v:'7413',g:'second',s:'4'},'S2-415':{n:'عبدالله عبدالكريم سلمان المطيري',v:'3013',g:'second',s:'4'},'S2-416':{n:'عبدالله محمد بن عثمان الحربي',v:'8216',g:'second',s:'4'},'S2-417':{n:'عزام محمد قطيم الحربي',v:'8857',g:'second',s:'4'},'S2-418':{n:'عمر بدر سليم العوفي',v:'3477',g:'second',s:'4'},'S2-419':{n:'فيصل ساير بن فيصل المطيري',v:'3467',g:'second',s:'4'},'S2-420':{n:'مازن عادل عتقان المطيري',v:'8784',g:'second',s:'4'},'S2-421':{n:'مالك بن عمر بن ناشي الجهني',v:'9762',g:'second',s:'4'},'S2-422':{n:'مجاهد عبدالكريم نايف المطيري',v:'2048',g:'second',s:'4'},'S2-423':{n:'محمد خليف بن حييان الصاعدي',v:'5977',g:'second',s:'4'},'S2-424':{n:'محمد عاصم سالم الوهاشي',v:'1038',g:'second',s:'4'},'S2-425':{n:'منصور شرار عزيز العنزي',v:'6207',g:'second',s:'4'},'S2-426':{n:'مهند سلطان ميشع المطيري',v:'5218',g:'second',s:'4'},'S2-427':{n:'نايف فهد بن هليل الجهني',v:'3491',g:'second',s:'4'},'S2-428':{n:'يزيد عيسى سعد المطيري',v:'1235',g:'second',s:'4'},'S2-429':{n:'يوسف محمد فريج بن حمد',v:'0219',g:'second',s:'4'},'S2-501':{n:'أنس عبدالكريم محيسن الحسيني',v:'5608',g:'second',s:'5'},'S2-502':{n:'احمد            محضار           احمد            مول الدويله',v:'9110',g:'second',s:'5'},'S2-503':{n:'اسامه ذعار بن سالم الحربي',v:'1356',g:'second',s:'5'},'S2-504':{n:'اسامه محمد ابراهيم علي ابو الحياء',v:'7675',g:'second',s:'5'},'S2-505':{n:'اياد حسن محمد العمري',v:'9489',g:'second',s:'5'},'S2-506':{n:'اياد عبدالله صلاح الرحيلي',v:'9997',g:'second',s:'5'},'S2-507':{n:'باسم سليمان - كرم حسين',v:'2082',g:'second',s:'5'},'S2-508':{n:'بندر احمد رجب الزهراني',v:'4259',g:'second',s:'5'},'S2-509':{n:'تميم عبدالله سطام الحربي',v:'6728',g:'second',s:'5'},'S2-510':{n:'توفيق عايض حمدان الحربي',v:'2012',g:'second',s:'5'},'S2-511':{n:'حسام بدر علي الحربي',v:'1295',g:'second',s:'5'},'S2-512':{n:'ريان بن طلال بن فهد المعدوي العوفي',v:'6028',g:'second',s:'5'},'S2-513':{n:'ساري عبدالرحمن شعوان الحيسوني',v:'1213',g:'second',s:'5'},'S2-514':{n:'سامي كايد معزي الصاعدي',v:'1323',g:'second',s:'5'},'S2-515':{n:'سعود عيسى مطلق المطيري',v:'8866',g:'second',s:'5'},'S2-516':{n:'سلطان منصور بن صيفي العمري',v:'7096',g:'second',s:'5'},'S2-517':{n:'سليمان حامد سريحان المطيري',v:'6214',g:'second',s:'5'},'S2-518':{n:'عبدالرحمن عبدالعزيز بن محسن الحارثي',v:'5561',g:'second',s:'5'},'S2-519':{n:'عبدالغني عبدالقادر مصطفى ماهر',v:'9856',g:'second',s:'5'},'S2-520':{n:'عزام عمران بن ابراهيم فلاته',v:'0560',g:'second',s:'5'},'S2-521':{n:'عمر محمد بن ابراهيم فلاته',v:'8984',g:'second',s:'5'},'S2-522':{n:'عوض قاسم مجلي النمري',v:'9390',g:'second',s:'5'},'S2-523':{n:'محمد باسم محمد المطيري',v:'5967',g:'second',s:'5'},'S2-524':{n:'محمد يوسف عويد المطيري',v:'9326',g:'second',s:'5'},'S2-525':{n:'نايف عبدالله شباب الرويثي',v:'5189',g:'second',s:'5'},'S2-526':{n:'نواف ماجد عبدالله الحربي',v:'6051',g:'second',s:'5'},'S2-527':{n:'ياسر منصور محيا المطيري',v:'2587',g:'second',s:'5'},'S2-528':{n:'يزيد عمران عميره المرعشي',v:'2012',g:'second',s:'5'},'S2-601':{n:'أنس سلمي بن سعد العوفي',v:'8068',g:'second',s:'6'},'S2-602':{n:'ابراهيم سعود مرشد الحربي',v:'5827',g:'second',s:'6'},'S2-603':{n:'الهادي محي الدين الهادي محمد',v:'9756',g:'second',s:'6'},'S2-604':{n:'الوليد عبدالرحمن حماد الرشيدي',v:'2249',g:'second',s:'6'},'S2-605':{n:'اياد نادر سعدي السحيمي',v:'3958',g:'second',s:'6'},'S2-606':{n:'باسل عيد بن عبدالله العنزي',v:'0918',g:'second',s:'6'},'S2-607':{n:'باسم بدر عواض السحيمي',v:'1969',g:'second',s:'6'},'S2-608':{n:'تميم عبدالسلام ابن عبدالله رحمةالله',v:'4378',g:'second',s:'6'},'S2-609':{n:'حازم مساعد بن جازي العوفي',v:'8369',g:'second',s:'6'},'S2-610':{n:'حسام رائد مرزوق المطيري',v:'8043',g:'second',s:'6'},'S2-611':{n:'حسام فهد معيض المطيري',v:'6572',g:'second',s:'6'},'S2-612':{n:'خالد طلال عطاالله السهلي',v:'9488',g:'second',s:'6'},'S2-613':{n:'خالد محمد عواض الرشيدي',v:'5453',g:'second',s:'6'},'S2-614':{n:'راكان صالح بن منهض المطيري',v:'7258',g:'second',s:'6'},'S2-615':{n:'راكان عيسى نويفع الشاماني',v:'7925',g:'second',s:'6'},'S2-616':{n:'ريان سلطان ابن محارب الحربي',v:'4261',g:'second',s:'6'},'S2-617':{n:'سعود ثواب هلال المطيري',v:'3180',g:'second',s:'6'},'S2-618':{n:'سلطان عبدالعزيز عايض الرشيدي',v:'4521',g:'second',s:'6'},'S2-619':{n:'ضاري مشاري فايح المطيري',v:'7299',g:'second',s:'6'},'S2-620':{n:'عبدالرحمن عبدالسلام بن عبدالهادي التمبكتي',v:'1770',g:'second',s:'6'},'S2-621':{n:'عبدالمحسن خالد بن حميد الحميد',v:'7285',g:'second',s:'6'},'S2-622':{n:'فيصل تركي سطام الحربي',v:'4925',g:'second',s:'6'},'S2-623':{n:'محمد احمد محمد المطيري',v:'1224',g:'second',s:'6'},'S2-624':{n:'محمد سلطان بن مطلع المطيري',v:'9402',g:'second',s:'6'},'S2-625':{n:'محمد سلمان ابراهيم العوفي',v:'5484',g:'second',s:'6'},'S2-626':{n:'نايف عبدالهادي بن عبدالكريم الحربي',v:'2547',g:'second',s:'6'},'S2-627':{n:'وليد خالد مخلد العمري',v:'5847',g:'second',s:'6'},'S2-628':{n:'ياسر عبدالله مسفر الاحمدي',v:'1717',g:'second',s:'6'},'S2-629':{n:'يزن عبدالمحسن بن خلف المطيري',v:'3326',g:'second',s:'6'},'S3-101':{n:'أحمد عبدالعزيز شداد الحيسوني',v:'5849',g:'third',s:'1'},'S3-102':{n:'أصيل عبدالهادي بن سكات الرشيدي',v:'5586',g:'third',s:'1'},'S3-103':{n:'انس مسير مطلق المطيري',v:'7453',g:'third',s:'1'},'S3-104':{n:'تركي فهد بن مرزوق السحيمي',v:'8130',g:'third',s:'1'},'S3-105':{n:'حاتم احمد حميد الرشيدي',v:'2296',g:'third',s:'1'},'S3-106':{n:'خالد وليد زهيميل المطيري',v:'1296',g:'third',s:'1'},'S3-107':{n:'رائد ابراهيم بن عتقان المطيري',v:'4170',g:'third',s:'1'},'S3-108':{n:'رائد فواز هندي الرشيدي',v:'7539',g:'third',s:'1'},'S3-109':{n:'رامي ماجد صقر الحربي',v:'2852',g:'third',s:'1'},'S3-110':{n:'ريان عبيدالله صقر الحربي',v:'7106',g:'third',s:'1'},'S3-111':{n:'زياد محمد سفر المطيري',v:'1529',g:'third',s:'1'},'S3-112':{n:'سعود فهد سعود العجمي',v:'0666',g:'third',s:'1'},'S3-113':{n:'سلمان ملفي بن محمد المطيري',v:'4139',g:'third',s:'1'},'S3-114':{n:'عادل محمد بدري المطيري',v:'5558',g:'third',s:'1'},'S3-115':{n:'عبدالرحيم فايز بن نفاع الجابري',v:'6145',g:'third',s:'1'},'S3-116':{n:'عبدالكريم مسعود قباس المطيري',v:'9359',g:'third',s:'1'},'S3-117':{n:'عبدالله مشاري عبدالله العوفي',v:'4660',g:'third',s:'1'},'S3-118':{n:'عبدالمجيد ماجد غلاب الرشيدي',v:'4996',g:'third',s:'1'},'S3-119':{n:'علي الحاج الكرار محمد',v:'4549',g:'third',s:'1'},'S3-120':{n:'عمر عارف راشد المطيري',v:'5821',g:'third',s:'1'},'S3-121':{n:'عمرو عبدالعزيز عبدالحفيظ حاجي كريم جان',v:'3710',g:'third',s:'1'},'S3-122':{n:'فهد غازي سعود المطيري',v:'8501',g:'third',s:'1'},'S3-123':{n:'فواز عبدالسلام ناصر الرشيدى',v:'3635',g:'third',s:'1'},'S3-124':{n:'مالك جميل أحمد عبده قائد',v:'9040',g:'third',s:'1'},'S3-125':{n:'محمد إبراهيم عيسى الهوسة',v:'4472',g:'third',s:'1'},'S3-126':{n:'محمد عثمان بن ملحان العوفي',v:'2725',g:'third',s:'1'},'S3-127':{n:'محمد ماجد بن غالي الحسيني',v:'4294',g:'third',s:'1'},'S3-128':{n:'معاذ عبدالله خضران الرشيدي',v:'2731',g:'third',s:'1'},'S3-129':{n:'نبيل علي بن محمدنبيل تاج الدين',v:'0544',g:'third',s:'1'},'S3-130':{n:'يوسف عبدالكريم محيسن الحسيني',v:'3030',g:'third',s:'1'},'S3-201':{n:'أنس يعقوب عويد المطيري',v:'8419',g:'third',s:'2'},'S3-202':{n:'ابراهيم سطام ابراهيم الحربي',v:'3790',g:'third',s:'2'},'S3-203':{n:'باسم حميد محمد الحربي',v:'1490',g:'third',s:'2'},'S3-204':{n:'تركي مشعل عائض الحربي',v:'1644',g:'third',s:'2'},'S3-205':{n:'جاسر خالد فرح المطيري',v:'7500',g:'third',s:'2'},'S3-206':{n:'حمزه محمد عبدالفتاح قاسم',v:'7269',g:'third',s:'2'},'S3-207':{n:'ريان سامي بن دحيم السحيمي',v:'9323',g:'third',s:'2'},'S3-208':{n:'سهل سطام بن سهل العتيبي',v:'5643',g:'third',s:'2'},'S3-209':{n:'عاصم عبيد بطيحان العمري',v:'1297',g:'third',s:'2'},'S3-210':{n:'عبدالجليل عبدالكريم عبدالله الجابري',v:'1686',g:'third',s:'2'},'S3-211':{n:'عبدالرحمن عبدالله بن ملحان العوفي',v:'7851',g:'third',s:'2'},'S3-212':{n:'عبدالعزيز عبدالله سليمان الشريف',v:'4608',g:'third',s:'2'},'S3-213':{n:'عبدالعزيز ناصر علوش الحربي',v:'3616',g:'third',s:'2'},'S3-214':{n:'عبدالمجيد مسلط عواده المطيري',v:'5291',g:'third',s:'2'},'S3-215':{n:'عصام فرحان بن حامد المطيري',v:'8009',g:'third',s:'2'},'S3-216':{n:'عمار حمود بن سريحان المطيري',v:'9421',g:'third',s:'2'},'S3-217':{n:'عيسي محمد بن مرزوق الحربي',v:'5211',g:'third',s:'2'},'S3-218':{n:'فواز عبدالله دويلان السناح المطيري',v:'4743',g:'third',s:'2'},'S3-219':{n:'فيصل عبدالرحمن عويض الحربي',v:'1614',g:'third',s:'2'},'S3-220':{n:'ماهر سلطان بن ضيف الله الجابري',v:'1374',g:'third',s:'2'},'S3-221':{n:'مجدي مطلق محمد المطيري',v:'7364',g:'third',s:'2'},'S3-222':{n:'محمد تركي بن عبدالله الحربي',v:'8262',g:'third',s:'2'},'S3-223':{n:'محمد محياء بن عواضه المطيري',v:'0547',g:'third',s:'2'},'S3-224':{n:'مروان خالد عوض العوفي',v:'8612',g:'third',s:'2'},'S3-225':{n:'مهند عبدالله بن غلاب السهلي',v:'4044',g:'third',s:'2'},'S3-226':{n:'نواف فواز هليل الحربي',v:'7674',g:'third',s:'2'},'S3-227':{n:'هشام بندر بن فرح المطيري',v:'4448',g:'third',s:'2'},'S3-228':{n:'وسيم عبدالله عيد العمري',v:'1963',g:'third',s:'2'},'S3-229':{n:'وليد مجدي بن احمد محبت',v:'9665',g:'third',s:'2'},'S3-230':{n:'يزيد حمد بن نفاع الحربي',v:'5371',g:'third',s:'2'},'S3-301':{n:'ابراهيم حامد الحميدي الجابري',v:'5059',g:'third',s:'3'},'S3-302':{n:'حازم معيش معيض العلوي',v:'2897',g:'third',s:'3'},'S3-303':{n:'خالد عبدالله بن حسن المطيري',v:'5283',g:'third',s:'3'},'S3-304':{n:'راكان محمد بن غرمان العمري',v:'3517',g:'third',s:'3'},'S3-305':{n:'ريان عيسى نويفع الشاماني',v:'3280',g:'third',s:'3'},'S3-306':{n:'زين العابدين أحمد عا بد عابد حسين',v:'9487',g:'third',s:'3'},'S3-307':{n:'سلطان خلوي بن نافع الحربي',v:'7025',g:'third',s:'3'},'S3-308':{n:'صالح عناد عويض المطيري',v:'4151',g:'third',s:'3'},'S3-309':{n:'عبدالعزيز حاتم محمد العتيبي',v:'4379',g:'third',s:'3'},'S3-310':{n:'عبدالملك محمد رزيق السهلي',v:'7051',g:'third',s:'3'},'S3-311':{n:'عثمان خالد مزيد العمري',v:'9814',g:'third',s:'3'},'S3-312':{n:'عزام حمدي بن مزيد العمري',v:'7201',g:'third',s:'3'},'S3-313':{n:'عماد فهد بن صالح الرشيدي',v:'2068',g:'third',s:'3'},'S3-314':{n:'عمر حجاج بن سمار الحربي',v:'5634',g:'third',s:'3'},'S3-315':{n:'فهد محمد مسلط المطيري',v:'6771',g:'third',s:'3'},'S3-316':{n:'فيصل ابن محمد بن كامل بن محمد الذيابي الرشيدي',v:'8380',g:'third',s:'3'},'S3-317':{n:'ماجد فريح فرحان السحيمي',v:'8576',g:'third',s:'3'},'S3-318':{n:'محمد خالد بن عائض السحيمي',v:'1494',g:'third',s:'3'},'S3-319':{n:'محمد خلف نافع الحربي',v:'3923',g:'third',s:'3'},'S3-320':{n:'محمد عبدالرحمن مريبد الحربي',v:'3381',g:'third',s:'3'},'S3-321':{n:'محمد عيسى بن شباب المطيري',v:'6841',g:'third',s:'3'},'S3-322':{n:'مشاري احمد بن فرح المطيري',v:'9176',g:'third',s:'3'},'S3-323':{n:'مطر علي بن صلبي العوفي',v:'0295',g:'third',s:'3'},'S3-324':{n:'معاذ عبدالله ابن غرم الله الزهراني',v:'5909',g:'third',s:'3'},'S3-325':{n:'معاذ مسري بن عطاالله العمري',v:'8205',g:'third',s:'3'},'S3-326':{n:'معتز بن عبدالرحمن بن مناور العمري',v:'2505',g:'third',s:'3'},'S3-327':{n:'معن أحمد محمد الجابري',v:'2600',g:'third',s:'3'},'S3-328':{n:'نادر عبدالأله بن عبدالله العمري',v:'5907',g:'third',s:'3'},'S3-329':{n:'نايف علي نفيع الحربي',v:'9454',g:'third',s:'3'},'S3-330':{n:'يوسف ياسر بن فيحان العتيبي',v:'7874',g:'third',s:'3'},'S3-401':{n:'أحمد خالد بن لافي الحربي',v:'9511',g:'third',s:'4'},'S3-402':{n:'أحمد سعود بن نور السحيمي',v:'8068',g:'third',s:'4'},'S3-403':{n:'ابراهيم عيسى بن عويد المطيري',v:'6797',g:'third',s:'4'},'S3-404':{n:'احمد عبدالرحمن محمد الحازمي',v:'9837',g:'third',s:'4'},'S3-405':{n:'احمد عبدالقادر  محمد',v:'6122',g:'third',s:'4'},'S3-406':{n:'اسامه ناصر سعيد القحطاني',v:'5330',g:'third',s:'4'},'S3-407':{n:'البراء نواف سياف النحياني',v:'2597',g:'third',s:'4'},'S3-408':{n:'اياد سعود بن منور الحربي',v:'8712',g:'third',s:'4'},'S3-409':{n:'باسل احمد عياد المطيري',v:'4871',g:'third',s:'4'},'S3-410':{n:'باسل عبدالمحسن ابن طائع المطيري',v:'5998',g:'third',s:'4'},'S3-411':{n:'بندر محمد بن فارس التوم',v:'9992',g:'third',s:'4'},'S3-412':{n:'جاسم نهار محمد الرشيدي',v:'0108',g:'third',s:'4'},'S3-413':{n:'حسان تركي النشمي الحربي',v:'8418',g:'third',s:'4'},'S3-414':{n:'عاصم عبدالعزيز بن عبيد الحربي',v:'0568',g:'third',s:'4'},'S3-415':{n:'عبدالرحمن ابراهيم بن حمود الحربي',v:'7580',g:'third',s:'4'},'S3-416':{n:'عبدالله ماجد عبدالله العمري',v:'4778',g:'third',s:'4'},'S3-417':{n:'عبدالله محمد مسلم الرائقي',v:'9232',g:'third',s:'4'},'S3-418':{n:'عبدالله نور فالح العمري',v:'4852',g:'third',s:'4'},'S3-419':{n:'عمار عبدالله مستور المخلفي',v:'5780',g:'third',s:'4'},'S3-420':{n:'فهد عبدالسلام غريب العوفي',v:'2146',g:'third',s:'4'},'S3-421':{n:'فيصل سعد عبدالرحمن العنزي',v:'4825',g:'third',s:'4'},'S3-422':{n:'ماجد سلمان بن مستور العمري',v:'5088',g:'third',s:'4'},'S3-423':{n:'محمد بندر بن مرشد الحربي',v:'2606',g:'third',s:'4'},'S3-424':{n:'محمد حمد محمد الحربي',v:'5952',g:'third',s:'4'},'S3-425':{n:'محمد عوض بن سعد الحربي',v:'4859',g:'third',s:'4'},'S3-426':{n:'مساعد فيصل بن هليل المطيري',v:'8333',g:'third',s:'4'},'S3-427':{n:'مشاري متعب بن رجاءالله المطيري',v:'7318',g:'third',s:'4'},'S3-428':{n:'مشعل فهيد معجل المطيري',v:'7411',g:'third',s:'4'},'S3-429':{n:'نواف خالد صيفي الحربي',v:'5723',g:'third',s:'4'},'S3-430':{n:'نواف غانم بن غنام الردادي',v:'3184',g:'third',s:'4'},'S3-501':{n:'أصيل حاتم بن شباب الحربي',v:'5840',g:'third',s:'5'},'S3-502':{n:'أنس نايف محسن الرشيدي',v:'2900',g:'third',s:'5'},'S3-503':{n:'ابراهيم فؤاد ابراهيم حملي',v:'2000',g:'third',s:'5'},'S3-504':{n:'احمد سعود بن سعد الحربي',v:'2227',g:'third',s:'5'},'S3-505':{n:'احمد عماد بن عبداللطيف قاره',v:'4894',g:'third',s:'5'},'S3-506':{n:'ادهم عبدالمجيد بن محمود الهندي',v:'6635',g:'third',s:'5'},'S3-507':{n:'انس فهد حجاج الحربي',v:'4843',g:'third',s:'5'},'S3-508':{n:'اياد غويزي بخيت الحربي',v:'3486',g:'third',s:'5'},'S3-509':{n:'تركي عبدالله حسين الردادي',v:'4387',g:'third',s:'5'},'S3-510':{n:'حسام احمد بن حامد المطيري',v:'6183',g:'third',s:'5'},'S3-511':{n:'حمد أحمد حمد الرشيد',v:'9839',g:'third',s:'5'},'S3-512':{n:'راكان فيصل معزي الصاعدي',v:'8460',g:'third',s:'5'},'S3-513':{n:'زياد حمدان بن حامد المطيري',v:'1419',g:'third',s:'5'},'S3-514':{n:'زياد حمود بن سريحان المطيري',v:'6656',g:'third',s:'5'},'S3-515':{n:'زياد خالد بن نهار المطيري',v:'8248',g:'third',s:'5'},'S3-516':{n:'زياد نايف سليمان العمري',v:'8594',g:'third',s:'5'},'S3-517':{n:'سعد سالم صايغ الحربي',v:'8653',g:'third',s:'5'},'S3-518':{n:'سعود عبدالعزيز بن سعود المطيري',v:'7586',g:'third',s:'5'},'S3-519':{n:'عبدالرحمن تركي عبدالرحمن الحائطى',v:'9321',g:'third',s:'5'},'S3-520':{n:'عبدالعزيز حمزه بن طلعت كرعلي',v:'5620',g:'third',s:'5'},'S3-521':{n:'عمر محمد بن سعود العوفي',v:'1267',g:'third',s:'5'},'S3-522':{n:'فراس فيحان بشير المطيري',v:'6262',g:'third',s:'5'},'S3-523':{n:'مؤيد مرضي عقاب العوفي',v:'7882',g:'third',s:'5'},'S3-524':{n:'مازن سعيد بن بادي العوفي',v:'6440',g:'third',s:'5'},'S3-525':{n:'محمد حامد بن محمد الرويثي',v:'8607',g:'third',s:'5'},'S3-526':{n:'محمد سلطان محارب الحربي',v:'8911',g:'third',s:'5'},'S3-527':{n:'مشعل ياسر بن عائض السحيمي',v:'7235',g:'third',s:'5'},'S3-528':{n:'معاذ بندر غالب الحربي',v:'8597',g:'third',s:'5'},'S3-529':{n:'مناور سلطان مناور الحربي',v:'8200',g:'third',s:'5'},'S3-530':{n:'نايف بدر عبيد المطيري',v:'7698',g:'third',s:'5'},'S3-601':{n:'أنس حمود عياد المطيري',v:'4703',g:'third',s:'6'},'S3-602':{n:'احمد رائد عايض العوفي',v:'9530',g:'third',s:'6'},'S3-603':{n:'الحسن محمد بن سودان الزهراني',v:'6521',g:'third',s:'6'},'S3-604':{n:'اياد ناصر بن عويلي الحربي',v:'9303',g:'third',s:'6'},'S3-605':{n:'باسل سالم بن مرزوق الصاعدي',v:'2114',g:'third',s:'6'},'S3-606':{n:'باسم عبدالعزيز مسلم الحيسوني',v:'3137',g:'third',s:'6'},'S3-607':{n:'ثامر ماجد بن عبدالرحمن الحيسوني',v:'5062',g:'third',s:'6'},'S3-608':{n:'ثامر معيبد صنت الحربي',v:'7037',g:'third',s:'6'},'S3-609':{n:'ذياب علي عائض الحربي',v:'5459',g:'third',s:'6'},'S3-610':{n:'طاهر احمد علي الشاطري',v:'2617',g:'third',s:'6'},'S3-611':{n:'عبدالرحمن سلطان عبدالرحمن النجم',v:'1079',g:'third',s:'6'},'S3-612':{n:'عبدالرحمن مطر محمد الرشيدي',v:'4813',g:'third',s:'6'},'S3-613':{n:'عبدالرحمن مقرن عبدالاله الرشيدي',v:'9305',g:'third',s:'6'},'S3-614':{n:'عبداللطيف سلطان بن حامد الحربي',v:'5676',g:'third',s:'6'},'S3-615':{n:'عبدالمجيد سعود سمير الحربي',v:'6121',g:'third',s:'6'},'S3-616':{n:'عزام بندر علي العمري',v:'7587',g:'third',s:'6'},'S3-617':{n:'عمار مشعان بن رزيق البركاني',v:'3136',g:'third',s:'6'},'S3-618':{n:'عمر مبروك ساعد المطيري',v:'4989',g:'third',s:'6'},'S3-619':{n:'عمر منصور بن دحيم الرشيدي',v:'2942',g:'third',s:'6'},'S3-620':{n:'مجاهد احمد علي الغامدي',v:'7996',g:'third',s:'6'},'S3-621':{n:'محمد توفيق ماهل العوفي',v:'8797',g:'third',s:'6'},'S3-622':{n:'محمد صالح عوض السلمي',v:'6844',g:'third',s:'6'},'S3-623':{n:'محمد عثمان محمد صوفان',v:'8627',g:'third',s:'6'},'S3-624':{n:'محمد علي بن خلف العلوي',v:'9235',g:'third',s:'6'},'S3-625':{n:'محمد منصور ناصر الوسيدي',v:'1318',g:'third',s:'6'},'S3-626':{n:'محمد يوسف معلا المطيري',v:'9718',g:'third',s:'6'},'S3-627':{n:'مشعل عبدالقادر احمد المصعبي',v:'1895',g:'third',s:'6'},'S3-628':{n:'معاذ عبدالله بن خلف العلوي',v:'1308',g:'third',s:'6'},'S3-629':{n:'مهند صباح مناور السحيمي',v:'3350',g:'third',s:'6'},'S3-630':{n:'يزيد عمر بن شبيب العوفي',v:'5436',g:'third',s:'6'}};

// Helper function
function getClassStudents(grade, section) {
    return Object.entries(DB)
        .filter(([, v]) => v.g === grade && v.s === section)
        .map(([id, v]) => ({ id, name: v.n }));
}
</script>

<script type="text/babel">
const { useState, useEffect } = React;

// ========================================
// الثوابت
// ========================================
const GRADE_LABELS = {
    first: 'أول متوسط',
    second: 'ثاني متوسط',
    third: 'ثالث متوسط'
};

const HOMEWORK_TYPES = {
    homework: 'واجب منزلي',
    test: 'اختبار',
    project: 'مشروع',
    assignment: 'تكليف'
};

const BADGES = {
    FIRST_LOGIN: { name: 'الدخول الأول', icon: '🎯', points: 5 },
    WEEK_STREAK: { name: 'أسبوع متواصل', icon: '🔥', points: 20 },
    MONTH_STREAK: { name: 'شهر متواصل', icon: '⭐', points: 50 },
    EARLY_BIRD: { name: 'الطالب المبكر', icon: '🌅', points: 10 },
    HOMEWORK_MASTER: { name: 'ملك الواجبات', icon: '👑', points: 30 }
};

// ========================================
// التخزين المحلي
// ========================================
const storage = {
    get: (key) => {
        try {
            const value = localStorage.getItem(key);
            return value ? JSON.parse(value) : null;
        } catch {
            return null;
        }
    },
    set: (key, value) => {
        try {
            localStorage.setItem(key, JSON.stringify(value));
        } catch {}
    }
};

// كلمات المرور
const getPasswords = () => storage.get('passwords') || {};
const savePassword = (code, password) => {
    const passwords = getPasswords();
    passwords[code] = password;
    storage.set('passwords', passwords);
};
const hasPassword = (code) => !!getPasswords()[code];
const checkPassword = (code, password) => getPasswords()[code] === password;

// إحصائيات الطلاب
const getStudentStats = (code) => storage.get(`stats_${code}`) || {
    code,
    points: 0,
    badges: [],
    loginDates: [],
    streak: 0,
    totalLogins: 0,
    completedHomeworks: 0,
    totalHomeworks: 0
};

const saveStudentStats = (stats) => storage.set(`stats_${stats.code}`, stats);

// حساب الأيام المتتالية
const calculateStreak = (dates) => {
    if (!dates || dates.length === 0) return 0;
    const sorted = [...dates].sort((a, b) => new Date(b) - new Date(a));
    let streak = 1;
    for (let i = 0; i < sorted.length - 1; i++) {
        const diff = Math.floor((new Date(sorted[i]) - new Date(sorted[i + 1])) / 86400000);
        if (diff === 1) streak++;
        else break;
    }
    return streak;
};

// تسجيل دخول
const recordLogin = (code, onBadgeEarned) => {
    const stats = getStudentStats(code);
    const today = new Date().toISOString().split('T')[0];
    
    if (stats.loginDates.includes(today)) {
        return stats;
    }
    
    stats.loginDates.push(today);
    stats.totalLogins++;
    stats.streak = calculateStreak(stats.loginDates);
    
    const awardBadge = (badgeKey) => {
        if (!stats.badges.includes(badgeKey)) {
            stats.badges.push(badgeKey);
            stats.points += BADGES[badgeKey].points;
            if (onBadgeEarned) onBadgeEarned(badgeKey);
        }
    };
    
    if (stats.totalLogins === 1) awardBadge('FIRST_LOGIN');
    if (new Date().getHours() < 8) awardBadge('EARLY_BIRD');
    if (stats.streak >= 7) awardBadge('WEEK_STREAK');
    if (stats.streak >= 30) awardBadge('MONTH_STREAK');
    
    saveStudentStats(stats);
    return stats;
};

// تسجيل إنجاز
const recordCompletion = (code) => {
    const stats = getStudentStats(code);
    stats.completedHomeworks++;
    stats.totalHomeworks++;
    stats.points += 5;
    
    const rate = stats.completedHomeworks / stats.totalHomeworks;
    if (rate >= 0.9 && stats.totalHomeworks >= 10 && !stats.badges.includes('HOMEWORK_MASTER')) {
        stats.badges.push('HOMEWORK_MASTER');
        stats.points += BADGES.HOMEWORK_MASTER.points;
    }
    
    saveStudentStats(stats);
};

// لوحة الصدارة
const getLeaderboard = (grade, section) => {
    return Object.entries(DB)
        .filter(([, v]) => v.g === grade && v.s === section)
        .map(([code, v]) => {
            const stats = getStudentStats(code);
            return { ...stats, name: v.n };
        })
        .filter(s => s.totalLogins > 0)
        .sort((a, b) => b.points - a.points)
        .slice(0, 10);
};

// ========================================
// مكونات واجهة المستخدم
// ========================================

// نافذة الشارة
function BadgePopup({ badgeKey, onClose }) {
    const badge = BADGES[badgeKey];
    
    useEffect(() => {
        const timer = setTimeout(onClose, 4000);
        return () => clearTimeout(timer);
    }, []);
    
    return (
        <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
            <div className="bg-white rounded-2xl p-8 text-center max-w-sm animate-slide shadow-2xl">
                <div className="text-7xl mb-4">{badge.icon}</div>
                <p className="text-sm text-indigo-600 font-bold mb-2">إنجاز جديد!</p>
                <h3 className="text-2xl font-bold text-gray-800 mb-2">{badge.name}</h3>
                <div className="bg-yellow-100 text-yellow-800 font-bold py-2 px-4 rounded-full inline-block">
                    +{badge.points} نقطة ⭐
                </div>
            </div>
        </div>
    );
}

// بطاقة إحصائية
function StatCard({ icon, value, label, color }) {
    return (
        <div className={`${color} rounded-xl p-4 text-white`}>
            <div className="text-3xl mb-2">{icon}</div>
            <p className="text-2xl font-bold">{value}</p>
            <p className="text-xs opacity-90">{label}</p>
        </div>
    );
}

// ========================================
// التطبيق الرئيسي
// ========================================
function App() {
    // حالة المستخدم
    const [user, setUser] = useState(null);
    const [role, setRole] = useState(null);
    
    // حالة تسجيل الدخول
    const [loginStep, setLoginStep] = useState(1);
    const [code, setCode] = useState('');
    const [verificationCode, setVerificationCode] = useState('');
    const [password, setPassword] = useState('');
    const [confirmPassword, setConfirmPassword] = useState('');
    const [accountData, setAccountData] = useState(null);
    
    // البيانات
    const [homeworks, setHomeworks] = useState(() => storage.get('homeworks') || []);
    const [notifications, setNotifications] = useState(() => storage.get('notifications') || []);
    
    // واجهة المستخدم
    const [showNotifications, setShowNotifications] = useState(false);
    const [showBadges, setShowBadges] = useState(false);
    const [showLeaderboard, setShowLeaderboard] = useState(false);
    const [newBadge, setNewBadge] = useState(null);
    const [studentStats, setStudentStats] = useState(null);
    
    // نموذج المعلم
    const [homeworkForm, setHomeworkForm] = useState({
        title: '',
        description: '',
        dueDate: '',
        dueTime: '',
        gradeLevel: 'first',
        section: '1',
        type: 'homework',
        grade: ''
    });
    
    // إغلاق المهمة
    const [closingHomework, setClosingHomework] = useState(null);
    const [incompleteStudents, setIncompleteStudents] = useState([]);
    
    // حفظ البيانات
    useEffect(() => {
        storage.set('homeworks', homeworks);
    }, [homeworks]);
    
    useEffect(() => {
        storage.set('notifications', notifications);
    }, [notifications]);
    
    // إضافة إشعار
    const addNotification = (notif) => {
        setNotifications(prev => [...prev, {
            ...notif,
            id: Date.now() + Math.random(),
            createdAt: new Date().toISOString(),
            read: false
        }]);
    };
    
    // الحصول على الإشعارات المفلترة
    const getMyNotifications = () => {
        if (!user) return [];
        if (role === 'teacher') return notifications.filter(n => n.forTeacher === user.code);
        if (role === 'student') return notifications.filter(n => n.forStudent === user.code);
        if (role === 'parent') return notifications.filter(n => 
            user.children.some(c => c.code === n.forStudent)
        );
        return [];
    };
    
    // الحصول على المهام المفلترة
    const getMyHomeworks = () => {
        if (!user) return [];
        if (role === 'teacher') return homeworks.filter(hw => hw.teacherCode === user.code);
        if (role === 'student') return homeworks.filter(hw => 
            hw.gradeLevel === user.gradeLevel && hw.section === user.section
        );
        if (role === 'parent') return homeworks.filter(hw =>
            user.children.some(c => c.gradeLevel === hw.gradeLevel && c.section === hw.section)
        );
        return [];
    };
    
    // ========================================
    // معالجات تسجيل الدخول
    // ========================================
    
    const handleStep1 = () => {
        const upperCode = code.trim().toUpperCase();
        
        if (upperCode.startsWith('T-')) {
            // Check if teacher exists in DB
            if (DB[upperCode] && DB[upperCode].r === 'teacher') {
                const acc = DB[upperCode];
                setAccountData({ n: acc.n, v: acc.v, code: upperCode, role: 'teacher' });
                setLoginStep(hasPassword(upperCode) ? 2 : 3);
            } else {
                alert('❌ كود المعلم غير موجود

الأكواد المتاحة: T-001 إلى T-041');
            });
            setLoginStep(0);
        } else if (upperCode.startsWith('P-')) {
            setRole('parent');
            setUser({
                name: 'ولي الأمر',
                code: upperCode,
                children: [
                    { name: 'أحمد فواز بن سعدون الحربي', gradeLevel: 'first', section: '1', code: 'S1-101' },
                    { name: 'أحمد دعيج عويض المطيري', gradeLevel: 'second', section: '1', code: 'S2-101' },
                    { name: 'أحمد عبدالعزيز شداد الحيسوني', gradeLevel: 'third', section: '1', code: 'S3-101' }
                ]
            });
            setLoginStep(0);
        } else if (upperCode.startsWith('A-')) {
            setRole('admin');
            setUser({ name: 'المشرف', code: upperCode });
            setLoginStep(0);
        } else if (DB[upperCode]) {
            const acc = DB[upperCode];
            setAccountData({ ...acc, code: upperCode });
            setLoginStep(hasPassword(upperCode) ? 2 : 3);
        } else {
            alert('❌ الكود غير صحيح\n\nأمثلة:\n• معلم: T-001\n• صف أول: S1-101\n• صف ثاني: S2-101\n• صف ثالث: S3-101');
        }
    };
    
    const handleStep2 = () => {
        if (checkPassword(code.trim().toUpperCase(), password)) {
            const stats = recordLogin(code.trim().toUpperCase(), setNewBadge);
            setStudentStats(stats);
            setRole('student');
            setUser({
                name: accountData.n,
                code: code.trim().toUpperCase(),
                gradeLevel: accountData.g,
                section: accountData.s
            });
            setLoginStep(0);
            resetLoginForm();
        } else {
            alert('❌ كلمة المرور غير صحيحة');
        }
    };
    
    const handleStep3 = () => {
        if (verificationCode.trim() === accountData.v) {
            setLoginStep(4);
        } else {
            alert('❌ رمز التحقق غير صحيح');
        }
    };
    
    const handleStep4 = () => {
        if (password.length < 6) {
            alert('⚠️ كلمة المرور يجب أن تكون 6 أحرف على الأقل');
            return;
        }
        if (password !== confirmPassword) {
            alert('⚠️ كلمتا المرور غير متطابقتين');
            return;
        }
        
        const upperCode = code.trim().toUpperCase();
        savePassword(upperCode, password);
        const stats = recordLogin(upperCode, setNewBadge);
        setStudentStats(stats);
        setRole('student');
        setUser({
            name: accountData.n,
            code: upperCode,
            gradeLevel: accountData.g,
            section: accountData.s
        });
        setLoginStep(0);
        resetLoginForm();
    };
    
    const resetLoginForm = () => {
        setCode('');
        setVerificationCode('');
        setPassword('');
        setConfirmPassword('');
        setAccountData(null);
    };
    
    const logout = () => {
        setUser(null);
        setRole(null);
        setStudentStats(null);
        setLoginStep(1);
        resetLoginForm();
    };
    
    // ========================================
    // معالجات المعلم
    // ========================================
    
    const handleAddHomework = () => {
        if (!homeworkForm.title || !homeworkForm.dueDate || !homeworkForm.dueTime) {
            alert('الرجاء ملء جميع الحقول المطلوبة');
            return;
        }
        
        const students = getClassStudents(homeworkForm.gradeLevel, homeworkForm.section);
        
        if (students.length === 0) {
            alert('⚠️ لا يوجد طلاب في هذا الفصل');
            return;
        }
        
        const homework = {
            id: Date.now(),
            ...homeworkForm,
            createdAt: new Date().toISOString(),
            status: 'active',
            teacherName: user.name,
            teacherCode: user.code,
            completions: students.map(s => ({
                studentId: s.id,
                studentName: s.name,
                completed: null
            }))
        };
        
        setHomeworks(prev => [...prev, homework]);
        
        students.forEach(student => {
            addNotification({
                type: 'new_homework',
                message: `📚 مهمة جديدة: ${homework.title}`,
                homeworkId: homework.id,
                forStudent: student.id
            });
        });
        
        setHomeworkForm({
            title: '',
            description: '',
            dueDate: '',
            dueTime: '',
            gradeLevel: 'first',
            section: '1',
            type: 'homework',
            grade: ''
        });
        
        alert(`✅ تمت إضافة المهمة بنجاح!\nعدد الطلاب: ${students.length}`);
    };
    
    const handleCloseHomework = () => {
        if (!closingHomework) return;
        
        setHomeworks(prev => prev.map(hw => {
            if (hw.id === closingHomework.id) {
                return {
                    ...hw,
                    status: 'closed',
                    closedAt: new Date().toISOString(),
                    completions: hw.completions.map(c => ({
                        ...c,
                        completed: !incompleteStudents.includes(c.studentId)
                    }))
                };
            }
            return hw;
        }));
        
        closingHomework.completions.forEach(c => {
            const completed = !incompleteStudents.includes(c.studentId);
            addNotification({
                type: 'homework_closed',
                message: completed ? `✅ تم إنجاز: ${closingHomework.title}` : `❌ لم يُنجز: ${closingHomework.title}`,
                homeworkId: closingHomework.id,
                forStudent: c.studentId,
                completed
            });
            
            if (completed) {
                recordCompletion(c.studentId);
            }
        });
        
        setClosingHomework(null);
        setIncompleteStudents([]);
        alert('✅ تم إغلاق المهمة بنجاح!');
    };
    
    // ========================================
    // معالجات الطالب
    // ========================================
    
    const handleSendInquiry = (homeworkId) => {
        const inquiry = prompt('اكتب استفسارك للمعلم:');
        if (!inquiry) return;
        
        const homework = homeworks.find(hw => hw.id === homeworkId);
        if (homework) {
            addNotification({
                type: 'inquiry',
                message: `💬 استفسار من ${user.name}: ${inquiry}`,
                homeworkId,
                forTeacher: homework.teacherCode,
                studentName: user.name,
                studentCode: user.code
            });
            alert('✅ تم إرسال الاستفسار بنجاح');
        }
    };
    
    // تحميل إحصائيات الطالب
    useEffect(() => {
        if (role === 'student' && user && loginStep === 0) {
            const stats = getStudentStats(user.code);
            setStudentStats(stats);
        }
    }, [role, user, loginStep]);
    
    // ========================================
    // واجهة تسجيل الدخول
    // ========================================
    
    if (loginStep !== 0) {
        return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50 flex items-center justify-center p-4">
                <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md animate-slide">
                    <div className="text-center mb-8">
                        <div className="w-16 h-16 bg-gradient-to-br from-indigo-600 to-purple-600 rounded-2xl mx-auto mb-4 flex items-center justify-center">
                            <span className="text-3xl">📚</span>
                        </div>
                        <h1 className="text-2xl font-bold text-gray-800 mb-2">
                            متوسطة المنذر بن عمرو الأنصاري
                        </h1>
                        <p className="text-gray-600 text-sm">نظام إدارة المهام والواجبات</p>
                        <div className="mt-3 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-full px-4 py-2 inline-block">
                            <p className="text-xs font-semibold text-indigo-600">
                                ✨ 536 طالب • 18 فصل • 3 صفوف
                            </p>
                        </div>
                    </div>
                    
                    {loginStep === 1 && (
                        <div className="space-y-4">
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    رمز الدخول
                                </label>
                                <input
                                    type="text"
                                    value={code}
                                    onChange={(e) => setCode(e.target.value.toUpperCase())}
                                    onKeyPress={(e) => e.key === 'Enter' && handleStep1()}
                                    placeholder="مثال: S1-101 أو S2-201 أو S3-301"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none text-center text-lg font-mono"
                                    autoFocus
                                />
                            </div>
                            
                            <button
                                onClick={handleStep1}
                                className="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-3 rounded-xl transition-all"
                            >
                                متابعة ←
                            </button>
                            
                            <div className="bg-gray-50 rounded-xl p-4 text-xs text-gray-600">
                                <p className="font-semibold mb-2">للتجربة:</p>
                                <p>• معلم: <code className="bg-gray-200 px-2 py-1 rounded">T-001</code></p>
                                <p>• صف أول: <code className="bg-gray-200 px-2 py-1 rounded">S1-101</code></p>
                                <p>• صف ثاني: <code className="bg-gray-200 px-2 py-1 rounded">S2-101</code></p>
                                <p>• صف ثالث: <code className="bg-gray-200 px-2 py-1 rounded">S3-101</code></p>
                            </div>
                        </div>
                    )}
                    
                    {loginStep === 2 && (
                        <div className="space-y-4">
                            <div className="bg-indigo-50 border-r-4 border-indigo-500 p-4 rounded-lg mb-4">
                                <p className="font-semibold text-gray-800">{accountData?.n}</p>
                                <p className="text-sm text-gray-600">{GRADE_LABELS[accountData?.g]} - الشعبة {accountData?.s}</p>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    كلمة المرور
                                </label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleStep2()}
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none"
                                    autoFocus
                                />
                            </div>
                            
                            <button
                                onClick={handleStep2}
                                className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition-colors"
                            >
                                تسجيل الدخول
                            </button>
                            
                            <button
                                onClick={() => { setLoginStep(1); resetLoginForm(); }}
                                className="w-full text-gray-600 py-2 text-sm"
                            >
                                ← رجوع
                            </button>
                        </div>
                    )}
                    
                    {loginStep === 3 && (
                        <div className="space-y-4">
                            <div className="bg-blue-50 border-r-4 border-blue-500 p-4 rounded-lg mb-4">
                                <p className="font-semibold text-gray-800">{accountData?.n}</p>
                                <p className="text-sm text-blue-600 font-semibold mt-1">🎉 أول دخول - دعنا نفعّل حسابك</p>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    رمز التحقق (آخر 4 أرقام من الهوية)
                                </label>
                                <input
                                    type="text"
                                    value={verificationCode}
                                    onChange={(e) => setVerificationCode(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleStep3()}
                                    maxLength={4}
                                    placeholder="مثال: 3971"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none text-center text-3xl font-mono tracking-widest"
                                    autoFocus
                                />
                            </div>
                            
                            <button
                                onClick={handleStep3}
                                className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition-colors"
                            >
                                التحقق والمتابعة →
                            </button>
                            
                            <button
                                onClick={() => { setLoginStep(1); resetLoginForm(); }}
                                className="w-full text-gray-600 py-2 text-sm"
                            >
                                ← رجوع
                            </button>
                        </div>
                    )}
                    
                    {loginStep === 4 && (
                        <div className="space-y-4">
                            <div className="bg-green-50 border-r-4 border-green-500 p-4 rounded-lg mb-4">
                                <p className="text-green-700 font-semibold">✅ تم التحقق! اختر كلمة مرور الآن</p>
                            </div>
                            
                            <div>
                                <label className="block text-sm font-semibold text-gray-700 mb-2">
                                    كلمة المرور (6 أحرف على الأقل)
                                </label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="اختر كلمة مرور قوية"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none mb-3"
                                    autoFocus
                                />
                                <input
                                    type="password"
                                    value={confirmPassword}
                                    onChange={(e) => setConfirmPassword(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleStep4()}
                                    placeholder="أعد كتابة كلمة المرور"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:outline-none"
                                />
                            </div>
                            
                            <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-3 text-sm text-yellow-800">
                                ⚠️ احفظ كلمة المرور في مكان آمن
                            </div>
                            
                            <button
                                onClick={handleStep4}
                                className="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-xl transition-colors"
                            >
                                ✓ تفعيل الحساب والدخول
                            </button>
                        </div>
                    )}
                </div>
            </div>
        );
    }
    
    // ========================================
    // الواجهة الرئيسية بعد تسجيل الدخول
    // ========================================
    
    const myNotifs = getMyNotifications();
    const myHws = getMyHomeworks();
    const unreadCount = myNotifs.filter(n => !n.read).length;
    
    return (
        <div className="min-h-screen bg-gray-50">
            {/* نافذة الشارة */}
            {newBadge && <BadgePopup badgeKey={newBadge} onClose={() => setNewBadge(null)} />}
            
            {/* الترويسة */}
            <header className="bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-lg sticky top-0 z-30">
                <div className="max-w-6xl mx-auto px-4 py-4 flex items-center justify-between">
                    <div className="flex items-center gap-3">
                        <span className="text-3xl">📚</span>
                        <div>
                            <h1 className="font-bold text-lg">متوسطة المنذر بن عمرو الأنصاري</h1>
                            <p className="text-sm text-indigo-200">
                                {user.name}
                                {role === 'student' && ` • ${GRADE_LABELS[user.gradeLevel]} - ${user.section}`}
                            </p>
                        </div>
                    </div>
                    
                    <div className="flex items-center gap-3">
                        {role === 'student' && studentStats && (
                            <>
                                <button
                                    onClick={() => setShowLeaderboard(true)}
                                    className="bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg text-sm transition"
                                >
                                    🏆
                                </button>
                                <button
                                    onClick={() => setShowBadges(true)}
                                    className="bg-white/20 hover:bg-white/30 px-3 py-1.5 rounded-lg text-sm transition"
                                >
                                    🎖️ {studentStats.badges.length}
                                </button>
                                {studentStats.streak > 0 && (
                                    <div className="bg-orange-500 px-3 py-1.5 rounded-lg text-sm font-bold animate-pulse">
                                        🔥 {studentStats.streak}
                                    </div>
                                )}
                                <div className="bg-yellow-500 px-3 py-1.5 rounded-lg text-sm font-bold">
                                    ⭐ {studentStats.points}
                                </div>
                            </>
                        )}
                        
                        <button
                            onClick={() => setShowNotifications(!showNotifications)}
                            className="relative bg-white/20 hover:bg-white/30 p-2.5 rounded-lg transition"
                        >
                            🔔
                            {unreadCount > 0 && (
                                <span className="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center font-bold">
                                    {unreadCount}
                                </span>
                            )}
                        </button>
                        
                        <button
                            onClick={logout}
                            className="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg text-sm font-semibold transition"
                        >
                            خروج
                        </button>
                    </div>
                </div>
            </header>
            
            {/* لوحة الإشعارات */}
            {showNotifications && (
                <div className="fixed top-20 left-4 right-4 max-w-md mx-auto bg-white rounded-xl shadow-2xl p-4 z-20 max-h-96 overflow-y-auto animate-fade">
                    <h3 className="font-bold text-lg mb-3">🔔 التنبيهات ({myNotifs.length})</h3>
                    {myNotifs.length === 0 ? (
                        <p className="text-center text-gray-400 py-8">لا توجد تنبيهات</p>
                    ) : (
                        <div className="space-y-2">
                            {myNotifs.slice().reverse().map(n => (
                                <div
                                    key={n.id}
                                    className={`p-3 rounded-lg text-sm border-r-4 ${ n.type === 'inquiry' ? 'bg-yellow-50 border-yellow-400' :
                                        n.completed === false ? 'bg-red-50 border-red-400' :
                                        n.completed === true ? 'bg-green-50 border-green-400' :
                                        'bg-indigo-50 border-indigo-400'
                                    }`}
                                >
                                    <p className="text-gray-800 font-medium">{n.message}</p>
                                    <p className="text-xs text-gray-500 mt-1">
                                        {new Date(n.createdAt).toLocaleString('ar-SA')}
                                    </p>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            )}
            
            {/* المحتوى الرئيسي */}
            <div className="max-w-6xl mx-auto px-4 py-8">
                
                {/* واجهة الطالب */}
                {role === 'student' && studentStats && (
                    <div className="space-y-6 animate-fade">
                        {/* بطاقات الإحصائيات */}
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                            <StatCard
                                icon="⭐"
                                value={studentStats.points}
                                label="النقاط"
                                color="bg-gradient-to-br from-yellow-400 to-yellow-600"
                            />
                            <StatCard
                                icon="🔥"
                                value={studentStats.streak}
                                label="أيام متتالية"
                                color="bg-gradient-to-br from-orange-400 to-red-600"
                            />
                            <StatCard
                                icon="🎖️"
                                value={studentStats.badges.length}
                                label="الشارات"
                                color="bg-gradient-to-br from-purple-400 to-indigo-600"
                            />
                            <StatCard
                                icon="✅"
                                value={studentStats.completedHomeworks}
                                label="مهام منجزة"
                                color="bg-gradient-to-br from-green-400 to-emerald-600"
                            />
                        </div>
                        
                        {/* قائمة المهام */}
                        <div className="bg-white rounded-xl shadow-md p-6">
                            <h2 className="text-2xl font-bold text-gray-800 mb-4">📋 مهامي ({myHws.length})</h2>
                            {myHws.length === 0 ? (
                                <div className="text-center py-12">
                                    <span className="text-6xl">🎉</span>
                                    <p className="text-gray-500 mt-4">لا توجد مهام حالياً</p>
                                </div>
                            ) : (
                                <div className="space-y-4">
                                    {myHws.map(hw => {
                                        const myCompletion = hw.completions?.find(c => c.studentId === user.code);
                                        const isClosed = hw.status === 'closed';
                                        
                                        return (
                                            <div
                                                key={hw.id}
                                                className={`border-2 rounded-xl p-4 ${ isClosed
                                                        ? myCompletion?.completed
                                                            ? 'border-green-300 bg-green-50'
                                                            : 'border-red-300 bg-red-50'
                                                        : 'border-indigo-200 bg-indigo-50'
                                                }`}
                                            >
                                                <div className="flex items-start justify-between mb-2">
                                                    <div>
                                                        <h3 className="font-bold text-lg text-gray-800">{hw.title}</h3>
                                                        <p className="text-sm text-gray-600 mt-1">{hw.description}</p>
                                                    </div>
                                                    <span className="px-3 py-1 bg-white border rounded-full text-xs font-semibold">
                                                        {HOMEWORK_TYPES[hw.type]}
                                                    </span>
                                                </div>
                                                
                                                <div className="flex flex-wrap gap-3 text-sm text-gray-600 mt-3">
                                                    <span>📅 {new Date(`${hw.dueDate}T${hw.dueTime}`).toLocaleDateString('ar-SA')}</span>
                                                    <span>⏰ {hw.dueTime}</span>
                                                    {hw.grade && <span className="text-indigo-600 font-bold">🎯 {hw.grade} درجة</span>}
                                                </div>
                                                
                                                {isClosed && myCompletion && (
                                                    <div className={`mt-3 px-3 py-2 rounded-lg text-sm font-bold ${
                                                        myCompletion.completed
                                                            ? 'bg-green-100 text-green-800'
                                                            : 'bg-red-100 text-red-800'
                                                    }`}>
                                                        {myCompletion.completed ? '✓ تم الإنجاز' : '✗ لم يُنجز'}
                                                    </div>
                                                )}
                                                
                                                {!isClosed && (
                                                    <button
                                                        onClick={() => handleSendInquiry(hw.id)}
                                                        className="mt-3 text-indigo-600 hover:text-indigo-800 font-medium text-sm"
                                                    >
                                                        💬 إرسال استفسار للمعلم
                                                    </button>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            )}
                        </div>
                    </div>
                )}
                
                {/* واجهة المعلم */}
                {role === 'teacher' && (
                    <div className="space-y-6 animate-fade">
                        {/* نموذج إضافة مهمة */}
                        <div className="bg-white rounded-xl shadow-md p-6">
                            <h2 className="text-2xl font-bold text-gray-800 mb-6">➕ إضافة مهمة جديدة</h2>
                            
                            <div className="grid md:grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">عنوان المهمة *</label>
                                    <input
                                        type="text"
                                        value={homeworkForm.title}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, title: e.target.value })}
                                        placeholder="مثال: حل تمارين الرياضيات"
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">نوع المهمة</label>
                                    <select
                                        value={homeworkForm.type}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, type: e.target.value })}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none bg-white"
                                    >
                                        {Object.entries(HOMEWORK_TYPES).map(([value, label]) => (
                                            <option key={value} value={value}>{label}</option>
                                        ))}
                                    </select>
                                </div>
                                
                                <div className="md:col-span-2">
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">الوصف</label>
                                    <textarea
                                        value={homeworkForm.description}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, description: e.target.value })}
                                        rows={3}
                                        placeholder="تفاصيل المهمة..."
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">تاريخ التسليم *</label>
                                    <input
                                        type="date"
                                        value={homeworkForm.dueDate}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, dueDate: e.target.value })}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">وقت التسليم *</label>
                                    <input
                                        type="time"
                                        value={homeworkForm.dueTime}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, dueTime: e.target.value })}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                                    />
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">الصف</label>
                                    <select
                                        value={homeworkForm.gradeLevel}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, gradeLevel: e.target.value })}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none bg-white"
                                    >
                                        <option value="first">أول متوسط</option>
                                        <option value="second">ثاني متوسط</option>
                                        <option value="third">ثالث متوسط</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">الشعبة</label>
                                    <select
                                        value={homeworkForm.section}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, section: e.target.value })}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none bg-white"
                                    >
                                        <option value="1">الشعبة 1</option>
                                        <option value="2">الشعبة 2</option>
                                        <option value="3">الشعبة 3</option>
                                        <option value="4">الشعبة 4</option>
                                        <option value="5">الشعبة 5</option>
                                        <option value="6">الشعبة 6</option>
                                    </select>
                                </div>
                                
                                <div>
                                    <label className="block text-sm font-semibold text-gray-700 mb-2">الدرجة</label>
                                    <input
                                        type="number"
                                        value={homeworkForm.grade}
                                        onChange={(e) => setHomeworkForm({ ...homeworkForm, grade: e.target.value })}
                                        placeholder="مثال: 10"
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-indigo-500 focus:outline-none"
                                    />
                                </div>
                            </div>
                            
                            <div className="mt-4 text-sm text-gray-600">
                                👥 عدد الطلاب في الفصل المختار: {getClassStudents(homeworkForm.gradeLevel, homeworkForm.section).length} طالب
                            </div>
                            
                            <button
                                onClick={handleAddHomework}
                                className="mt-6 w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-3 rounded-xl transition-all"
                            >
                                إضافة المهمة
                            </button>
                        </div>
                        
                        {/* قائمة مهام المعلم */}
                        <div className="bg-white rounded-xl shadow-md p-6">
                            <h2 className="text-2xl font-bold text-gray-800 mb-4">📋 مهامي ({myHws.length})</h2>
                            {myHws.length === 0 ? (
                                <p className="text-center text-gray-400 py-12">لم تضف أي مهام بعد</p>
                            ) : (
                                <div className="space-y-4">
                                    {myHws.map(hw => {
                                        const doneCount = hw.completions?.filter(c => c.completed === true).length || 0;
                                        const notDoneCount = hw.completions?.filter(c => c.completed === false).length || 0;
                                        const totalCount = hw.completions?.length || 0;
                                        
                                        return (
                                            <div key={hw.id} className="border-2 border-gray-200 rounded-xl p-4 hover:border-indigo-300 transition">
                                                <div className="flex items-start justify-between mb-3">
                                                    <div>
                                                        <h3 className="font-bold text-lg text-gray-800">{hw.title}</h3>
                                                        <p className="text-sm text-gray-600 mt-1">{hw.description}</p>
                                                    </div>
                                                    <div className="flex gap-2">
                                                        <span className="px-3 py-1 bg-indigo-100 text-indigo-700 text-xs rounded-full font-semibold">
                                                            {HOMEWORK_TYPES[hw.type]}
                                                        </span>
                                                        <span className="px-3 py-1 bg-gray-100 text-gray-700 text-xs rounded-full font-semibold">
                                                            {GRADE_LABELS[hw.gradeLevel]} - {hw.section}
                                                        </span>
                                                    </div>
                                                </div>
                                                
                                                <div className="flex items-center gap-4 text-sm text-gray-600 mb-3">
                                                    <span>📅 {new Date(`${hw.dueDate}T${hw.dueTime}`).toLocaleDateString('ar-SA')}</span>
                                                    <span>⏰ {hw.dueTime}</span>
                                                    <span>👥 {totalCount} طالب</span>
                                                    {hw.grade && <span className="text-indigo-600 font-bold">🎯 {hw.grade}</span>}
                                                </div>
                                                
                                                {hw.status === 'closed' ? (
                                                    <div className="flex gap-3 text-sm">
                                                        <div className="bg-green-100 text-green-800 px-3 py-2 rounded-lg font-bold">
                                                            ✓ منجز: {doneCount}
                                                        </div>
                                                        <div className="bg-red-100 text-red-800 px-3 py-2 rounded-lg font-bold">
                                                            ✗ غير منجز: {notDoneCount}
                                                        </div>
                                                        <div className="bg-gray-100 text-gray-800 px-3 py-2 rounded-lg font-semibold">
                                                            مُغلقة
                                                        </div>
                                                    </div>
                                                ) : (
                                                    <button
                                                        onClick={() => {
                                                            setClosingHomework(hw);
                                                            setIncompleteStudents([]);
                                                        }}
                                                        className="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition"
                                                    >
                                                        📝 إغلاق وتسجيل الإنجاز ({totalCount} طالب)
                                                    </button>
                                                )}
                                            </div>
                                        );
                                    })}
                                </div>
                            )}
                        </div>
                    </div>
                )}
                
                {/* واجهة ولي الأمر */}
                {role === 'parent' && (
                    <div className="space-y-6 animate-fade">
                        <div className="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6">
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">👨‍👩‍👧‍👦 متابعة الأبناء</h2>
                            <p className="text-gray-600">متابعة {user.children.length} من الأبناء</p>
                        </div>
                        
                        {user.children.map((child, idx) => {
                            const childHws = homeworks.filter(hw => 
                                hw.gradeLevel === child.gradeLevel && hw.section === child.section
                            );
                            
                            return (
                                <div key={idx} className="bg-white rounded-xl shadow-md p-6">
                                    <div className="flex items-center gap-3 mb-4 pb-4 border-b-2 border-indigo-100">
                                        <span className="text-4xl">👨‍🎓</span>
                                        <div>
                                            <h3 className="font-bold text-xl text-gray-800">{child.name}</h3>
                                            <p className="text-sm text-gray-600">{GRADE_LABELS[child.gradeLevel]} - الشعبة {child.section}</p>
                                        </div>
                                    </div>
                                    
                                    {childHws.length === 0 ? (
                                        <p className="text-center text-gray-400 py-8">لا توجد مهام</p>
                                    ) : (
                                        <div className="space-y-3">
                                            {childHws.map(hw => {
                                                const completion = hw.completions?.find(c => c.studentId === child.code);
                                                const isClosed = hw.status === 'closed';
                                                
                                                return (
                                                    <div
                                                        key={hw.id}
                                                        className={`border-2 rounded-lg p-4 ${
                                                            isClosed
                                                                ? completion?.completed
                                                                    ? 'border-green-300 bg-green-50'
                                                                    : 'border-red-300 bg-red-50'
                                                                : 'border-gray-200'
                                                        }`}
                                                    >
                                                        <div className="flex items-start justify-between">
                                                            <div>
                                                                <h4 className="font-bold text-gray-800">{hw.title}</h4>
                                                                <p className="text-sm text-gray-600 mt-1">{hw.description}</p>
                                                            </div>
                                                            {isClosed && completion && (
                                                                <span className={`px-3 py-1 rounded-full text-xs font-bold ${
                                                                    completion.completed
                                                                        ? 'bg-green-200 text-green-800'
                                                                        : 'bg-red-200 text-red-800'
                                                                }`}>
                                                                    {completion.completed ? '✓ منجز' : '✗ لم يُنجز'}
                                                                </span>
                                                            )}
                                                        </div>
                                                        
                                                        <div className="flex gap-3 text-xs text-gray-500 mt-2">
                                                            <span>📅 {new Date(`${hw.dueDate}T${hw.dueTime}`).toLocaleDateString('ar-SA')}</span>
                                                            <span>⏰ {hw.dueTime}</span>
                                                            {hw.grade && <span className="text-indigo-600 font-bold">🎯 {hw.grade}</span>}
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    )}
                                </div>
                            );
                        })}
                    </div>
                )}
                
                {/* واجهة المشرف */}
                {role === 'admin' && (
                    <div className="bg-white rounded-xl shadow-md p-8 text-center animate-fade">
                        <span className="text-6xl">👨‍💼</span>
                        <h2 className="text-2xl font-bold text-gray-800 mt-4 mb-2">واجهة المشرف</h2>
                        <p className="text-gray-600">إدارة النظام والإشراف على العمليات</p>
                        
                        <div className="grid md:grid-cols-3 gap-4 mt-8">
                            <div className="bg-gradient-to-br from-indigo-100 to-indigo-50 rounded-xl p-6">
                                <p className="text-3xl font-bold text-indigo-600">{Object.keys(DB).filter(k => k.startsWith('S1-')).length}</p>
                                <p className="text-sm text-gray-600 mt-2">طلاب الصف الأول</p>
                            </div>
                            <div className="bg-gradient-to-br from-purple-100 to-purple-50 rounded-xl p-6">
                                <p className="text-3xl font-bold text-purple-600">{Object.keys(DB).filter(k => k.startsWith('S2-')).length}</p>
                                <p className="text-sm text-gray-600 mt-2">طلاب الصف الثاني</p>
                            </div>
                            <div className="bg-gradient-to-br from-pink-100 to-pink-50 rounded-xl p-6">
                                <p className="text-3xl font-bold text-pink-600">{Object.keys(DB).filter(k => k.startsWith('S3-')).length}</p>
                                <p className="text-sm text-gray-600 mt-2">طلاب الصف الثالث</p>
                            </div>
                        </div>
                    </div>
                )}
            </div>
            
            {/* نافذة إغلاق المهمة */}
            {closingHomework && (
                <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl p-6 w-full max-w-3xl max-h-[90vh] flex flex-col">
                        <h2 className="text-2xl font-bold text-gray-800 mb-2">📝 إغلاق المهمة</h2>
                        <p className="text-gray-600 mb-1">{closingHomework.title}</p>
                        <p className="text-sm text-gray-500 mb-4">{GRADE_LABELS[closingHomework.gradeLevel]} - الشعبة {closingHomework.section}</p>
                        
                        <div className="bg-amber-50 border-r-4 border-amber-400 p-4 rounded-lg mb-4">
                            <p className="text-sm text-amber-800">
                                <strong>📝 اختر الطلاب غير المنجزين</strong> — الباقون منجزون تلقائياً
                            </p>
                        </div>
                        
                        <div className="flex gap-4 text-sm mb-4">
                            <span className="text-green-600 font-bold">
                                ✓ منجز: {closingHomework.completions.length - incompleteStudents.length}
                            </span>
                            <span className="text-red-600 font-bold">
                                ✗ غير منجز: {incompleteStudents.length}
                            </span>
                            <span className="text-gray-600 font-bold">
                                المجموع: {closingHomework.completions.length}
                            </span>
                        </div>
                        
                        <div className="overflow-y-auto flex-1 grid md:grid-cols-2 gap-3 mb-4">
                            {closingHomework.completions.map(c => {
                                const isIncomplete = incompleteStudents.includes(c.studentId);
                                
                                return (
                                    <label
                                        key={c.studentId}
                                        className={`flex items-center gap-3 p-3 rounded-xl border-2 cursor-pointer transition ${
                                            isIncomplete
                                                ? 'border-red-400 bg-red-50'
                                                : 'border-green-400 bg-green-50'
                                        }`}
                                    >
                                        <input
                                            type="checkbox"
                                            checked={isIncomplete}
                                            onChange={() => {
                                                setIncompleteStudents(prev =>
                                                    isIncomplete
                                                        ? prev.filter(id => id !== c.studentId)
                                                        : [...prev, c.studentId]
                                                );
                                            }}
                                            className="w-5 h-5 rounded"
                                        />
                                        <span className="flex-1 text-sm font-medium">{c.studentName}</span>
                                        <span className={`text-sm font-bold ${isIncomplete ? 'text-red-600' : 'text-green-600'}`}>
                                            {isIncomplete ? '✗' : '✓'}
                                        </span>
                                    </label>
                                );
                            })}
                        </div>
                        
                        <div className="flex gap-3">
                            <button
                                onClick={handleCloseHomework}
                                className="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-xl transition"
                            >
                                حفظ وإغلاق المهمة
                            </button>
                            <button
                                onClick={() => {
                                    setClosingHomework(null);
                                    setIncompleteStudents([]);
                                }}
                                className="px-6 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-3 rounded-xl transition"
                            >
                                إلغاء
                            </button>
                        </div>
                    </div>
                </div>
            )}
            
            {/* لوحة الصدارة */}
            {showLeaderboard && role === 'student' && studentStats && (
                <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto">
                        <div className="flex items-center justify-between mb-6">
                            <h2 className="text-2xl font-bold text-gray-800">🏆 لوحة صدارة فصلك</h2>
                            <button
                                onClick={() => setShowLeaderboard(false)}
                                className="text-gray-400 hover:text-gray-600 text-2xl"
                            >
                                ✕
                            </button>
                        </div>
                        
                        <div className="space-y-3">
                            {getLeaderboard(user.gradeLevel, user.section).map((student, idx) => (
                                <div
                                    key={student.code}
                                    className={`flex items-center gap-4 p-4 rounded-xl ${
                                        student.code === user.code
                                            ? 'bg-indigo-50 border-2 border-indigo-300'
                                            : idx === 0
                                            ? 'bg-yellow-50'
                                            : idx === 1
                                            ? 'bg-gray-50'
                                            : idx === 2
                                            ? 'bg-orange-50'
                                            : 'bg-white border border-gray-200'
                                    }`}
                                >
                                    <span className="text-2xl font-bold w-10 text-center">
                                        {idx === 0 ? '🥇' : idx === 1 ? '🥈' : idx === 2 ? '🥉' : idx + 1}
                                    </span>
                                    <div className="flex-1 min-w-0">
                                        <p className="font-bold text-gray-800 truncate">{student.name}</p>
                                        <div className="flex gap-3 text-xs text-gray-600 mt-1">
                                            <span>🔥 {student.streak}d</span>
                                            <span>✅ {student.completedHomeworks}</span>
                                            <span>🎖️ {student.badges.length}</span>
                                        </div>
                                    </div>
                                    <span className="text-xl font-bold text-indigo-600">⭐{student.points}</span>
                                </div>
                            ))}
                            
                            {getLeaderboard(user.gradeLevel, user.section).length === 0 && (
                                <p className="text-center text-gray-400 py-12">لا توجد بيانات بعد</p>
                            )}
                        </div>
                    </div>
                </div>
            )}
            
            {/* نافذة الشارات */}
            {showBadges && studentStats && (
                <div className="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto">
                        <div className="flex items-center justify-between mb-6">
                            <h2 className="text-2xl font-bold text-gray-800">🎖️ شاراتي</h2>
                            <button
                                onClick={() => setShowBadges(false)}
                                className="text-gray-400 hover:text-gray-600 text-2xl"
                            >
                                ✕
                            </button>
                        </div>
                        
                        <div className="grid md:grid-cols-3 gap-4">
                            {Object.entries(BADGES).map(([key, badge]) => {
                                const earned = studentStats.badges.includes(key);
                                
                                return (
                                    <div
                                        key={key}
                                        className={`p-6 rounded-xl text-center border-2 ${
                                            earned
                                                ? 'border-indigo-300 bg-indigo-50'
                                                : 'border-gray-200 bg-gray-50 opacity-60'
                                        }`}
                                    >
                                        <div className="text-5xl mb-3">{badge.icon}</div>
                                        <p className="font-bold text-sm mb-1">{badge.name}</p>
                                        <p className={`text-xs font-bold ${earned ? 'text-yellow-600' : 'text-gray-400'}`}>
                                            +{badge.points} نقطة
                                        </p>
                                        {!earned && <p className="text-xs text-gray-400 mt-2">🔒 مُقفل</p>}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                </div>
            )}
        </div>
    );
}

ReactDOM.render(<App />, document.getElementById('root'));
</script>
</body>
</html>
