<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Telegram Multi-Data Screener</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Tahoma,sans-serif;background:#111;color:#eee;text-align:center;padding:20px}
    textarea{width:90%;height:200px;margin:15px auto;font-size:14px;padding:10px;border-radius:6px;border:none;resize:vertical}
    button{padding:12px 28px;font-size:18px;background:#0ebeff;color:#000;border:none;border-radius:6px;cursor:pointer}
    #result{margin-top:25px;text-align:right;white-space:pre-line;font-size:15px;line-height:1.8}
    .sig-sell{color:#ff4757;font-weight:bold}
    .sig-buy {color:#2ed573;font-weight:bold}
    .block{border:1px solid #444;margin:8px 0;padding:8px;border-radius:6px;background:#1b1b1b}
  </style>
</head>
<body>

  <h1>ğŸ“Š Telegram Multi-Data Screener</h1>
  <textarea id="raw" placeholder="Ø§Ù„ØµÙ‚ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙˆØ§Ø±Ø¯Ø© Ù‡Ù†Ø§..."></textarea>
  <br>
  <button onclick="analyze()">ğŸ” Ø­Ù„Ù„ Ø§Ù„Ø¢Ù†</button>
  <div id="result"></div>

  <script>
    function analyze(){
      const raw=document.getElementById("raw").value;
      if(!raw.trim()){alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù„ØµÙ‚ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙˆÙ„Ù‹Ø§");return;}
      const lines=raw.split('\n');

      const records=[];   // ÙƒÙ„Ù‘Ù Ø§Ù„ØªÙˆØµÙŠØ§Øª Ø§Ù„Ù…Ø³ØªØ®Ø±Ø¬Ø©
      let i=0;

      while(i<lines.length){
        const l=lines[i];
        // Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ Ø§Ù„Ø°ÙŠ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø­Ø¬Ù…
        const volMatch=l.match(/([\d.]+)Éƒ\s+volume\s+in/);
        if(volMatch){
          let j=i+1, sellPct=null, buyPct=null, priceLine=null;

          // Ø§Ø¨Ø­Ø« Ø¹Ù† Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨ÙŠØ¹/Ø§Ù„Ø´Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„Ø³Ø·ÙˆØ± Ø§Ù„ØªØ§Ù„ÙŠØ©
          while(j<lines.length && !priceLine){
            const pctSell=lines[j].match(/Sell\s*\[(-?\d+)%\]/);
            const pctBuy=lines[j].match(/Buy\s*\[(-?\d+)%\]/);
            if(pctSell){sellPct=parseInt(pctSell[1]);}
            if(pctBuy){buyPct=parseInt(pctBuy[1]);}
            // Ø¹Ù†Ø¯ Ø£ÙˆÙ„ Ø³Ø¹Ø± Ù†ÙˆÙ‚Ù Ø§Ù„Ø¨Ø­Ø«
            if(!priceLine) priceLine=lines[j].match(/Price:([\d.]+)â†’([\d.]+)/);
            j++;
          }

          const vol=parseFloat(volMatch[1]);
          const symbolMatch=l.match(/^â”Œ?#?(\w+)/); // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø±Ù…Ø² Ø¥Ù† ÙˆÙØ¬Ø¯
          const symbol=symbolMatch?symbolMatch[1]:"UNKN";

          if(priceLine){
            const p1=parseFloat(priceLine[1]);
            const p2=parseFloat(priceLine[2]);
            records.push({symbol,vol,sellPct,buyPct,p1,p2,rawLine:l.trim()});
          }
        }
        i++;
      }

      // ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨ Ø£ÙƒØ¨Ø± Ø­Ø¬Ù… (Ø£Ùˆ ÙŠÙ…ÙƒÙ†Ùƒ Ø­Ø³Ø¨ Ø£Ø¹Ù„Ù‰ Ù†Ø³Ø¨Ø© Ø¨ÙŠØ¹)
      records.sort((a,b)=>b.vol-a.vol);

      let html="";
      records.forEach(rec=>{
        const {symbol,vol,sellPct,buyPct,p1,p2,rawLine}=rec;
        const change=Math.abs(p2-p1);
        // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù‚ÙˆÙŠ
        if(sellPct!==null && sellPct<=-95 && change<0.001){
          html+=`<div class="block"><span class="sig-sell">ğŸ”´ Ø¨ÙŠØ¹ Ù‚ÙˆÙŠ â€“ ${symbol}</span><br>
                 Ø­Ø¬Ù…: ${vol}Éƒ | Sell: ${sellPct}% | Ø³Ø¹Ø±: ${p1}â†’${p2}<br>
                 <small>${rawLine}</small></div>`;
        }
        // Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø°ÙƒÙŠ (Ø¨ÙŠØ¹ ÙƒØ¨ÙŠØ± Ù„ÙƒÙ† Ø§Ù„Ø³Ø¹Ø± Ù„Ù… ÙŠÙ‡Ø¨Ø· ÙƒØ«ÙŠØ±Ù‹Ø§)
        if(sellPct!==null && sellPct<=-80 && change<0.005){
          html+=`<div class="block"><span class="sig-buy">ğŸŸ¢ Ø´Ø±Ø§Ø¡ Ø°ÙƒÙŠ â€“ ${symbol}</span><br>
                 Ø­Ø¬Ù…: ${vol}Éƒ | Sell: ${sellPct}% | Ø³Ø¹Ø±: ${p1}â†’${p2}<br>
                 <small>${rawLine}</small></div>`;
        }
        // Ø­Ø§Ù„Ø© Ù†Ø§Ø¯Ø±Ø©: Ø´Ø±Ø§Ø¡ 100%
        if(buyPct!==null && buyPct===100){
          html+=`<div class="block"><span class="sig-buy">âœ… Ø´Ø±Ø§Ø¡ 100% â€“ ${symbol}</span><br>
                 Ø­Ø¬Ù…: ${vol}Éƒ | Buy: ${buyPct}% | Ø³Ø¹Ø±: ${p1}â†’${p2}<br>
                 <small>${rawLine}</small></div>`;
        }
      });

      document.getElementById("result").innerHTML= html || "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¥Ø´Ø§Ø±Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© Ù„Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ©";
    }
  </script>

</body>
</html>
