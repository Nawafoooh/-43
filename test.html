<!doctype html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø­Ø¬Ø² Ø¬Ù„Ø³Ø§Øª Nawaf Wyckoff</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap' );
        body {
            font-family: 'Cairo', sans-serif;
            box-sizing: border-box;
            background-color: #f8fafc;
        }
        .booking-card {
            transition: all 0.3s ease;
        }
        .booking-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .time-slot {
            transition: all 0.2s ease;
        }
        .time-slot:hover:not(.booked) {
            transform: scale(1.05);
        }
        .time-slot.booked {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .toast {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            animation: slideDown 0.3s ease-out, fadeOut 0.3s ease-in 2.7s forwards;
        }
        @keyframes slideDown {
            from { transform: translate(-50%, -100%); }
            to { transform: translate(-50%, 0); }
        }
        @keyframes fadeOut {
            to { opacity: 0; }
        }
        .loading-spinner {
            border: 3px solid rgba(0,0,0,0.1);
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 0.8s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="min-h-screen text-slate-800">
    <div id="app" class="min-h-screen"></div>

    <script>
        // --- Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© ---
        const config = {
            platform_title: "Ù…Ù†ØµØ© Ø­Ø¬Ø² Ø¬Ù„Ø³Ø§Øª Nawaf Wyckoff",
            trainer_name: "Nawaf Wyckoff",
            session_duration: "Ù…Ø¯Ø© Ø§Ù„Ø¬Ù„Ø³Ø©: Ø³Ø§Ø¹Ø© ÙˆØ±Ø¨Ø¹",
            booking_button_text: "Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†",
            admin_title: "Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¯Ø±Ø¨",
            primary_color: "#3b82f6",
            secondary_color: "#64748b",
        };

        const DAYS = ['Ø§Ù„Ø£Ø­Ø¯', 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', 'Ø§Ù„Ø®Ù…ÙŠØ³'];
        // ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ù„ØªÙƒÙˆÙ† Ø§Ù„Ù…Ø¯Ø© Ø³Ø§Ø¹Ø© ÙˆØ±Ø¨Ø¹ (75 Ø¯Ù‚ÙŠÙ‚Ø©)
        const TIME_SLOTS = [
            { time: '4:00 PM', label: '4:00 Ø¹ØµØ±Ø§Ù‹' },
            { time: '5:15 PM', label: '5:15 Ù…Ø³Ø§Ø¡Ù‹' },
            { time: '6:30 PM', label: '6:30 Ù…Ø³Ø§Ø¡Ù‹' },
            { time: '7:45 PM', label: '7:45 Ù…Ø³Ø§Ø¡Ù‹' },
            { time: '9:00 PM', label: '9:00 Ù…Ø³Ø§Ø¡Ù‹' }
        ];
        const ADMIN_PASSWORD = 'wyckoff2024'; // ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø§Ù„Ù…Ø¯Ø±Ø¨

        // --- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„ØªØ®Ø²ÙŠÙ† ---
        let state = {
            bookings: [],
            currentView: 'student', // 'student' or 'admin'
            selectedDay: null,
            isLoading: false,
        };

        // Ù…Ø­Ø§ÙƒØ§Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… LocalStorage
        const db = {
            load: () => {
                const data = localStorage.getItem('wyckoffBookings');
                return data ? JSON.parse(data) : [];
            },
            save: (data) => {
                localStorage.setItem('wyckoffBookings', JSON.stringify(data));
            }
        };

        // --- Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ---
        function showToast(message, type = 'success') {
            const toast = document.createElement('div');
            toast.className = `toast ${type === 'success' ? 'bg-green-500' : 'bg-red-500'}`;
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => toast.remove(), 3000);
        }

        function isSlotBooked(day, time) {
            return state.bookings.some(b => b.day === day && b.time === time);
        }

        // --- Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ---
        async function handleBooking(day, time) {
            if (isSlotBooked(day, time)) return;

            const nameInputDiv = document.createElement('div');
            nameInputDiv.id = 'modal-overlay';
            nameInputDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            nameInputDiv.innerHTML = `
                <div class="bg-white rounded-lg p-6 max-w-sm mx-4 w-full" id="modal-content">
                    <h3 class="text-xl font-bold mb-4 text-center">Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø­Ø¬Ø²</h3>
                    <p class="mb-4 text-center text-slate-600">Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø± Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
                    <input type="text" id="studentNameInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." 
                           class="w-full px-4 py-3 border border-gray-300 rounded-lg mb-4 text-right">
                    <div class="flex gap-3">
                        <button id="confirmName" class="flex-1 px-4 py-2 rounded-lg text-white font-semibold" style="background-color: ${config.primary_color}">ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø­Ø¬Ø²</button>
                        <button id="cancelName" class="flex-1 px-4 py-2 rounded-lg font-semibold bg-gray-300">Ø¥Ù„ØºØ§Ø¡</button>
                    </div>
                </div>
            `;
            document.body.appendChild(nameInputDiv);
            document.getElementById('studentNameInput').focus();

            // Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø®Ø§Ø±Ø¬Ù‡Ø§
            nameInputDiv.addEventListener('click', (e) => {
                if (e.target.id === 'modal-overlay') {
                    nameInputDiv.remove();
                }
            });

            document.getElementById('confirmName').onclick = () => {
                const studentName = document.getElementById('studentNameInput').value.trim();
                if (!studentName) {
                    showToast('ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù… Ù…Ø³ØªØ¹Ø§Ø±', 'error');
                    return;
                }
                nameInputDiv.remove();
                processBooking(day, time, studentName);
            };

            document.getElementById('cancelName').onclick = () => nameInputDiv.remove();
        }

        function processBooking(day, time, studentName) {
            const newBooking = {
                id: Date.now().toString(),
                day,
                time,
                studentName,
            };
            state.bookings.push(newBooking);
            db.save(state.bookings);
            showToast('ØªÙ… Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­! âœ“');
            state.selectedDay = null;
            render();
        }

        function handleCancelBooking(bookingId) {
            state.bookings = state.bookings.filter(b => b.id !== bookingId);
            db.save(state.bookings);
            showToast('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø­Ø¬Ø² Ø¨Ù†Ø¬Ø§Ø­');
            render();
        }

        function handleAdminLogin() {
            const password = prompt('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø¯Ø±Ø¨:');
            if (password === ADMIN_PASSWORD) {
                state.currentView = 'admin';
                render();
            } else if (password) {
                showToast('ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©', 'error');
            }
        }

        // --- Ø¯ÙˆØ§Ù„ Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Render) ---
        function renderStudentView() {
            const availableSlotsCount = (day) => TIME_SLOTS.filter(slot => !isSlotBooked(day, slot.time)).length;

            return `
                <div class="min-h-screen p-4 sm:p-6">
                    <div class="max-w-6xl mx-auto">
                        <header class="text-center mb-8 fade-in">
                            <h1 class="text-3xl sm:text-4xl font-bold mb-2 text-slate-900">${config.platform_title}</h1>
                            <p class="text-lg text-slate-600 mb-4">Ø§Ø­Ø¬Ø² Ø¬Ù„Ø³ØªÙƒ Ù…Ø¹ Ø§Ù„Ø®Ø¨ÙŠØ± ${config.trainer_name}</p>
                            <div class="inline-block px-4 py-2 rounded-full text-white" style="background-color: ${config.primary_color};">${config.session_duration}</div>
                        </header>

                        <div class="text-center mb-8">
                            <button onclick="handleAdminLogin()" class="px-4 py-2 rounded-lg text-white font-semibold transition hover:opacity-90" style="background-color: ${config.secondary_color};">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø¨</button>
                        </div>

                        ${!state.selectedDay ? `
                            <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                ${DAYS.map(day => `
                                    <div class="booking-card bg-white p-6 rounded-xl cursor-pointer shadow-md" onclick="state.selectedDay = '${day}'; render();">
                                        <div class="text-center">
                                            <div class="text-4xl mb-3">ğŸ“…</div>
                                            <h3 class="text-xl font-bold text-slate-800">${day}</h3>
                                            <p class="text-slate-500">${availableSlotsCount(day)} Ù…ÙˆØ¹Ø¯ Ù…ØªØ§Ø­</p>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        ` : `
                            <div class="fade-in">
                                <button onclick="state.selectedDay = null; render();" class="mb-6 px-4 py-2 rounded-lg font-semibold text-white transition hover:opacity-90" style="background-color: ${config.secondary_color};">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø£ÙŠØ§Ù…</button>
                                <h2 class="text-2xl font-bold mb-6 text-center">Ø§Ø®ØªØ± Ù…ÙˆØ¹Ø¯Ùƒ Ù„ÙŠÙˆÙ… ${state.selectedDay}</h2>
                                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                                    ${TIME_SLOTS.map(slot => {
                                        const booked = isSlotBooked(state.selectedDay, slot.time);
                                        return `
                                            <div class="time-slot bg-white p-4 rounded-xl shadow-md ${booked ? 'booked' : 'cursor-pointer'}" ${!booked ? `onclick="handleBooking('${state.selectedDay}', '${slot.time}')"` : ''}>
                                                <div class="text-center">
                                                    <div class="text-3xl mb-2">${booked ? 'ğŸ”’' : 'â°'}</div>
                                                    <h3 class="font-bold">${slot.label}</h3>
                                                    <p class="font-semibold" style="color: ${booked ? '#ef4444' : config.primary_color};">${booked ? 'Ù…Ø­Ø¬ÙˆØ²' : config.booking_button_text}</p>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        function renderAdminView() {
            const totalSlots = DAYS.length * TIME_SLOTS.length;
            const bookedSlots = state.bookings.length;
            const bookingsByDay = DAYS.map(day => ({
                day,
                bookings: state.bookings.filter(b => b.day === day).sort((a, b) => a.time.localeCompare(b.time))
            })).filter(d => d.bookings.length > 0);

            return `
                <div class="min-h-screen p-4 sm:p-6">
                    <div class="max-w-6xl mx-auto">
                        <header class="flex justify-between items-center mb-8 fade-in">
                            <h1 class="text-3xl font-bold">${config.admin_title}</h1>
                            <button onclick="state.currentView = 'student'; render();" class="px-4 py-2 rounded-lg text-white font-semibold transition hover:opacity-90" style="background-color: ${config.secondary_color};">Ø¹ÙˆØ¯Ø© Ù„Ù„Ù…Ù†ØµØ©</button>
                        </header>

                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                            <div class="bg-white p-4 rounded-xl shadow-md"><p class="text-slate-500">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</p><p class="text-2xl font-bold" style="color: ${config.primary_color};">${bookedSlots}</p></div>
                            <div class="bg-white p-4 rounded-xl shadow-md"><p class="text-slate-500">Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø§Ù„Ù…ØªØ§Ø­Ø©</p><p class="text-2xl font-bold" style="color: ${config.primary_color};">${totalSlots - bookedSlots}</p></div>
                            <div class="bg-white p-4 rounded-xl shadow-md"><p class="text-slate-500">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ø´ØºØ§Ù„</p><p class="text-2xl font-bold" style="color: ${config.primary_color};">${totalSlots > 0 ? ((bookedSlots / totalSlots) * 100).toFixed(0) : 0}%</p></div>
                        </div>

                        ${bookingsByDay.length > 0 ? bookingsByDay.map(({ day, bookings }) => `
                            <div class="mb-6 fade-in">
                                <h2 class="text-xl font-bold mb-4">${day} (${bookings.length} Ø­Ø¬ÙˆØ²Ø§Øª)</h2>
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                    ${bookings.map(b => `
                                        <div class="bg-white p-4 rounded-lg shadow-md flex flex-col justify-between">
                                            <div>
                                                <p class="font-bold text-lg">${b.studentName}</p>
                                                <p class="text-slate-600 mb-3">${TIME_SLOTS.find(s => s.time === b.time)?.label}</p>
                                            </div>
                                            <button onclick="handleCancelBooking('${b.id}')" class="w-full py-2 rounded-lg text-white font-semibold bg-red-500 hover:bg-red-600">Ø¥Ù„ØºØ§Ø¡</button>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        `).join('') : `
                            <div class="text-center py-16 bg-white rounded-lg shadow-md">
                                <div class="text-6xl mb-4">ğŸ“­</div>
                                <p class="font-bold text-xl">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø­Ø¬ÙˆØ²Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>
                            </div>
                        `}
                    </div>
                </div>
            `;
        }

        function render() {
            const app = document.getElementById('app');
            app.innerHTML = state.currentView === 'student' ? renderStudentView() : renderAdminView();
        }

        // --- Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ---
        function init() {
            state.bookings = db.load();
            render();
        }

        init();
    </script>
</body>
</html>

