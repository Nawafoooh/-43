<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠØ©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        .tab-active { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; }
        .tab-inactive { color: #4a5568; }
        .tab-inactive:hover { background-color: #f7fafc; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .notification { animation: slideIn 0.3s ease-out; }
        .priority-1 { background-color: #dcfce7; border-right: 4px solid #16a34a; }
        .priority-2 { background-color: #fef9c3; border-right: 4px solid #ca8a04; }
        .priority-3 { background-color: #fee2e2; border-right: 4px solid #dc2626; }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4">

    <div class="max-w-7xl mx-auto">

        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-3">
                    <svg class="w-10 h-10 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800">Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h1>
                        <p class="text-gray-600">Ù†Ø¸Ø§Ù… Ø°ÙƒÙŠ Ù„Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¹Ù„Ù…ÙŠ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª</p>
                    </div>
                </div>
                <div class="flex gap-2 flex-wrap">
                    <button onclick="saveAllData()" class="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª</button>
                    <button onclick="clearAllData()" class="flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
                    <button onclick="initializeSystem()" class="flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition">ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</button>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="hidden mb-4 p-4 rounded-lg notification"></div>

        <!-- Tabs -->
        <div class="bg-white rounded-lg shadow-lg mb-6">
            <div class="flex flex-col md:flex-row border-b">
                <button onclick="switchTab('teachers')" id="tab-teachers" class="flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-active">Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</button>
                <button onclick="switchTab('substitution')" id="tab-substitution" class="flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive">Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø°ÙƒÙŠ</button>
                <button onclick="switchTab('absences')" id="tab-absences" class="flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</button>
            </div>
        </div>

        <!-- Content -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <!-- Teachers Tab -->
            <div id="content-teachers" class="tab-content">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h2 class="text-2xl font-bold text-gray-800">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØ£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h2>
                    <div class="flex gap-2">
                        <button onclick="addTeacher()" class="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition">Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù…</button>
                        <button onclick="generatePriorityReport()" class="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª</button>
                    </div>
                </div>
                <div id="teachers-list" class="grid gap-4">
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <p class="text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„Ù…ÙŠÙ† Ø¨Ø¹Ø¯. Ø§Ø¨Ø¯Ø£ Ø¨ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…!</p>
                        <button onclick="initializeSystem()" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</button>
                    </div>
                </div>
            </div>

            <!-- Substitution Tab -->
            <div id="content-substitution" class="tab-content hidden">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="bg-gradient-to-br from-green-50 to-blue-50 p-6 rounded-lg border border-green-200">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø°ÙƒÙŠ</h2>
                        <div class="space-y-4">
                            <div class="bg-white p-4 rounded-lg shadow">
                                <h3 class="font-bold text-lg text-green-700 mb-2">ØªØ¹ÙŠÙŠÙ† Ø§Ù†ØªØ¸Ø§Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠ</h3>
                                <p class="text-gray-600 mb-3">Ø³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ Ù…Ø¹Ù„Ù… Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ù…Ø­Ø¯Ø¯Ø©</p>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„ÙŠÙˆÙ…</label>
                                        <select id="substitution-day" class="w-full p-2 border border-gray-300 rounded-lg">
                                            <option value="Ø§Ù„Ø£Ø­Ø¯">Ø§Ù„Ø£Ø­Ø¯</option>
                                            <option value="Ø§Ù„Ø§Ø«Ù†ÙŠÙ†">Ø§Ù„Ø§Ø«Ù†ÙŠÙ†</option>
                                            <option value="Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡">Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡</option>
                                            <option value="Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡">Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡</option>
                                            <option value="Ø§Ù„Ø®Ù…ÙŠØ³">Ø§Ù„Ø®Ù…ÙŠØ³</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-1">Ø§Ù„Ø­ØµØ©</label>
                                        <select id="substitution-period" class="w-full p-2 border border-gray-300 rounded-lg">
                                            <option value="1">Ø§Ù„Ø­ØµØ© 1</option>
                                            <option value="2">Ø§Ù„Ø­ØµØ© 2</option>
                                            <option value="3">Ø§Ù„Ø­ØµØ© 3</option>
                                            <option value="4">Ø§Ù„Ø­ØµØ© 4</option>
                                            <option value="5">Ø§Ù„Ø­ØµØ© 5</option>
                                            <option value="6">Ø§Ù„Ø­ØµØ© 6</option>
                                            <option value="7">Ø§Ù„Ø­ØµØ© 7</option>
                                        </select>
                                    </div>
                                </div>
                                <button onclick="findBestSubstitute()" class="w-full mt-4 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition font-semibold">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ù…Ø¹Ù„Ù… Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±</button>
                            </div>
                        </div>
                    </div>

                    <div>
                        <div class="bg-white p-6 rounded-lg shadow border">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨Ø¯ÙŠÙ„</h3>
                            <div id="substitution-results" class="space-y-3">
                                <p class="text-gray-500 text-center py-8">Ø³ÙŠØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙˆØ·</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ø´Ø±ÙˆØ· Ø§Ù„Ù†Ø¸Ø§Ù… -->
                <div class="mt-6 bg-yellow-50 p-6 rounded-lg border border-yellow-200">
                    <h3 class="text-lg font-bold text-yellow-800 mb-3">Ø´Ø±ÙˆØ· Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø°ÙƒÙŠ</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-yellow-700">
                        <div class="flex items-start gap-2"><span class="bg-yellow-200 rounded-full p-1">âœ“</span><span>Ù„Ø§ ÙŠØ£Ø®Ø° Ø§Ù„Ù…Ø¹Ù„Ù… Ø£ÙƒØ«Ø± Ù…Ù† Ø§Ù†ØªØ¸Ø§Ø± ÙˆØ§Ø­Ø¯ ÙÙŠ Ø§Ù„ÙŠÙˆÙ…</span></div>
                        <div class="flex items-start gap-2"><span class="bg-yellow-200 rounded-full p-1">âœ“</span><span>Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù…Ù† Ù„Ù… ÙŠØ£Ø®Ø° Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©</span></div>
                        <div class="flex items-start gap-2"><span class="bg-yellow-200 rounded-full p-1">âœ“</span><span>Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø°ÙŠ Ù„Ø¯ÙŠÙ‡ Ø£ÙƒØ«Ø± Ù…Ù† 5 Ø­ØµØµ ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ù„Ø§ ÙŠØ¯Ø®Ù„ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</span></div>
                        <div class="flex items-start gap-2"><span class="bg-yellow-200 rounded-full p-1">âœ“</span><span>Ù…Ø±Ø§Ø¹Ø§Ø© Ø¹Ø¯Ø¯ Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ù…Ø¹Ù„Ù…</span></div>
                    </div>
                </div>
            </div>

            <!-- Absences Tab -->
            <div id="content-absences" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h2 class="text-2xl font-bold text-gray-800">Ø¥Ø¯Ø§Ø±Ø© Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h2>
                    <button onclick="markAbsent()" class="flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition w-full md:w-auto justify-center">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        ØªØ³Ø¬ÙŠÙ„ ØºÙŠØ§Ø¨ Ù…Ø¹Ù„Ù…
                    </button>
                </div>
                <div id="absences-list" class="space-y-4">
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <p class="text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª ØºÙŠØ§Ø¨ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mt-6">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <div>
                        <p class="text-gray-600 text-sm">Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</p>
                        <p id="stat-teachers" class="text-3xl font-bold text-gray-800">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="text-gray-600 text-sm">Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø°ÙƒÙŠ</p>
                        <p class="text-3xl font-bold text-gray-800">âœ…</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <div>
                        <p class="text-gray-600 text-sm">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
                        <p id="stat-absences" class="text-3xl font-bold text-gray-800">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                    </svg>
                    <div>
                        <p class="text-gray-600 text-sm">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„</p>
                        <p class="text-3xl font-bold text-gray-800">ğŸš€</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let teachers = [];
        let absences = [];

        const teacherSubstitutionRequirements = {
            "Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ": 1,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ": 3,
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 1,
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ": 10,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ": 2,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ": 4,
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ": 9,
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ": 0,
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ": 3,
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 9,
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 3,
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ": 10,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ": 5,
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ": 8,
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ": 3,
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 11,
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…": 0,
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 0,
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 10,
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 8,
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ": 11,
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ": 9,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ": 8,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰": 0,
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰": 3,
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ": 3,
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ": 3
        };

        const excelTeachers = [
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ",
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙˆØ§Ø² Ø²Ø§ÙŠØ¯ Ø§Ù„Ù…Ù‡ÙŠÙ…Ø²ÙŠ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ",
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰",
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ",
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…",
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ",
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ",
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ",
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰",
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ",
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ù…Ø¹ÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ",
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ",
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ",
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ"
        ];

        function initializeSystem() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŸ')) {
                teachers = excelTeachers.map(name => ({
                    id: Date.now() + Math.random(),
                    name,
                    subject: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
                    substituteCount: 0,
                    requiredSubstitutions: teacherSubstitutionRequirements[name] || 0
                }));
                renderTeachers();
                updateStats();
                saveAllData();
                showNotification('ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­ Ù…Ø¹ ' + teachers.length + ' Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        function saveAllData() {
            localStorage.setItem('teachers', JSON.stringify(teachers));
            localStorage.setItem('absences', JSON.stringify(absences));
            showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function loadData() {
            const savedTeachers = localStorage.getItem('teachers');
            const savedAbsences = localStorage.getItem('absences');
            if (savedTeachers) {
                teachers = JSON.parse(savedTeachers);
                teachers.forEach(t => t.requiredSubstitutions = teacherSubstitutionRequirements[t.name] || 0);
            }
            if (savedAbsences) absences = JSON.parse(savedAbsences);
            renderAll();
        }

        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!')) {
                teachers = [];
                absences = [];
                localStorage.clear();
                renderAll();
                showNotification('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }

        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.className = `mb-4 p-4 rounded-lg notification flex items-center gap-3 ${type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`;
            notification.innerHTML = `<span class="font-semibold">${message}</span>`;
            notification.classList.remove('hidden');
            setTimeout(() => notification.classList.add('hidden'), 3000);
        }

        function switchTab(tab) {
            const tabs = ['teachers', 'substitution', 'absences'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`tab-${t}`);
                const content = document.getElementById(`content-${t}`);
                if (t === tab) {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-active';
                    content.classList.remove('hidden');
                } else {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive';
                    content.classList.add('hidden');
                }
            });
        }

        function addTeacher() {
            const name = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…:');
            const subject = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ:');
            if (name && subject) {
                teachers.push({
                    id: Date.now(),
                    name,
                    subject,
                    substituteCount: 0,
                    requiredSubstitutions: teacherSubstitutionRequirements[name] || 0
                });
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        function deleteTeacher(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ù„Ù…ØŸ')) {
                teachers = teachers.filter(t => t.id !== id);
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        function findBestSubstitute() {
            if (teachers.length === 0) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø£ class="text-gray-600 text-sm">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„</p>
                        <p class="text-3xl font-bold text-gray-800">ğŸš€</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let teachers = [];
        let schedule = [];
        let absences = [];

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ù…Ø¹Ù„Ù… - Ù…ØµØ­Ø­Ø©
        const teacherSubstitutionRequirements = {
            "Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ": 1,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ": 3,
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 1,
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ": 10,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ": 2,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ": 4,
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ": 9,
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ": 0,
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ": 3,
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 9,
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 3,
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ": 10,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ": 5,
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ": 8,
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ": 3,
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 11,
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…": 0,
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 0,
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 10,
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 8,
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ": 11,
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ": 9,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ": 8,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰": 0,
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰": 3,
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ": 3,
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ": 3
        };

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ù…ØµØ­Ø­Ø© (Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±)
        const excelTeachers = [
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ", 
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙˆØ§Ø² Ø²Ø§ÙŠØ¯ Ø§Ù„Ù…Ù‡ÙŠÙ…Ø²ÙŠ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ",
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰",
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ",
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…",
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ",
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ",
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ",
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰",
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ",
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ù…Ø¹ÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ",
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ",
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ",
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ"
        ];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        function initializeSystem() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŸ')) {
                teachers = [];
                
                // Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
                excelTeachers.forEach(name => {
                    const substitutionReq = teacherSubstitutionRequirements[name] || 0;
                    teachers.push({
                        id: Date.now() + Math.random(),
                        name: name,
                        subject: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
                        substituteCount: 0,
                        requiredSubstitutions: substitutionReq
                    });
                });
                
                renderTeachers();
                updateStats();
                saveAllData(); // âœ… Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
                showNotification('ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­ Ù…Ø¹ ' + teachers.length + ' Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        // Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveAllData() {
            localStorage.setItem('teachers', JSON.stringify(teachers));
            localStorage.setItem('absences', JSON.stringify(absences));
            showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
        function loadData() {
            const savedTeachers = localStorage.getItem('teachers');
            const savedAbsences = localStorage.getItem('absences');

            if (savedTeachers) {
                teachers = JSON.parse(savedTeachers);
                // âœ… Ø¯Ù…Ø¬ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„ØµØ­ÙŠØ­
                teachers.forEach(t => {
                    t.requiredSubstitutions = teacherSubstitutionRequirements[t.name] || 0;
                });
            }
            if (savedAbsences) absences = JSON.parse(savedAbsences);
            
            renderAll();
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!')) {
                teachers = [];
                absences = [];
                localStorage.clear();
                renderAll();
                showNotification('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.className = `mb-4 p-4 rounded-lg notification flex items-center gap-3 ${
                type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
            }`;
            notification.innerHTML = `
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${
                        type === 'success' 
                            ? 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'
                            : 'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'
                    }"></path>
                </svg>
                <span class="font-semibold">${message}</span>
            `;
            notification.classList.remove('hidden');
            setTimeout(() => notification.classList.add('hidden'), 3000);
        }

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function switchTab(tab) {
            const tabs = ['teachers', 'substitution', 'absences'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`tab-${t}`);
                const content = document.getElementById(`content-${t}`);
                if (t === tab) {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-active';
                    content.classList.remove('hidden');
                } else {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive';
                    content.classList.add('hidden');
                }
            });
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù… Ø¬Ø¯ÙŠØ¯
        function addTeacher() {
            const name = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…:');
            const subject = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ:');
            if (name && subject) {
                const substitutionReq = teacherSubstitutionRequirements[name] || 0;
                teachers.push({
                    id: Date.now(),
                    name,
                    subject,
                    substituteCount: 0,
                    requiredSubstitutions: substitutionReq
                });
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Ø­Ø°Ù Ù…Ø¹Ù„Ù…
        function deleteTeacher(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ù„Ù…ØŸ')) {
                teachers = teachers.filter(t => t.id !== id);
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ø¨Ø¯ÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙˆØ·
        function findBestSubstitute() {
            if (teachers.length === 0) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†', 'error');
                return;
            }

            const day = document.getElementById('substitution-day').value;
            const period = document.getElementById('substitution-period').value;
            
            const absentTeacherName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØºØ§Ø¦Ø¨:');
            if (!absentTeacherName) return;

            const availableTeachers = getAvailableTeachers(day, period, absentTeacherName);
            const rankedTeachers = rankTeachersByPriority(availableTeachers, day);

            displaySubstitutionResults(rankedTeachers, day, period, absentTeacherName);
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†
        function getAvailableTeachers(day, period, absentTeacher) {
            // ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØŒ Ù†ÙØªØ±Ø¶ Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ù…ØªØ§Ø­ÙŠÙ†
            // ÙÙŠ Ù†Ø¸Ø§Ù… Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ
            return teachers.filter(teacher => {
                // Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                const isAvailable = teacher.name !== absentTeacher;
                
                // Ù„Ø§ ÙŠÙƒÙˆÙ† Ù‚Ø¯ Ø£Ø®Ø° Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…
                const hasSubstitutionToday = absences.some(a => 
                    a.day === day && a.substitute === teacher.name
                );

                return isAvailable && !hasSubstitutionToday;
            });
        }

        // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
        function rankTeachersByPriority(availableTeachers, day) {
            return availableTeachers.map(teacher => {
                const requiredSubstitutions = teacher.requiredSubstitutions || 0;
                const currentSubstitutions = teacher.substituteCount || 0;
                const remainingSubstitutions = Math.max(0, requiredSubstitutions - currentSubstitutions);
                
                // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
                const daysWithoutSubstitution = calculateDaysWithoutSubstitution(teacher.name);
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
                let priorityScore = 0;
                
                // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù…Ù† Ù„Ø¯ÙŠÙ‡ Ø­ØµØµ Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø·Ù„ÙˆØ¨Ø© Ø£ÙƒØ«Ø±
                priorityScore += remainingSubstitutions * 10;
                
                // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù…Ù† Ù„Ù… ÙŠØ£Ø®Ø° Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                priorityScore += daysWithoutSubstitution * 5;

                return {
                    ...teacher,
                    priorityScore: priorityScore,
                    remainingSubstitutions: remainingSubstitutions,
                    daysWithoutSubstitution: daysWithoutSubstitution
                };
            }).sort((a, b) => b.priorityScore - a.priorityScore);
        }

        // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
        function calculateDaysWithoutSubstitution(teacherName) {
            const today = new Date();
            const substitutionDays = absences
                .filter(a => a.substitute === teacherName)
                .map(a => new Date(a.date));
            
            if (substitutionDays.length === 0) return 7; // Ø£Ø³Ø¨ÙˆØ¹ ÙƒØ§Ù…Ù„
            
            const lastSubstitution = new Date(Math.max(...substitutionDays));
            const daysDiff = Math.floor((today - lastSubstitution) / (1000 * 60 * 60 * 24));
            
            return Math.min(7, daysDiff);
        }

        // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨Ø¯ÙŠÙ„
        function displaySubstitutionResults(rankedTeachers, day, period, absentTeacher) {
            const resultsDiv = document.getElementById('substitution-results');
            
            if (rankedTeachers.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <p class="text-red-700 font-semibold">âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ù„Ù…ÙˆÙ† Ù…ØªØ§Ø­ÙˆÙ† Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
                        <p class="text-red-600 text-sm mt-1">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø¥Ù…Ø§ Ù…Ø´ØºÙˆÙ„ÙˆÙ† Ø£Ùˆ Ù„Ø¯ÙŠÙ‡Ù… Ø£ÙƒØ«Ø± Ù…Ù† 5 Ø­ØµØµ ÙÙŠ Ø§Ù„ÙŠÙˆÙ…</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div class="bg-green-50 p-4 rounded-lg border border-green-200 mb-4">
                    <h4 class="font-bold text-green-800">Ø§Ù„ØºØ§Ø¦Ø¨: ${absentTeacher}</h4>
                    <p class="text-green-600">Ø§Ù„ÙŠÙˆÙ…: ${day} - Ø§Ù„Ø­ØµØ©: ${period}</p>
                </div>
            `;

            rankedTeachers.slice(0, 5).forEach((teacher, index) => {
                const priorityClass = index === 0 ? 'priority-1' : 
                                   index === 1 ? 'priority-2' : 'priority-3';
                
                                html += `
                    <div class="p-4 rounded-lg ${priorityClass}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-bold text-lg ${index === 0 ? 'text-green-700' : 'text-gray-700'}">
                                    ${index + 1}. ${teacher.name}
                                </h4>
                                <div class="grid grid-cols-2 gap-2 text-sm mt-2">
                                    <div><span class="text-gray-600">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</span> <span class="font-semibold">${teacher.priorityScore}</span></div>
                                    <div><span class="text-gray-600">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</span> <span class="font-semibold">${teacher.remainingSubstitutions}</span></div>
                                    <div><span class="text-gray-600">Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±:</span> <span class="font-semibold">${teacher.daysWithoutSubstitution}</span></div>
                                    <div><span class="text-gray-600">Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ù†Ø¬Ø²Ø©:</span> <span class="font-semibold">${teacher.substituteCount}/${teacher.requiredSubstitutions}</span></div>
                                </div>
                            </div>
                            ${index === 0 ? `
                                <button onclick="assignSubstitution('${teacher.name}', '${absentTeacher}', '${day}', '${period}')" 
                                        class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm">
                                    ØªØ¹ÙŠÙŠÙ†
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function assignSubstitution(substituteName, absentTeacher, day, period) {
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„
            teachers = teachers.map(t =>
                t.name === substituteName
                    ? { ...t, substituteCount: (t.substituteCount || 0) + 1 }
                    : t
            );

            // ØªØ³Ø¬ÙŠÙ„ Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
            absences.push({
                id: Date.now() + Math.random(),
                date: new Date().toLocaleDateString('ar-SA'),
                absentTeacher: absentTeacher,
                substitute: substituteName,
                day: day,
                period: period,
                subject: "Ø­ØµØ© Ø§Ù†ØªØ¸Ø§Ø±",
                className: "Ù…Ø®ØªÙ„ÙØ©"
            });

            renderTeachers();
            renderAbsences();
            updateStats();
            showNotification(`ØªÙ… ØªØ¹ÙŠÙŠÙ† ${substituteName} Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø¹Ù† ${absentTeacher}`, 'success');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('substitution-results').innerHTML = `
                <div class="bg-green-100 p-4 rounded-lg border border-green-300">
                    <p class=" class="text-gray-600 text-sm">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„</p>
                        <p class="text-3xl font-bold text-gray-800">ğŸš€</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let teachers = [];
        let schedule = [];
        let absences = [];

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ù…Ø¹Ù„Ù… - Ù…ØµØ­Ø­Ø©
        const teacherSubstitutionRequirements = {
            "Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ": 1,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ": 3,
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 1,
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ": 10,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ": 2,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ": 4,
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ": 9,
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ": 0,
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ": 3,
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 9,
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 3,
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ": 10,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ": 5,
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ": 8,
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ": 3,
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 11,
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…": 0,
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 0,
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 10,
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 8,
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ": 11,
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ": 9,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ": 8,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰": 0,
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰": 3,
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ": 3,
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ": 3
        };

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ù…ØµØ­Ø­Ø© (Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±)
        const excelTeachers = [
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ",
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙˆØ§Ø² Ø²Ø§ÙŠØ¯ Ø§Ù„Ù…Ù‡ÙŠÙ…Ø²ÙŠ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ",
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰",
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ",
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…",
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ",
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ",
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ",
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰",
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ",
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ù…Ø¹ÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ",
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ",
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ",
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ"
        ];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        function initializeSystem() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŸ')) {
                teachers = [];

                // Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
                excelTeachers.forEach(name => {
                    const substitutionReq = teacherSubstitutionRequirements[name] || 0;
                    teachers.push({
                        id: Date.now() + Math.random(),
                        name: name,
                        subject: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
                        substituteCount: 0,
                        requiredSubstitutions: substitutionReq
                    });
                });

                renderTeachers();
                updateStats();
                saveAllData(); // Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
                showNotification('ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­ Ù…Ø¹ ' + teachers.length + ' Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        // Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveAllData() {
            localStorage.setItem('teachers', JSON.stringify(teachers));
            localStorage.setItem('absences', JSON.stringify(absences));
            showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
        function loadData() {
            const savedTeachers = localStorage.getItem('teachers');
            const savedAbsences = localStorage.getItem('absences');

            if (savedTeachers) {
                teachers = JSON.parse(savedTeachers);
                // Ø¯Ù…Ø¬ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„ØµØ­ÙŠØ­
                teachers.forEach(t => {
                    t.requiredSubstitutions = teacherSubstitutionRequirements[t.name] || 0;
                });
            }
            if (savedAbsences) absences = JSON.parse(savedAbsences);

            renderAll();
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!')) {
                teachers = [];
                absences = [];
                localStorage.clear();
                renderAll();
                showNotification('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.className = `mb-4 p-4 rounded-lg notification flex items-center gap-3 ${
                type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
            }`;
            notification.innerHTML = `
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${
                        type === 'success'
                            ? 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'
                            : 'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'
                    }"></path>
                </svg>
                <span class="font-semibold">${message}</span>
            `;
            notification.classList.remove('hidden');
            setTimeout(() => notification.classList.add('hidden'), 3000);
        }

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function switchTab(tab) {
            const tabs = ['teachers', 'substitution', 'absences'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`tab-${t}`);
                const content = document.getElementById(`content-${t}`);
                if (t === tab) {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-active';
                    content.classList.remove('hidden');
                } else {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive';
                    content.classList.add('hidden');
                }
            });
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù… Ø¬Ø¯ÙŠØ¯
        function addTeacher() {
            const name = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…:');
            const subject = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ:');
            if (name && subject) {
                const substitutionReq = teacherSubstitutionRequirements[name] || 0;
                teachers.push({
                    id: Date.now(),
                    name: name,
                    subject: subject,
                    substituteCount: 0,
                    requiredSubstitutions: substitutionReq
                });
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Ø­Ø°Ù Ù…Ø¹Ù„Ù…
        function deleteTeacher(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ù„Ù…ØŸ')) {
                teachers = teachers.filter(t => t.id !== id);
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ø¨Ø¯ÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙˆØ·
        function findBestSubstitute() {
            if (teachers.length === 0) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†', 'error');
                return;
            }

            const day = document.getElementById('substitution-day').value;
            const period = document.getElementById('substitution-period').value;

            const absentTeacherName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØºØ§Ø¦Ø¨:');
            if (!absentTeacherName) return;

            const availableTeachers = getAvailableTeachers(day, period, absentTeacherName);
            const rankedTeachers = rankTeachersByPriority(availableTeachers, day);

            displaySubstitutionResults(rankedTeachers, day, period, absentTeacherName);
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†
        function getAvailableTeachers(day, period, absentTeacher) {
            // ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØŒ Ù†ÙØªØ±Ø¶ Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ù…ØªØ§Ø­ÙŠÙ†
            // ÙÙŠ Ù†Ø¸Ø§Ù… Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ
            return teachers.filter(teacher => {
                // Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                const isAvailable = teacher.name !== absentTeacher;

                // Ù„Ø§ ÙŠÙƒÙˆÙ† Ù‚Ø¯ Ø£Ø®Ø° Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…
                const hasSubstitutionToday = absences.some(a =>
                    a.day === day && a.substitute === teacher.name
                );

                return isAvailable && !hasSubstitutionToday;
            });
        }

        // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
        function rankTeachersByPriority(availableTeachers, day) {
            return availableTeachers.map(teacher => {
                const requiredSubstitutions = teacher.requiredSubstitutions || 0;
                const currentSubstitutions = teacher.substituteCount || 0;
                const remainingSubstitutions = Math.max(0, requiredSubstitutions - currentSubstitutions);

                // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
                const daysWithoutSubstitution = calculateDaysWithoutSubstitution(teacher.name);

                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
                let priorityScore = 0;

                // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù…Ù† Ù„Ø¯ÙŠÙ‡ Ø­ØµØµ Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø·Ù„ÙˆØ¨Ø© Ø£ÙƒØ«Ø±
                priorityScore += remainingSubstitutions * 10;

                // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù…Ù† Ù„Ù… ÙŠØ£Ø®Ø° Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                priorityScore += daysWithoutSubstitution * 5;

                return {
                    ...teacher,
                    priorityScore: priorityScore,
                    remainingSubstitutions: remainingSubstitutions,
                    daysWithoutSubstitution: daysWithoutSubstitution
                };
            }).sort((a, b) => b.priorityScore - a.priorityScore);
        }

        // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
        function calculateDaysWithoutSubstitution(teacherName) {
            const today = new Date();
            const substitutionDays = absences
                .filter(a => a.substitute === teacherName)
                .map(a => new Date(a.date));

            if (substitutionDays.length === 0) return 7; // Ø£Ø³Ø¨ÙˆØ¹ ÙƒØ§Ù…Ù„

            const lastSubstitution = new Date(Math.max(...substitutionDays));
            const daysDiff = Math.floor((today - lastSubstitution) / (1000 * 60 * 60 * 24));

            return Math.min(7, daysDiff);
        }

        // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨Ø¯ÙŠÙ„
        function displaySubstitutionResults(rankedTeachers, day, period, absentTeacher) {
            const resultsDiv = document.getElementById('substitution-results');

            if (rankedTeachers.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <p class="text-red-700 font-semibold">âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ù„Ù…ÙˆÙ† Ù…ØªØ§Ø­ÙˆÙ† Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
                        <p class="text-red-600 text-sm mt-1">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø¥Ù…Ø§ Ù…Ø´ØºÙˆÙ„ÙˆÙ† Ø£Ùˆ Ù„Ø¯ÙŠÙ‡Ù… Ø£ÙƒØ«Ø± Ù…Ù† 5 Ø­ØµØµ ÙÙŠ Ø§Ù„ÙŠÙˆÙ…</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div class="bg-green-50 p-4 rounded-lg border border-green-200 mb-4">
                    <h4 class="font-bold text-green-800">Ø§Ù„ØºØ§Ø¦Ø¨: ${absentTeacher}</h4>
                    <p class="text-green-600">Ø§Ù„ÙŠÙˆÙ…: ${day} - Ø§Ù„Ø­ØµØ©: ${period}</p>
                </div>
            `;

            rankedTeachers.slice(0, 5).forEach((teacher, index) => {
                const priorityClass = index === 0 ? 'priority-1' :
                    index === 1 ? 'priority-2' : 'priority-3';

                html += `
                    <div class="p-4 rounded-lg ${priorityClass}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-bold text-lg ${index === 0 ? 'text-green-700' : 'text-gray-700'}">
                                    ${index + 1}. ${teacher.name}
                                </h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm mt-2">
                                    <div><span class="text-gray-600">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</span> <span class="font-semibold">${teacher.priorityScore}</span></div>
                                    <div><span class="text-gray-600">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</span> <span class="font-semibold">${teacher.remainingSubstitutions}</span></div>
                                    <div><span class="text-gray-600">Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±:</span> <span class="font-semibold">${teacher.daysWithoutSubstitution}</span></div>
                                    <div><span class="text-gray-600">Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ù†Ø¬Ø²Ø©:</span> <span class="font-semibold">${teacher.substituteCount}/${teacher.requiredSubstitutions}</span></div>
                                </div>
                            </div>
                            ${index === 0 ? `
                                <button onclick="assignSubstitution('${teacher.name}', '${absentTeacher}', '${day}', '${period}')"
                                        class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm">
                                    ØªØ¹ÙŠÙŠÙ†
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function assignSubstitution(substituteName, absentTeacher, day, period) {
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„
            teachers = teachers.map(t =>
                t.name === substituteName
                    ? { ...t, substituteCount: (t.substituteCount || 0) + 1 }
                    : t
            );

            // ØªØ³Ø¬ÙŠÙ„ Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
            absences.push({
                id: Date.now() + Math.random(),
                date: new Date().toLocaleDateString('ar-SA'),
                absentTeacher: absentTeacher,
                substitute: substituteName,
                day: day,
                period: period,
                subject: "Ø­ØµØ© Ø§Ù†ØªØ¸Ø§Ø±",
                className: "Ù…Ø®ØªÙ„ÙØ©"
            });

            renderTeachers();
            renderAbsences();
            updateStats();
            showNotification(`ØªÙ… ØªØ¹ÙŠÙŠÙ† ${substituteName} Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø¹Ù† ${absentTeacher}`, 'success');

            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('substitution-results').innerHTML = `
                <div class="bg-green-100 p-4 rounded-lg border border-green-300">
                    <p class="text-green-700 font-semibold">âœ… class="text-gray-600 text-sm">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„</p>
                        <p class="text-3xl font-bold text-gray-800">ğŸš€</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let teachers = [];
        let schedule = [];
        let absences = [];

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„ÙƒÙ„ Ù…Ø¹Ù„Ù… - Ù…ØµØ­Ø­Ø©
        const teacherSubstitutionRequirements = {
            "Ø¹Ø¨Ø¯Ø§Ù„Ù…Ø¬ÙŠØ¯ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ": 1,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ": 3,
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 1,
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ": 10,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ": 2,
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ": 4,
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ": 9,
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ": 0,
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ": 3,
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 9,
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 3,
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ": 10,
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ": 5,
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ": 8,
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ": 3,
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 11,
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 7,
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…": 0,
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ": 0,
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 10,
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ": 8,
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ": 11,
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ": 9,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ": 3,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ": 8,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ": 0,
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰": 0,
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰": 3,
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ": 3,
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ": 3
        };

        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© - Ù…ØµØ­Ø­Ø© (Ø¨Ø¯ÙˆÙ† ØªÙƒØ±Ø§Ø±)
        const excelTeachers = [
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø·Ø± Ø§Ù„Ø¹Ù…Ø±ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø¹Ù…Ø§Ø±ÙŠ Ø§Ù„Ø²Ù‡Ø±Ø§Ù†ÙŠ", 
            "Ù…ÙˆÙÙ‚ Ù…Ø±Ø²ÙˆÙ‚ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙˆØ§Ø² Ø²Ø§ÙŠØ¯ Ø§Ù„Ù…Ù‡ÙŠÙ…Ø²ÙŠ Ø§Ù„Ø±Ø´ÙŠØ¯ÙŠ",
            "ÙÙŠØµÙ„ Ø¹Ø·Ø§Ù„Ù„Ù‡ Ø§Ù„ØµØ§Ø¹Ø¯ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹Ù„ÙˆÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø­Ù…ÙˆØ¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³Ø§ÙŠØ± ÙÙŠØµÙ„ Ø§Ù„Ø¹Ø¶ÙŠÙ„Ù‡ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ù†Ø§ÙØ¹ Ø´Ø¹ÙˆÙŠ Ø§Ù„Ù…Ø·ÙŠØ±ÙŠ",
            "Ø§Ø³Ø§Ù…Ù‡ Ù…Ù†ÙˆØ± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¹ÙŠØ§Ø¯ Ø§Ù„Ø¹ÙˆÙÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø§Ù„ØªØ±ÙƒÙŠ",
            "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù†Ù…ÙŠØ§Ù† Ø¹Ù„ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ ØµÙ„Ø§Ø­ Ø§Ù„Ø±Ø­ÙŠÙ„Ù‰",
            "Ù…Ø´Ø¹Ù„ Ø¨Ù† Ù‡Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ù„ÙŠ Ù…ØªØ¹Ø¨ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø³ÙŠÙ Ø¹Ø¨Ø¯Ø§Ù„Ù…Ù†Ø¹Ù… Ø§Ù„Ø¹Ø§Ø±Ø¶ÙŠ",
            "Ù…Ø­Ù…Ø¯ Ø¨Ù† Ø°Ø¹Ø§Ø± Ø§Ù„Ø¹ÙˆÙÙŠ",
            "ÙØ¤Ø§Ø¯ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹ØªÙŠØ¨ÙŠ",
            "Ø­Ù…Ø²Ø© ØµØ¯Ù‚Ø© Ø§Ø³Ù„Ø§Ù…",
            "Ø³Ù„Ù…Ø§Ù† ØµØ§Ù„Ø­ Ø§Ù„Ø­Ø§Ø±Ø«ÙŠ",
            "Ø¹Ø¨ÙŠØ¯ Ø¨Ù† Ø¯Ø®ÙŠÙ„ Ø§Ù„Ø¹ÙŠØ§Ø¶ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ù…ÙÙ„Ø­ Ø§Ù„Ø±ÙˆÙŠØ«ÙŠ",
            "ÙÙŠØµÙ„ Ø¹ÙˆØ§Ø¯ Ø£Ø¨Ùˆ Ø³Ù„Ù…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø¨Ù† Ù…Ø­Ù…Ø¯ Ø§Ù„Ù‚Ø±Ù†ÙŠ",
            "ÙƒØ§ØªØ¨ Ù…ÙÙ„Ø­ Ø§Ù„Ø±Ø´ÙŠØ¯Ù‰",
            "Ø­Ø¨ÙŠØ¨ Ø¹Ù„ÙŠ Ø§Ù„Ø¹Ù…Ø±ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ø§Ø¨Ø±Ø§Ù‡ÙŠÙ… Ø¹Ø§ÙŠØ¶ Ø§Ù„Ø¬Ø§Ø¨Ø±ÙŠ",
            "Ø³Ù„Ø·Ø§Ù† Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ù‡Ø§Ø¯ÙŠ Ù…Ø¹ÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ",
            "Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² ØºÙ„Ø§Ø¨ Ø§Ù„Ù…Ø®Ù„ÙÙŠ",
            "Ø³Ø¹Ø¯ Ø·Ø§Ù„Ø¹ Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ ØºØ§Ø²ÙŠ Ø³ÙØ± Ø§Ù„Ø­Ø±Ø¨ÙŠ",
            "Ù…ÙˆØ³Ù‰ Ù…Ø³Ø¹ÙˆØ¯ Ø§Ù„Ø­ÙŠØ³ÙˆÙ†ÙŠ",
            "Ù†ÙˆØ§Ù Ù…Ù†ØµÙˆØ± Ø§Ù„ØµØ¨Ø­ÙŠ",
            "Ø¨Ø¯Ø± Ø¹Ø¨Ø¯Ø§Ù„Ø¹Ø²ÙŠØ² Ø§Ù„Ø³Ø­ÙŠÙ…ÙŠ",
            "ÙÙ‡Ø¯ Ø¹ÙˆÙŠØ¶ Ø§Ù„Ø´Ø§Ù…Ø§Ù†ÙŠ Ø§Ù„Ø­Ø±Ø¨ÙŠ"
        ];

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        function initializeSystem() {
            if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† ÙˆØ¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±ØŸ')) {
                teachers = [];
                
                // Ø¥Ø¶Ø§ÙØ© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
                excelTeachers.forEach(name => {
                    const substitutionReq = teacherSubstitutionRequirements[name] || 0;
                    teachers.push({
                        id: Date.now() + Math.random(),
                        name: name,
                        subject: "ØºÙŠØ± Ù…Ø­Ø¯Ø¯",
                        substituteCount: 0,
                        requiredSubstitutions: substitutionReq
                    });
                });
                
                renderTeachers();
                updateStats();
                saveAllData(); // âœ… Ø­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
                showNotification('ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­ Ù…Ø¹ ' + teachers.length + ' Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        // Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function saveAllData() {
            localStorage.setItem('teachers', JSON.stringify(teachers));
            localStorage.setItem('absences', JSON.stringify(absences));
            showNotification('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage
        function loadData() {
            const savedTeachers = localStorage.getItem('teachers');
            const savedAbsences = localStorage.getItem('absences');

            if (savedTeachers) {
                teachers = JSON.parse(savedTeachers);
                // âœ… Ø¯Ù…Ø¬ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø± Ø§Ù„ØµØ­ÙŠØ­
                teachers.forEach(t => {
                    t.requiredSubstitutions = teacherSubstitutionRequirements[t.name] || 0;
                });
            }
            if (savedAbsences) absences = JSON.parse(savedAbsences);
            
            renderAll();
        }

        // Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡!')) {
                teachers = [];
                absences = [];
                localStorage.clear();
                renderAll();
                showNotification('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }

        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.className = `mb-4 p-4 rounded-lg notification flex items-center gap-3 ${
                type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
            }`;
            notification.innerHTML = `
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${
                        type === 'success' 
                            ? 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'
                            : 'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'
                    }"></path>
                </svg>
                <span class="font-semibold">${message}</span>
            `;
            notification.classList.remove('hidden');
            setTimeout(() => notification.classList.add('hidden'), 3000);
        }

        // Ø§Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        function switchTab(tab) {
            const tabs = ['teachers', 'substitution', 'absences'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`tab-${t}`);
                const content = document.getElementById(`content-${t}`);
                if (t === tab) {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-active';
                    content.classList.remove('hidden');
                } else {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive';
                    content.classList.add('hidden');
                }
            });
        }

        // Ø¥Ø¶Ø§ÙØ© Ù…Ø¹Ù„Ù… Ø¬Ø¯ÙŠØ¯
        function addTeacher() {
            const name = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù…:');
            const subject = prompt('Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ:');
            if (name && subject) {
                const substitutionReq = teacherSubstitutionRequirements[name] || 0;
                teachers.push({
                    id: Date.now(),
                    name,
                    subject,
                    substituteCount: 0,
                    requiredSubstitutions: substitutionReq
                });
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù… Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // Ø­Ø°Ù Ù…Ø¹Ù„Ù…
        function deleteTeacher(id) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ù„Ù…ØŸ')) {
                teachers = teachers.filter(t => t.id !== id);
                renderTeachers();
                updateStats();
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ø¹Ù„Ù…', 'success');
            }
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø£ÙØ¶Ù„ Ø¨Ø¯ÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ø´Ø±ÙˆØ·
        function findBestSubstitute() {
            if (teachers.length === 0) {
                showNotification('ÙŠØ±Ø¬Ù‰ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù… Ø£ÙˆÙ„Ø§Ù‹ Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†', 'error');
                return;
            }

            const day = document.getElementById('substitution-day').value;
            const period = document.getElementById('substitution-period').value;
            
            const absentTeacherName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØºØ§Ø¦Ø¨:');
            if (!absentTeacherName) return;

            const availableTeachers = getAvailableTeachers(day, period, absentTeacherName);
            const rankedTeachers = rankTeachersByPriority(availableTeachers, day);

            displaySubstitutionResults(rankedTeachers, day, period, absentTeacherName);
        }

        // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ†
        function getAvailableTeachers(day, period, absentTeacher) {
            // ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø­Ø§Ù„ÙŠØŒ Ù†ÙØªØ±Ø¶ Ø£Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ù…ØªØ§Ø­ÙŠÙ†
            // ÙÙŠ Ù†Ø¸Ø§Ù… Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³Ù†ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ
            return teachers.filter(teacher => {
                // Ø§Ù„Ø´Ø±ÙˆØ· Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
                const isAvailable = teacher.name !== absentTeacher;
                
                // Ù„Ø§ ÙŠÙƒÙˆÙ† Ù‚Ø¯ Ø£Ø®Ø° Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ…
                const hasSubstitutionToday = absences.some(a => 
                    a.day === day && a.substitute === teacher.name
                );

                return isAvailable && !hasSubstitutionToday;
            });
        }

        // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
        function rankTeachersByPriority(availableTeachers, day) {
            return availableTeachers.map(teacher => {
                const requiredSubstitutions = teacher.requiredSubstitutions || 0;
                const currentSubstitutions = teacher.substituteCount || 0;
                const remainingSubstitutions = Math.max(0, requiredSubstitutions - currentSubstitutions);
                
                // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
                const daysWithoutSubstitution = calculateDaysWithoutSubstitution(teacher.name);
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
                let priorityScore = 0;
                
                // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù…Ù† Ù„Ø¯ÙŠÙ‡ Ø­ØµØµ Ø§Ù†ØªØ¸Ø§Ø± Ù…Ø·Ù„ÙˆØ¨Ø© Ø£ÙƒØ«Ø±
                priorityScore += remainingSubstitutions * 10;
                
                // Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ© Ù„Ù…Ù† Ù„Ù… ÙŠØ£Ø®Ø° Ø§Ù†ØªØ¸Ø§Ø± ÙÙŠ Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©
                priorityScore += daysWithoutSubstitution * 5;

                return {
                    ...teacher,
                    priorityScore: priorityScore,
                    remainingSubstitutions: remainingSubstitutions,
                    daysWithoutSubstitution: daysWithoutSubstitution
                };
            }).sort((a, b) => b.priorityScore - a.priorityScore);
        }

        // Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±
        function calculateDaysWithoutSubstitution(teacherName) {
            const today = new Date();
            const substitutionDays = absences
                .filter(a => a.substitute === teacherName)
                .map(a => new Date(a.date));
            
            if (substitutionDays.length === 0) return 7; // Ø£Ø³Ø¨ÙˆØ¹ ÙƒØ§Ù…Ù„
            
            const lastSubstitution = new Date(Math.max(...substitutionDays));
            const daysDiff = Math.floor((today - lastSubstitution) / (1000 * 60 * 60 * 24));
            
            return Math.min(7, daysDiff);
        }

        // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø¨Ø¯ÙŠÙ„
        function displaySubstitutionResults(rankedTeachers, day, period, absentTeacher) {
            const resultsDiv = document.getElementById('substitution-results');
            
            if (rankedTeachers.length === 0) {
                resultsDiv.innerHTML = `
                    <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                        <p class="text-red-700 font-semibold">âš ï¸ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø¹Ù„Ù…ÙˆÙ† Ù…ØªØ§Ø­ÙˆÙ† Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
                        <p class="text-red-600 text-sm mt-1">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø¥Ù…Ø§ Ù…Ø´ØºÙˆÙ„ÙˆÙ† Ø£Ùˆ Ù„Ø¯ÙŠÙ‡Ù… Ø£ÙƒØ«Ø± Ù…Ù† 5 Ø­ØµØµ ÙÙŠ Ø§Ù„ÙŠÙˆÙ…</p>
                    </div>
                `;
                return;
            }

            let html = `
                <div class="bg-green-50 p-4 rounded-lg border border-green-200 mb-4">
                    <h4 class="font-bold text-green-800">Ø§Ù„ØºØ§Ø¦Ø¨: ${absentTeacher}</h4>
                    <p class="text-green-600">Ø§Ù„ÙŠÙˆÙ…: ${day} - Ø§Ù„Ø­ØµØ©: ${period}</p>
                </div>
            `;

            rankedTeachers.slice(0, 5).forEach((teacher, index) => {
                const priorityClass = index === 0 ? 'priority-1' : 
                                   index === 1 ? 'priority-2' : 'priority-3';
                
                                html += `
                    <div class="p-4 rounded-lg ${priorityClass}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <h4 class="font-bold text-lg ${index === 0 ? 'text-green-700' : 'text-gray-700'}">
                                    ${index + 1}. ${teacher.name}
                                </h4>
                                <div class="grid grid-cols-2 gap-2 text-sm mt-2">
                                    <div><span class="text-gray-600">Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©:</span> <span class="font-semibold">${teacher.priorityScore}</span></div>
                                    <div><span class="text-gray-600">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ©:</span> <span class="font-semibold">${teacher.remainingSubstitutions}</span></div>
                                    <div><span class="text-gray-600">Ø£ÙŠØ§Ù… Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø±:</span> <span class="font-semibold">${teacher.daysWithoutSubstitution}</span></div>
                                    <div><span class="text-gray-600">Ø§Ù„Ø­ØµØµ Ø§Ù„Ù…Ù†Ø¬Ø²Ø©:</span> <span class="font-semibold">${teacher.substituteCount}/${teacher.requiredSubstitutions}</span></div>
                                </div>
                            </div>
                            ${index === 0 ? `
                                <button onclick="assignSubstitution('${teacher.name}', '${absentTeacher}', '${day}', '${period}')" 
                                        class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition text-sm">
                                    ØªØ¹ÙŠÙŠÙ†
                                </button>
                            ` : ''}
                        </div>
                    </div>
                `;
            });

            resultsDiv.innerHTML = html;
        }

        // ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
        function assignSubstitution(substituteName, absentTeacher, day, period) {
            // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„Ù…Ø¹Ù„Ù… Ø§Ù„Ø¨Ø¯ÙŠÙ„
            teachers = teachers.map(t =>
                t.name === substituteName
                    ? { ...t, substituteCount: (t.substituteCount || 0) + 1 }
                    : t
            );

            // ØªØ³Ø¬ÙŠÙ„ Ø­ØµØ© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
            absences.push({
                id: Date.now() + Math.random(),
                date: new Date().toLocaleDateString('ar-SA'),
                absentTeacher: absentTeacher,
                substitute: substituteName,
                day: day,
                period: period,
                subject: "Ø­ØµØ© Ø§Ù†ØªØ¸Ø§Ø±",
                className: "Ù…Ø®ØªÙ„ÙØ©"
            });

            renderTeachers();
            renderAbsences();
            updateStats();
            showNotification(`ØªÙ… ØªØ¹ÙŠÙŠÙ† ${substituteName} Ø¨Ø¯ÙŠÙ„Ø§Ù‹ Ø¹Ù† ${absentTeacher}`, 'success');
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            document.getElementById('substitution-results').innerHTML = `
                <div class="bg-green-100 p-4 rounded-lg border border-green-300">
                    <p class="text-green-700 font-semibold">âœ… ØªÙ… Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¨Ù†Ø¬Ø§Ø­</p>
                    <p class="text-green-600">Ø§Ù„Ù…Ø¹Ù„Ù… ${substituteName} ØªÙ… ØªØ¹ÙŠÙŠÙ†Ù‡ Ù„Ù„Ø§Ù†ØªØ¸Ø§Ø±</p>
                    <p class="text-green-500 text-sm mt-2">Ø§Ù„ÙŠÙˆÙ…: ${day} - Ø§Ù„Ø­ØµØ©: ${period}</p>
                </div>
            `;
        }

        // ØªØ³Ø¬ÙŠÙ„ ØºÙŠØ§Ø¨ Ù…Ø¹Ù„Ù…
        function markAbsent() {
            const absentTeacherName = prompt('Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø¹Ù„Ù… Ø§Ù„ØºØ§Ø¦Ø¨:');
            if (!absentTeacherName) return;

            // âœ… Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø­ØµØµ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ· ÙŠÙ…ÙƒÙ† ØªÙˆØ³ÙŠØ¹Ù‡)
            const realSchedule = [
                {day: 'Ø§Ù„Ø£Ø­Ø¯',   period: '1'},
                {day: 'Ø§Ù„Ø£Ø­Ø¯',   period: '2'},
                {day: 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', period: '3'},
                {day: 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',period: '4'},
                {day: 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',period: '5'},
                {day: 'Ø§Ù„Ø®Ù…ÙŠØ³',  period: '6'}
            ];

            let assignedCount = 0;

            realSchedule.forEach(({day, period}) => {
                const availableTeachers = getAvailableTeachers(day, period, absentTeacherName);
                const rankedTeachers = rankTeachersByPriority(availableTeachers, day);

                if (rankedTeachers.length > 0) {
                    const bestSubstitute = rankedTeachers[0];
                    teachers = teachers.map(t =>
                        t.name === bestSubstitute.name
                            ? {...t, substituteCount: (t.substituteCount || 0) + 1}
                            : t
                    );

                    absences.push({
                        id: Date.now() + Math.random(),
                        date: new Date().toLocaleDateString('ar-SA'),
                        absentTeacher: absentTeacherName,
                        substitute: bestSubstitute.name,
                        day,
                        period,
                        subject: "Ø­ØµØ© Ø§Ù†ØªØ¸Ø§Ø±",
                        className: "Ù…Ø®ØªÙ„ÙØ©"
                    });
                    assignedCount++;
                }
            });

            renderAbsences();
            renderTeachers();
            updateStats();
            showNotification(`ØªÙ… ØªØ¹ÙŠÙŠÙ† ${assignedCount} Ø­ØµØ© Ø§Ù†ØªØ¸Ø§Ø± Ù„Ù„ØºÙŠØ§Ø¨`, 'success');
        }

        // Ø­Ø°Ù Ø³Ø¬Ù„ ØºÙŠØ§Ø¨
        function deleteAbsence(id) {
            const absence = absences.find(a => a.id === id);
            if (absence && absence.substitute !== 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø¯ÙŠÙ„ Ù…ØªØ§Ø­') {
                // âœ… ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ù…Ø¹Ù„Ù… Ù„Ø§ ÙŠØ²Ø§Ù„ Ù…ÙˆØ¬ÙˆØ¯Ø§Ù‹
                const teacherExists = teachers.some(t => t.name === absence.substitute);
                if (teacherExists) {
                    teachers = teachers.map(t =>
                        t.name === absence.substitute && t.substituteCount > 0
                            ? {...t, substituteCount: t.substituteCount - 1}
                            : t
                    );
                }
            }
            
            absences = absences.filter(a => a.id !== id);
            renderAbsences();
            renderTeachers();
            updateStats();
            showNotification('ØªÙ… Ø­Ø°Ù Ø³Ø¬Ù„ Ø§Ù„ØºÙŠØ§Ø¨', 'success');
        }

        // ØªÙˆÙ„ÙŠØ¯ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
        function generatePriorityReport() {
            let html = '<div class="space-y-3 max-h-96 overflow-y-auto">';
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
            const sortedTeachers = [...teachers].sort((a, b) => {
                const aRemaining = Math.max(0, (a.requiredSubstitutions || 0) - (a.substituteCount || 0));
                const bRemaining = Math.max(0, (b.requiredSubstitutions || 0) - (b.substituteCount || 0));
                return bRemaining - aRemaining;
            });
            
            sortedTeachers.forEach(teacher => {
                const required = teacher.requiredSubstitutions || 0;
                const current = teacher.substituteCount || 0;
                const remaining = Math.max(0, required - current);
                const percentage = required > 0 ? Math.round((current / required) * 100) : 0;
                
                let status = '';
                let statusColor = '';
                let progressColor = '';
                
                if (required === 0) {
                    status = 'ØºÙŠØ± Ù…Ø·Ù„ÙˆØ¨';
                    statusColor = 'text-gray-600';
                    progressColor = 'bg-gray-200';
                } else if (remaining === 0) {
                    status = 'Ù…ÙƒØªÙ…Ù„ âœ…';
                    statusColor = 'text-green-600';
                    progressColor = 'bg-green-200';
                } else if (percentage >= 50) {
                    status = `Ù…ØªØ¨Ù‚ÙŠ ${remaining}`;
                    statusColor = 'text-orange-600';
                    progressColor = 'bg-orange-200';
                } else {
                    status = `Ù…ØªØ¨Ù‚ÙŠ ${remaining}`;
                    statusColor = 'text-red-600';
                    progressColor = 'bg-red-200';
                }
                
                html += `
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-semibold text-gray-800">${teacher.name}</h4>
                            <span class="${statusColor} font-semibold text-sm">${status}</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-600 mb-2">
                            <span>Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ${current}/${required}</span>
                            <span>${percentage}% Ù…ÙƒØªÙ…Ù„</span>
                        </div>
                        ${required > 0 ? `
                            <div class="w-full bg-gray-200 rounded-full h-1.5">
                                <div class="${progressColor} h-1.5 rounded-full" style="width: ${percentage}%"></div>
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            html += '</div>';
            
            // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
            const reportWindow = window.open('', 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª', 'width=600,height=700');
            reportWindow.document.write(`
                <html dir="rtl">
                <head>
                    <title>ØªÙ‚Ø±ÙŠØ± Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</title>
                    <script src="https://cdn.tailwindcss.com"><\/script>
                    <style>
                        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; }
                    </style>
                </head>
                <body class="bg-gray-50">
                    <div class="bg-white rounded-lg shadow-lg p-6 max-w-4xl mx-auto">
                        <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">ØªÙ‚Ø±ÙŠØ± Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h1>
                        ${html}
                        <div class="mt-6 text-center text-gray-500 text-sm">
                            ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${new Date().toLocaleString('ar-SA')}
                        </div>
                    </div>
                </body>
                </html>
            `);
            reportWindow.document.close();
        }

        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
        function renderTeachers() {
            const list = document.getElementById('teachers-list');
            if (teachers.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <p class="text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„Ù…ÙŠÙ† Ø¨Ø¹Ø¯. Ø§Ø¨Ø¯Ø£ Ø¨ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…!</p>
                        <button onclick="initializeSystem()" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
                            ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
                        </button>
                    </div>
                `;
            } else {
                list.innerHTML = teachers.map(teacher => {
                    const required = teacher.requiredSubstitutions || 0;
                    const current = teacher.substituteCount || 0;
                    const remaining = Math.max(0, required - current);
                    const percentage = required > 0 ? Math.round((current / required) * 100) : 0;
                    
                    let statusBadge = '';
                    if (required === 0) {
                        statusBadge = '<span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs">ØºÙŠØ± Ù…Ø·Ù„ÙˆØ¨</span>';
                    } else if (remaining === 0) {
                        statusBadge = '<span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Ù…ÙƒØªÙ…Ù„</span>';
                    } else if (percentage >= 50) {
                        statusBadge = `<span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">Ù…ØªØ¨Ù‚ÙŠ ${remaining}</span>`;
                    } else {
                        statusBadge = `<span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Ù…ØªØ¨Ù‚ÙŠ ${remaining}</span>`;
                    }
                    
                    return `
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <h3 class="font-bold text-lg text-gray-800">${teacher.name}</h3>
                                    ${statusBadge}
                                </div>
                                <p class="text-gray-600">Ø§Ù„ØªØ®ØµØµ: ${teacher.subject}</p>
                                <div class="flex gap-4 text-sm mt-1">
                                    <p class="text-indigo-600">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ${current}/${required}</p>
                                    <p class="text-blue-600">Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²: ${percentage}%</p>
                                </div>
                                ${required > 0 ? `
                                    <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                        <div class="bg-green-500 h-1.5 rounded-full" style="width: ${percentage}%"></div>
                                    </div>
                                ` : ''}
                            </div>
                            <button onclick="deleteTeacher(${teacher.id})" class="text-red-600 hover:bg-red-100 p-2 rounded-lg transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    `;
                }).join('');
            }
        }

        // Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØºÙŠØ§Ø¨
        function renderAbsences() {
            const list = document.getElementById('absences-list');
            if (absences.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zMØ§Ø¨', 'success');
        }

        // ØªÙˆÙ„ÙŠØ¯ ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª
        function generatePriorityReport() {
            let html = '<div class="space-y-3 max-h-96 overflow-y-auto">';
            
            // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ† Ø­Ø³Ø¨ Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©
            const sortedTeachers = [...teachers].sort((a, b) => {
                const aRemaining = Math.max(0, (a.requiredSubstitutions || 0) - (a.substituteCount || 0));
                const bRemaining = Math.max(0, (b.requiredSubstitutions || 0) - (b.substituteCount || 0));
                return bRemaining - aRemaining;
            });
            
            sortedTeachers.forEach(teacher => {
                const required = teacher.requiredSubstitutions || 0;
                const current = teacher.substituteCount || 0;
                const remaining = Math.max(0, required - current);
                const percentage = required > 0 ? Math.round((current / required) * 100) : 0;
                
                let status = '';
                let statusColor = '';
                let progressColor = '';
                
                if (required === 0) {
                    status = 'ØºÙŠØ± Ù…Ø·Ù„ÙˆØ¨';
                    statusColor = 'text-gray-600';
                    progressColor = 'bg-gray-200';
                } else if (remaining === 0) {
                    status = 'Ù…ÙƒØªÙ…Ù„ âœ…';
                    statusColor = 'text-green-600';
                    progressColor = 'bg-green-200';
                } else if (percentage >= 50) {
                    status = `Ù…ØªØ¨Ù‚ÙŠ ${remaining}`;
                    statusColor = 'text-orange-600';
                    progressColor = 'bg-orange-200';
                } else {
                    status = `Ù…ØªØ¨Ù‚ÙŠ ${remaining}`;
                    statusColor = 'text-red-600';
                    progressColor = 'bg-red-200';
                }
                
                html += `
                    <div class="bg-white p-4 rounded-lg border border-gray-200">
                        <div class="flex justify-between items-center mb-2">
                            <h4 class="font-semibold text-gray-800">${teacher.name}</h4>
                            <span class="${statusColor} font-semibold text-sm">${status}</span>
                        </div>
                        <div class="flex justify-between items-center text-sm text-gray-600 mb-2">
                            <span>Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ${current}/${required}</span>
                            <span>${percentage}% Ù…ÙƒØªÙ…Ù„</span>
                        </div>
                        ${required > 0 ? `
                            <div class="w-full bg-gray-200 rounded-full h-1.5">
                                <div class="${progressColor} h-1.5 rounded-full" style="width: ${percentage}%"></div>
                            </div>
                        ` : ''}
                    </div>
                `;
            });
            
            html += '</div>';
            
            // Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ± ÙÙŠ Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
            const reportWindow = window.open('', 'ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ§Øª', 'width=600,height=700');
            reportWindow.document.write(`
                <html dir="rtl">
                <head>
                    <title>ØªÙ‚Ø±ÙŠØ± Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†</title>
                    <script src="https://cdn.tailwindcss.com"></script>
                    <style>
                        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; padding: 20px; }
                    </style>
                </head>
                <body class="bg-gray-50">
                    <div class="bg-white rounded-lg shadow-lg p-6 max-w-4xl mx-auto">
                        <h1 class="text-2xl font-bold text-center text-gray-800 mb-6">ØªÙ‚Ø±ÙŠØ± Ø£ÙˆÙ„ÙˆÙŠØ§Øª Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</h1>
                        ${html}
                        <div class="mt-6 text-center text-gray-500 text-sm">
                            ØªÙ… Ø§Ù„ØªØ­Ø¯ÙŠØ«: ${new Date().toLocaleString('ar-SA')}
                        </div>
                    </div>
                </body>
                </html>
            `);
            reportWindow.document.close();
        }

        // Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø¹Ù„Ù…ÙŠÙ†
        function renderTeachers() {
            const list = document.getElementById('teachers-list');
            if (teachers.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <p class="text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø¹Ù„Ù…ÙŠÙ† Ø¨Ø¹Ø¯. Ø§Ø¨Ø¯Ø£ Ø¨ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…!</p>
                        <button onclick="initializeSystem()" class="mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
                            ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
                        </button>
                    </div>
                `;
            } else {
                list.innerHTML = teachers.map(teacher => {
                    const required = teacher.requiredSubstitutions || 0;
                    const current = teacher.substituteCount || 0;
                    const remaining = Math.max(0, required - current);
                    const percentage = required > 0 ? Math.round((current / required) * 100) : 0;
                    
                    let statusBadge = '';
                    if (required === 0) {
                        statusBadge = '<span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-full text-xs">ØºÙŠØ± Ù…Ø·Ù„ÙˆØ¨</span>';
                    } else if (remaining === 0) {
                        statusBadge = '<span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Ù…ÙƒØªÙ…Ù„</span>';
                    } else if (percentage >= 50) {
                        statusBadge = `<span class="bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs">Ù…ØªØ¨Ù‚ÙŠ ${remaining}</span>`;
                    } else {
                        statusBadge = `<span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">Ù…ØªØ¨Ù‚ÙŠ ${remaining}</span>`;
                    }
                    
                    return `
                        <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2">
                                    <h3 class="font-bold text-lg text-gray-800">${teacher.name}</h3>
                                    ${statusBadge}
                                </div>
                                <p class="text-gray-600">Ø§Ù„ØªØ®ØµØµ: ${teacher.subject}</p>
                                <div class="flex gap-4 text-sm mt-1">
                                    <p class="text-indigo-600">Ø­ØµØµ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±: ${current}/${required}</p>
                                    <p class="text-blue-600">Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²: ${percentage}%</p>
                                </div>
                                ${required > 0 ? `
                                    <div class="w-full bg-gray-200 rounded-full h-1.5 mt-2">
                                        <div class="bg-green-500 h-1.5 rounded-full" style="width: ${percentage}%"></div>
                                    </div>
                                ` : ''}
                            </div>
                            <button onclick="deleteTeacher(${teacher.id})" class="text-red-600 hover:bg-red-100 p-2 rounded-lg transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    `;
                }).join('');
            }
        }

        // Ø¹Ø±Ø¶ Ø³Ø¬Ù„Ø§Øª Ø§Ù„ØºÙŠØ§Ø¨
        function renderAbsences() {
            const list = document.getElementById('absences-list');
            if (absences.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <p class="text-lg">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³Ø¬Ù„Ø§Øª ØºÙŠØ§Ø¨ Ø­ØªÙ‰ Ø§Ù„Ø¢Ù†</p>
                    </div>
                `;
            } else {
                list.innerHTML = absences.map(absence => `
                    <div class="p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border-r-4 ${absence.substitute === 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø¯ÙŠÙ„ Ù…ØªØ§Ø­' ? 'border-red-500' : 'border-orange-500'}">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2 flex-wrap">
                                    <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">ØºØ§Ø¦Ø¨</span>
                                    <span class="font-bold text-lg">${absence.absentTeacher}</span>
                                    ${absence.substitute !== 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø¯ÙŠÙ„ Ù…ØªØ§Ø­' ? 
                                        `<span class="bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold">Ø¨Ø¯ÙŠÙ„: ${absence.substitute}</span>` :
                                        `<span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø¨Ø¯ÙŠÙ„</span>`
                                    }
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                                    <div><span class="text-gray-600">Ø§Ù„ØªØ§Ø±ÙŠØ®:</span> <span class="font-semibold">${absence.date}</span></div>
                                    <div><span class="text-gray-600">Ø§Ù„ÙŠÙˆÙ…:</span> <span class="font-semibold">${absence.day}</span></div>
                                    <div><span class="text-gray-600">Ø§Ù„Ø­ØµØ©:</span> <span class="font-semibold">${absence.period}</span></div>
                                    <div><span class="text-gray-600">Ø§Ù„Ù…Ø§Ø¯Ø©:</span> <span class="font-semibold">${absence.subject}</span></div>
                                </div>
                            </div>
                            <button onclick="deleteAbsence(${absence.id})" class="text-red-600 hover:bg-red-100 p-2 rounded-lg transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            document.getElementById('stat-teachers').textContent = teachers.length;
            document.getElementById('stat-absences').textContent = absences.length;
        }

        // Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
        function renderAll() {
            renderTeachers();
            renderAbsences();
            updateStats();
        }

        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            loadData();
        };
    </script>
</body>
</html>
