<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุธุงู ุฅุฏุงุฑุฉ ุญุตุต ุงูุงูุชุธุงุฑ ุงููุฏุฑุณูุฉ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .tab-active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .tab-inactive {
            color: #4a5568;
        }
        .tab-inactive:hover {
            background-color: #f7fafc;
        }
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        .notification {
            animation: slideIn 0.3s ease-out;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen p-4">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-lg p-6 mb-6">
            <div class="flex flex-col md:flex-row items-center justify-between gap-4">
                <div class="flex items-center gap-3">
                    <svg class="w-10 h-10 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <div>
                        <h1 class="text-3xl font-bold text-gray-800">ูุธุงู ุฅุฏุงุฑุฉ ุญุตุต ุงูุงูุชุธุงุฑ</h1>
                        <p class="text-gray-600">ุฅุฏุงุฑุฉ ุฐููุฉ ูููุนูููู ูุงูุฌุฏุงูู ุงููุฏุฑุณูุฉ</p>
                    </div>
                </div>
                <div class="flex gap-2 flex-wrap">
                    <button onclick="saveAllData()" class="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"></path>
                        </svg>
                        ุญูุธ ุงูุจูุงูุงุช
                    </button>
                    <button onclick="clearAllData()" class="flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                        </svg>
                        ูุณุญ ุงููู
                    </button>
                </div>
            </div>
        </div>

        <!-- Notification -->
        <div id="notification" class="hidden mb-4 p-4 rounded-lg notification"></div>

        <!-- Tabs -->
        <div class="bg-white rounded-lg shadow-lg mb-6">
            <div class="flex flex-col md:flex-row border-b">
                <button onclick="switchTab('teachers')" id="tab-teachers" class="flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-active">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    ุงููุนูููู
                </button>
                <button onclick="switchTab('schedule')" id="tab-schedule" class="flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    ุงูุฌุฏูู ุงููุฏุฑุณู
                </button>
                <button onclick="switchTab('absences')" id="tab-absences" class="flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    ุญุตุต ุงูุงูุชุธุงุฑ
                </button>
            </div>
        </div>

        <!-- Content -->
        <div class="bg-white rounded-lg shadow-lg p-6">
            <!-- Teachers Tab -->
            <div id="content-teachers" class="tab-content">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h2 class="text-2xl font-bold text-gray-800">ูุงุฆูุฉ ุงููุนูููู</h2>
                    <button onclick="addTeacher()" class="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition w-full md:w-auto justify-center">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        ุฅุถุงูุฉ ูุนูู
                    </button>
                </div>
                <div id="teachers-list" class="grid gap-4"></div>
            </div>

            <!-- Schedule Tab -->
            <div id="content-schedule" class="tab-content hidden">
                <!-- ุฃุฏุงุฉ ุงุณุชูุฑุงุฏ ุงูุฌุฏูู -->
                <div class="mb-6 bg-blue-50 p-4 rounded-lg border border-blue-200">
                    <h3 class="text-lg font-bold text-blue-800 mb-2">ุงุณุชูุฑุงุฏ ุงูุฌุฏูู ุงููุฏุฑุณู</h3>
                    <p class="text-blue-600 mb-3">ุงูุตู ุงูุฌุฏูู ุงููุงูู ูู ููุตุฉ ูุฏุฑุณุชู ูุณูุชู ูุนุงูุฌุชู ุชููุงุฆูุงู</p>
                    <textarea id="schedule-paste-area" rows="10" class="w-full p-3 border border-blue-300 rounded-lg" placeholder="ุงูุตู ุงูุฌุฏูู ุงููุงูู ููุง..."></textarea>
                    <div class="flex gap-2 mt-2">
                        <button onclick="processPastedSchedule()" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition">
                            ูุนุงูุฌุฉ ุงูุฌุฏูู ุชููุงุฆูุงู
                        </button>
                        <button onclick="addBulkEntry()" class="bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition">
                            ุฅุฏุฎุงู ุฌูุงุนู
                        </button>
                    </div>
                </div>

                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h2 class="text-2xl font-bold text-gray-800">ุงูุฌุฏูู ุงููุฏุฑุณู</h2>
                    <button onclick="addScheduleEntry()" class="flex items-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition w-full md:w-auto justify-center">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
                        </svg>
                        ุฅุถุงูุฉ ุญุตุฉ
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <div id="schedule-list"></div>
                </div>
            </div>

            <!-- Absences Tab -->
            <div id="content-absences" class="tab-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-center mb-6 gap-4">
                    <h2 class="text-2xl font-bold text-gray-800">ุฅุฏุงุฑุฉ ุญุตุต ุงูุงูุชุธุงุฑ</h2>
                    <button onclick="markAbsent()" class="flex items-center gap-2 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition w-full md:w-auto justify-center">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        ุชุณุฌูู ุบูุงุจ ูุนูู
                    </button>
                </div>
                <div id="absences-list" class="space-y-4"></div>
            </div>
        </div>

        <!-- Statistics -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6">
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <div>
                        <p class="text-gray-600 text-sm">ุนุฏุฏ ุงููุนูููู</p>
                        <p id="stat-teachers" class="text-3xl font-bold text-gray-800">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div>
                        <p class="text-gray-600 text-sm">ุนุฏุฏ ุงูุญุตุต</p>
                        <p id="stat-schedule" class="text-3xl font-bold text-gray-800">0</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg shadow-lg p-6">
                <div class="flex items-center gap-3">
                    <svg class="w-8 h-8 text-orange-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <div>
                        <p class="text-gray-600 text-sm">ุญุตุต ุงูุงูุชุธุงุฑ</p>
                        <p id="stat-absences" class="text-3xl font-bold text-gray-800">0</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let teachers = [];
        let schedule = [];
        let absences = [];

        // ูุงุฆูุฉ ุงููุนูููู ุงููุณุชุฎุฑุฌุฉ ูู Excel
        const excelTeachers = [
            "ุนุจุฏุงููู ุจู ูุทุฑ ุจู ูุตูุญ ุงูุนูุฑู",
            "ูุญูุฏ ุจู ุนูุงุฑู ุฑุงุถู ุงูุฒูุฑุงูู",
            "ูููู ูุฑุฒูู ุณููุฑุญ ุงูุณุญููู",
            "ููุงุฒ ุฒุงูุฏ ูุงูู ุงูููููุฒู ุงูุฑุดูุฏู",
            "ููุตู ุนุทุงููู ุญูููุฏ ุงูุตุงุนุฏู",
            "ุงุจุฑุงููู ุนูุงุฏ ุนูุฏ ุงูุนููู",
            "ุนุจุฏุงููู ุญููุฏ ุญุงูุฏ ุงูุญุฑุจู",
            "ุณุงูุฑ ููุตู ุณุนุฏ ุงููู ุงูุนุถููู ุงููุทูุฑู",
            "ูุงูุน ุดุนูู ูุงูุน ุงููุทูุฑู",
            "ุงุณุงูู ูููุฑ ูุดุนู ุงูุนููู",
            "ูุญูุฏ ุนูุงุฏ ุนููุซู ุงูุนููู",
            "ุฃุญูุฏ ุฅุจุฑุงููู ูุฎุฑู ุงูุชุฑูู",
            "ุฃุญูุฏ ุญุงูุฏ ููุงู ุงูุญุฑุจู",
            "ูููุงู ุนูู ูููุงู ุงูุญุฑุจู",
            "ุนุจุฏุงููู ุตูุงุญ ุตุงูุญ ุงูุฑุญููู",
            "ูุดุนู ุจู ูููู ุจู ุบุงูุจ ุงูุนูุฑู ุงูุญุฑุจู",
            "ุนูู ูุชุนุจ ูุงุตุฑ ุงูุนููู ุงูุญุฑุจู",
            "ุณูู ุนุจุฏุงูููุนู ุญูุฏุงู ุงูุนุงุฑุถู",
            "ูุญูุฏ ุจู ุฐุนุงุฑ ุจู ุตุงูุญ ุงูุนููู",
            "ูุคุงุฏ ุจู ูุญูุฏ ุจู ุญูุงุฏ ุงูุนุชูุจู",
            "ุญูุฒุฉ ุตุฏูุฉ ุญูุฒุฉ ุงุณูุงู",
            "ุณููุงู ุตุงูุญ ุฃุญูุฏ ุงูุญุงุฑุซู",
            "ุนุจูุฏ ุจู ุฏุฎูู ุจู ุฏููููุณ ุงูุนูุงุถู ุงูุญุฑุจู",
            "ุนุจุฏุงูุนุฒูุฒ ูููุญ ูููุนู ุงูุฑููุซู",
            "ููุตู ุนูุงุฏ ูุญูุฏ ุฃุจู ุณููู",
            "ุนุจุฏุงููู ุจู ูุญูุฏ ุจู ุณุนูุฏ ุงู ุจุญุฑุงู ุงููุฑูู",
            "ูุงุชุจ ูููุญ ุณูููุงู ุงูุฑุดูุฏู",
            "ุญุจูุจ ุนูู ูุนูุณ ุงูุนูุฑู ุงูุญุฑุจู",
            "ุงุจุฑุงููู ุนุงูุถ ุนูุถ ุงูุฌุงุจุฑู",
            "ุณูุทุงู ุนููุถ ูุนูุถ ุงูุณุญููู",
            "ุนุจุฏุงููุงุฏู ูุนูุถ ูุนูุง ุงูุดุงูุงูู",
            "ุนุจุฏุงูุนุฒูุฒ ุนุจุฏุงูุฑุญูู ุบูุงุจ ุงููุฎููู",
            "ุณุนุฏ ุทุงูุน ุญููุฏ ุงูุญุฑุจู",
            "ูุงูุฑ ูุดุนู ุนููุฏ ุงููุทูุฑู",
            "ููุณู ุบุงุฒู ุณูุฑ ุงูุญุฑุจู",
            "ููุณู ูุณุนูุฏ ุนุงูุถ ุงูุญูุณููู",
            "ููุงู ููุตูุฑ ุนูุงุฏ ุงูุตุจุญู",
            "ุจุฏุฑ ุนุจุฏุงูุนุฒูุฒ ุดุงุฆุฏ ุงูุณุญููู",
            "ููุฏ ุนููุถ ุนูุถ ุงูุดุงูุงูู ุงูุญุฑุจู"
        ];

        // ุฏูุฌ ุฃุณูุงุก Excel ูุน ุงูุจูุงูุงุช ุงูููุฌูุฏุฉ
        function mergeExcelTeachers() {
            const existingNames = new Set(teachers.map(t => t.name));
            excelTeachers.forEach(name => {
                if (!existingNames.has(name)) {
                    teachers.push({
                        id: Date.now() + Math.random(),
                        name: name,
                        subject: "ุบูุฑ ูุญุฏุฏ",
                        substituteCount: 0
                    });
                }
            });
        }

        // ุชุญููู ุงูุจูุงูุงุช ูู localStorage
        function loadData() {
            const savedTeachers = localStorage.getItem('teachers');
            const savedSchedule = localStorage.getItem('schedule');
            const savedAbsences = localStorage.getItem('absences');

            if (savedTeachers) teachers = JSON.parse(savedTeachers);
            if (savedSchedule) schedule = JSON.parse(savedSchedule);
            if (savedAbsences) absences = JSON.parse(savedAbsences);

            // ุฏูุฌ ุฃุณูุงุก Excel ูุน ุงูุจูุงูุงุช ุงููุญููุธุฉ
            mergeExcelTeachers();
            
            renderAll();
        }

        // ุญูุธ ุฌููุน ุงูุจูุงูุงุช
        function saveAllData() {
            localStorage.setItem('teachers', JSON.stringify(teachers));
            localStorage.setItem('schedule', JSON.stringify(schedule));
            localStorage.setItem('absences', JSON.stringify(absences));
            showNotification('ุชู ุญูุธ ุงูุจูุงูุงุช ุจูุฌุงุญ', 'success');
        }

        // ูุณุญ ุฌููุน ุงูุจูุงูุงุช
        function clearAllData() {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ุฌููุน ุงูุจูุงูุงุชุ ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก!')) {
                teachers = [];
                schedule = [];
                absences = [];
                localStorage.clear();
                renderAll();
                showNotification('ุชู ุญุฐู ุฌููุน ุงูุจูุงูุงุช', 'success');
            }
        }

        // ุฅุธูุงุฑ ุงูุฅุดุนุงุฑุงุช
        function showNotification(message, type) {
            const notification = document.getElementById('notification');
            notification.className = `mb-4 p-4 rounded-lg notification flex items-center gap-3 ${
                type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
            }`;
            notification.innerHTML = `
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="${
                        type === 'success' 
                            ? 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z'
                            : 'M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'
                    }"></path>
                </svg>
                <span class="font-semibold">${message}</span>
            `;
            notification.classList.remove('hidden');
            setTimeout(() => notification.classList.add('hidden'), 3000);
        }

        // ุงูุชุจุฏูู ุจูู ุงูุชุจููุจุงุช
        function switchTab(tab) {
            const tabs = ['teachers', 'schedule', 'absences'];
            tabs.forEach(t => {
                const tabBtn = document.getElementById(`tab-${t}`);
                const content = document.getElementById(`content-${t}`);
                if (t === tab) {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-active';
                    content.classList.remove('hidden');
                } else {
                    tabBtn.className = 'flex-1 flex items-center justify-center gap-2 px-6 py-4 font-semibold transition tab-inactive';
                    content.classList.add('hidden');
                }
            });
        }

        // ุฅุถุงูุฉ ูุนูู ุฌุฏูุฏ
        function addTeacher() {
            const name = prompt('ุฃุฏุฎู ุงุณู ุงููุนูู:');
            const subject = prompt('ุฃุฏุฎู ุงูุชุฎุตุต:');
            if (name && subject) {
                teachers.push({
                    id: Date.now(),
                    name,
                    subject,
                    substituteCount: 0
                });
                renderTeachers();
                updateStats();
                showNotification('ุชู ุฅุถุงูุฉ ุงููุนูู ุจูุฌุงุญ', 'success');
            }
        }

        // ุญุฐู ูุนูู
        function deleteTeacher(id) {
            if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุนููุ')) {
                teachers = teachers.filter(t => t.id !== id);
                renderTeachers();
                updateStats();
                showNotification('ุชู ุญุฐู ุงููุนูู', 'success');
            }
        }

        // ุฅุถุงูุฉ ุญุตุฉ ููุฌุฏูู
        function addScheduleEntry() {
            const teacherName = prompt('ุงุณู ุงููุนูู:');
            const day = prompt('ุงูููู (ุงูุฃุญุฏุ ุงูุงุซูููุ ุงูุซูุงุซุงุกุ ุงูุฃุฑุจุนุงุกุ ุงูุฎููุณ):');
            const period = prompt('ุฑูู ุงูุญุตุฉ (1-7):');
            const subject = prompt('ุงููุงุฏุฉ:');
            const className = prompt('ุงูุตู:');

            if (teacherName && day && period && subject && className) {
                schedule.push({
                    id: Date.now(),
                    teacherName,
                    day,
                    period,
                    subject,
                    className
                });
                renderSchedule();
                updateStats();
                showNotification('ุชู ุฅุถุงูุฉ ุงูุญุตุฉ ููุฌุฏูู', 'success');
            }
        }

        // ุญุฐู ุญุตุฉ ูู ุงูุฌุฏูู
        function deleteSchedule(id) {
            schedule = schedule.filter(s => s.id !== id);
            renderSchedule();
            updateStats();
            showNotification('ุชู ุญุฐู ุงูุญุตุฉ', 'success');
        }

        // ุงูุจุญุซ ุนู ูุนูู ุจุฏูู
        function findSubstitute(absentTeacher, day, period) {
            const busyTeachers = schedule
                .filter(s => s.day === day && s.period === period)
                .map(s => s.teacherName);

            const availableTeachers = teachers
                .filter(t => t.name !== absentTeacher && !busyTeachers.includes(t.name))
                .sort((a, b) => a.substituteCount - b.substituteCount);

            return availableTeachers[0] || null;
        }

        // ุชุณุฌูู ุบูุงุจ ูุนูู
        function markAbsent() {
            const absentTeacherName = prompt('ุฃุฏุฎู ุงุณู ุงููุนูู ุงูุบุงุฆุจ:');
            if (!absentTeacherName) return;

            const todaySchedule = schedule.filter(s => s.teacherName === absentTeacherName);

            if (todaySchedule.length === 0) {
                showNotification('ูุง ุชูุฌุฏ ุญุตุต ููุฐุง ุงููุนูู ูู ุงูุฌุฏูู', 'error');
                return;
            }

            todaySchedule.forEach(entry => {
                const substitute = findSubstitute(absentTeacherName, entry.day, entry.period);

                if (substitute) {
                    teachers = teachers.map(t =>
                        t.id === substitute.id
                            ? { ...t, substituteCount: t.substituteCount + 1 }
                            : t
                    );

                    absences.push({
                        id: Date.now() + Math.random(),
                        date: new Date().toLocaleDateString('ar-SA'),
                        absentTeacher: absentTeacherName,
                        substitute: substitute.name,
                        day: entry.day,
                        period: entry.period,
                        subject: entry.subject,
                        className: entry.className
                    });
                } else {
                    absences.push({
                        id: Date.now() + Math.random(),
                        date: new Date().toLocaleDateString('ar-SA'),
                        absentTeacher: absentTeacherName,
                        substitute: 'ูุง ููุฌุฏ ุจุฏูู ูุชุงุญ',
                        day: entry.day,
                        period: entry.period,
                        subject: entry.subject,
                        className: entry.className
                    });
                }
            });

            renderAbsences();
            renderTeachers();
            updateStats();
            showNotification(`ุชู ุชุนููู ุงูุจุฏูุงุก ูู ${todaySchedule.length} ุญุตุฉ`, 'success');
        }

        // ุญุฐู ุณุฌู ุบูุงุจ
        function deleteAbsence(id) {
            absences = absences.filter(a => a.id !== id);
            renderAbsences();
            updateStats();
            showNotification('ุชู ุญุฐู ุณุฌู ุงูุบูุงุจ', 'success');
        }

        // ========== ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ==========

        // ูุนุงูุฌุฉ ุงูุฌุฏูู ุงููุฏุฑุณู ุงูููุณูุฎ
        function processPastedSchedule() {
            const pasteArea = document.getElementById('schedule-paste-area');
            const data = pasteArea.value.trim();
            
            if (!data) {
                showNotification('ูุฑุฌู ูุตู ุงูุฌุฏูู ุฃููุงู', 'error');
                return;
            }

            const lines = data.split('\n').filter(line => line.trim());
            let scheduleEntries = [];
            let currentClass = '';
            let currentDay = '';
            let currentPeriod = 1;

            lines.forEach(line => {
                line = line.trim();
                
                // ุงูุชุดุงู ุงูุตู
                if (line.includes('ุงูุซุงูุซ') || line.includes('ุงูุซุงูู') || line.includes('ุงูุฃูู')) {
                    currentClass = extractClassName(line);
                    return;
                }
                
                // ุงูุชุดุงู ุงูููู
                const days = ['ุงูุฃุญุฏ', 'ุงูุงุซููู', 'ุงูุซูุงุซุงุก', 'ุงูุฃุฑุจุนุงุก', 'ุงูุฎููุณ'];
                const foundDay = days.find(day => line.includes(day));
                if (foundDay) {
                    currentDay = foundDay;
                    currentPeriod = 1;
                    return;
                }
                
                // ุงูุชุดุงู ุงูุญุตุฉ
                if (line.includes('ุงูุญุตุฉ')) {
                    currentPeriod = extractPeriodNumber(line);
                    return;
                }
                
                // ุงุณุชุฎุฑุงุฌ ุจูุงูุงุช ุงูุญุตุฉ
                const periodData = extractPeriodData(line, currentClass, currentDay, currentPeriod);
                if (periodData) {
                    scheduleEntries.push(periodData);
                    currentPeriod++;
                }
            });

            // ุฅุถุงูุฉ ุงูุญุตุต ุฅูู ุงูุฌุฏูู
            let addedCount = 0;
            scheduleEntries.forEach(entry => {
                if (isValidScheduleEntry(entry)) {
                    // ุชุฌูุจ ุงูุชูุฑุงุฑ
                    const exists = schedule.some(s => 
                        s.teacherName === entry.teacher && 
                        s.day === entry.day && 
                        s.period === entry.period && 
                        s.className === entry.className
                    );
                    
                    if (!exists) {
                        schedule.push({
                            id: Date.now() + Math.random(),
                            teacherName: entry.teacher,
                            day: entry.day,
                            period: entry.period,
                            subject: entry.subject,
                            className: entry.className
                        });
                        addedCount++;
                    }
                }
            });

            renderSchedule();
            updateStats();
            showNotification(`ุชูุช ุฅุถุงูุฉ ${addedCount} ุญุตุฉ ุจูุฌุงุญ`, 'success');
            pasteArea.value = '';
        }

        // ุงุณุชุฎุฑุงุฌ ุงุณู ุงูุตู
        function extractClassName(line) {
            const classMatch = line.match(/(ุงูุซุงูุซ|ุงูุซุงูู|ุงูุฃูู)\s*-\s*[\dูกูขูฃูคูฅูฆ]/);
            return classMatch ? classMatch[0] : '';
        }

        // ุงุณุชุฎุฑุงุฌ ุฑูู ุงูุญุตุฉ
        function extractPeriodNumber(line) {
            const periodMatch = line.match(/ุงูุญุตุฉ\s*(\d+)/);
            return periodMatch ? parseInt(periodMatch[1]) : 1;
        }

        // ุงุณุชุฎุฑุงุฌ ุจูุงูุงุช ุงูุญุตุฉ
        function extractPeriodData(line, className, day, period) {
            if (!line || line.includes('ุงูููู') || line.includes('ุงูุญุตุฉ') || !className || !day) {
                return null;
            }

            // ุงุณุชุฎุฑุงุฌ ุงููุงุฏุฉ ูุงููุนูู
            const subjectMatch = line.match(/^([^:]+)/);
            const teacherMatch = line.match(/ุงููุนูู\s*:\s*([^\.]+)/);
            
            if (subjectMatch && teacherMatch) {
                return {
                    subject: subjectMatch[1].trim(),
                    teacher: teacherMatch[1].trim(),
                    className: className,
                    day: day,
                    period: period
                };
            }
            
            return null;
        }

        // ุงูุชุญูู ูู ุตุญุฉ ุจูุงูุงุช ุงูุญุตุฉ
        function isValidScheduleEntry(entry) {
            return entry.teacher && entry.subject && entry.className && entry.day && entry.period;
        }

        // ุฅุฏุฎุงู ุฌูุงุนู ููุจูุงูุงุช
        function addBulkEntry() {
            const bulkData = prompt(`๐ ุฃุฏุฎู ุจูุงูุงุช ุงูุญุตุต (ุณุทุฑ ููู ุญุตุฉ - ููุตููุฉ ุจูุงุตูุฉ):
            
ุงูุตูุบุฉ: ุงููุนูู,ุงูููู,ุงูุญุตุฉ,ุงููุงุฏุฉ,ุงูุตู

ุฃูุซูุฉ:
ูุญูุฏ ุฃุญูุฏ, ุงูุฃุญุฏ, 1, ุฑูุงุถูุงุช, ุฃูู/ุฃ
ุนูู ุณุงูู, ุงูุฃุญุฏ, 2, ุนููู, ุซุงูู/ุจ
ูุงุทูุฉ ูุญูุฏ, ุงูุฃุญุฏ, 3, ูุบุฉ ุนุฑุจูุฉ, ุซุงูุซ/ุฌ`);

            if (bulkData) {
                const lines = bulkData.split('\n');
                let added = 0;
                
                lines.forEach(line => {
                    const [teacher, day, period, subject, className] = line.split(',').map(item => item.trim());
                    if (teacher && day && period && subject && className) {
                        schedule.push({
                            id: Date.now() + Math.random(),
                            teacherName: teacher,
                            day: day,
                            period: period,
                            subject: subject,
                            className: className
                        });
                        added++;
                    }
                });
                
                renderSchedule();
                updateStats();
                showNotification(`ุชู ุฅุถุงูุฉ ${added} ุญุตุฉ ุจูุฌุงุญ`, 'success');
            }
        }

        // ========== ููุงูุฉ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ ==========

        // ุนุฑุถ ูุงุฆูุฉ ุงููุนูููู
        function renderTeachers() {
            const list = document.getElementById('teachers-list');
            if (teachers.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                        </svg>
                        <p class="text-lg">ูุง ุชูุฌุฏ ูุนูููู ุจุนุฏ. ุงุจุฏุฃ ุจุฅุถุงูุฉ ูุนูู!</p>
                    </div>
                `;
            } else {
                list.innerHTML = teachers.map(teacher => `
                    <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition">
                        <div>
                            <h3 class="font-bold text-lg text-gray-800">${teacher.name}</h3>
                            <p class="text-gray-600">ุงูุชุฎุตุต: ${teacher.subject}</p>
                            <p class="text-sm text-indigo-600">ุนุฏุฏ ุญุตุต ุงูุงูุชุธุงุฑ: ${teacher.substituteCount}</p>
                        </div>
                        <button onclick="deleteTeacher(${teacher.id})" class="text-red-600 hover:bg-red-100 p-2 rounded-lg transition">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                            </svg>
                        </button>
                    </div>
                `).join('');
            }
        }

        // ุนุฑุถ ุงูุฌุฏูู ุงููุฏุฑุณู
        function renderSchedule() {
            const list = document.getElementById('schedule-list');
            if (schedule.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        <p class="text-lg">ูุง ุชูุฌุฏ ุญุตุต ูู ุงูุฌุฏูู. ุงุจุฏุฃ ุจุฅุถุงูุฉ ุญุตุฉ!</p>
                    </div>
                `;
            } else {
                list.innerHTML = `
                    <table class="w-full">
                        <thead>
                            <tr class="bg-indigo-600 text-white">
                                <th class="p-3 text-right">ุงูููู</th>
                                <th class="p-3 text-right">ุงูุญุตุฉ</th>
                                <th class="p-3 text-right">ุงููุนูู</th>
                                <th class="p-3 text-right">ุงููุงุฏุฉ</th>
                                <th class="p-3 text-right">ุงูุตู</th>
                                <th class="p-3 text-center">ุฅุฌุฑุงุกุงุช</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${schedule.map(entry => `
                                <tr class="border-b hover:bg-gray-50">
                                    <td class="p-3">${entry.day}</td>
                                    <td class="p-3">${entry.period}</td>
                                    <td class="p-3 font-semibold">${entry.teacherName}</td>
                                    <td class="p-3">${entry.subject}</td>
                                    <td class="p-3">${entry.className}</td>
                                    <td class="p-3 text-center">
                                        <button onclick="deleteSchedule(${entry.id})" class="text-red-600 hover:bg-red-100 p-2 rounded-lg transition">
                                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            }
        }

               // ุนุฑุถ ุณุฌูุงุช ุงูุบูุงุจ
        function renderAbsences() {
            const list = document.getElementById('absences-list');
            if (absences.length === 0) {
                list.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <svg class="w-16 h-16 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                        <p class="text-lg">ูุง ุชูุฌุฏ ุณุฌูุงุช ุบูุงุจ ุญุชู ุงูุขู</p>
                    </div>
                `;
            } else {
                list.innerHTML = absences.map(absence => `
                    <div class="p-4 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border-r-4 border-orange-500">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center gap-2 mb-2 flex-wrap">
                                    <span class="bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-semibold">ุบุงุฆุจ</span>
                                    <span class="font-bold text-lg">${absence.absentTeacher}</span>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                                    <div><span class="text-gray-600">ุงูุจุฏูู:</span> <span class="font-semibold text-green-700">${absence.substitute}</span></div>
                                    <div><span class="text-gray-600">ุงูุชุงุฑูุฎ:</span> <span class="font-semibold">${absence.date}</span></div>
                                    <div><span class="text-gray-600">ุงูููู:</span> <span class="font-semibold">${absence.day}</span></div>
                                    <div><span class="text-gray-600">ุงูุญุตุฉ:</span> <span class="font-semibold">${absence.period}</span></div>
                                    <div><span class="text-gray-600">ุงููุงุฏุฉ:</span> <span class="font-semibold">${absence.subject}</span></div>
                                    <div><span class="text-gray-600">ุงูุตู:</span> <span class="font-semibold">${absence.className}</span></div>
                                </div>
                            </div>
                            <button onclick="deleteAbsence(${absence.id})" class="text-red-600 hover:bg-red-100 p-2 rounded-lg transition">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        // ุชุญุฏูุซ ุงูุฅุญุตุงุฆูุงุช
        function updateStats() {
            document.getElementById('stat-teachers').textContent = teachers.length;
            document.getElementById('stat-schedule').textContent = schedule.length;
            document.getElementById('stat-absences').textContent = absences.length;
        }

        // ุนุฑุถ ูู ุงููุญุชูู
        function renderAll() {
            renderTeachers();
            renderSchedule();
            renderAbsences();
            updateStats();
        }

        // ุชููุฆุฉ ุงูุตูุญุฉ
        window.onload = function() {
            loadData();
            
            // ุฅุถุงูุฉ ูุซุงู ุชูุถูุญู ููุงุณุชูุฑุงุฏ
            const exampleData = `ุงูุซุงูุซ - ูฆ
ุงูููู	ุงูุญุตุฉ ุงูุฃููู	ุงูุญุตุฉ ุงูุซุงููุฉ	ุงูุญุตุฉ ุงูุซุงูุซุฉ	ุงูุญุตุฉ ุงูุฑุงุจุนุฉ	ุงูุญุตุฉ ุงูุฎุงูุณุฉ	ุงูุญุตุฉ ุงูุณุงุฏุณุฉ	ุงูุญุตุฉ ุงูุณุงุจุนุฉ
ุงูุฃุญุฏ	

ุงูุชุฑุจูุฉ ุงูุจุฏููุฉ ูุงูุฏูุงุน ุนู ุงูููุณ
ุงููุนูู : ุณุงูุฑ ุงูุนุถููู ุงููุทูุฑู

ุงูุฑูุงุถูุงุช
ุงููุนูู : ุนุจูุฏ ุงูุนูุงุถู ุงูุญุฑุจู

ุงูุนููู
ุงููุนูู : ุฃุญูุฏ ุงูุญุฑุจู

ุงูุชูููุฑ ุงููุงูุฏ
ุงููุนูู : ุณุนุฏ ุงูุญุฑุจู

ุงูุฏุฑุงุณุงุช ุงูุงุฌุชูุงุนูุฉ
ุงููุนูู : ูุงูุน ุงููุทูุฑู

ุงููุฑุขู ุงููุฑูู ูุงูุฏุฑุงุณุงุช ุงูุฅุณูุงููุฉ
ุงููุนูู : ูููุงู ุงูุญุฑุจู

ุงููุบุฉ ุงูุนุฑุจูุฉ
ุงููุนูู : ุญุจูุจ ุงูุนูุฑู ุงูุญุฑุจู
ุงูุงุซููู	

ุงููุบุฉ ุงูุฅูุฌููุฒูุฉ
ุงููุนูู : ูุคุงุฏ ุจู ุงูุนุชูุจู

ุงูุฑูุงุถูุงุช
ุงููุนูู : ุนุจูุฏ ุงูุนูุงุถู ุงูุญุฑุจู

ุงููุฑุขู ุงููุฑูู ูุงูุฏุฑุงุณุงุช ุงูุฅุณูุงููุฉ
ุงููุนูู : ูููุงู ุงูุญุฑุจู

ุงููุฑุขู ุงููุฑูู ูุงูุฏุฑุงุณุงุช ุงูุฅุณูุงููุฉ
ุงููุนูู : ูููุงู ุงูุญุฑุจู

ุงูุนููู
ุงููุนูู : ุฃุญูุฏ ุงูุญุฑุจู

ุงูุชูููุฑ ุงููุงูุฏ
ุงููุนูู : ุณุนุฏ ุงูุญุฑุจู

ุงููุบุฉ ุงูุนุฑุจูุฉ
ุงููุนูู : ุญุจูุจ ุงูุนูุฑู ุงูุญุฑุจู`;

            document.getElementById('schedule-paste-area').placeholder = "ุงูุตู ุงูุฌุฏูู ุงููุงูู ููุง...\n\nูุซุงู:\n" + exampleData;
        };
    </script>
</body>
</html>
           
